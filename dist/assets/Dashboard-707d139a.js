import{c as ke,l as _a,r as M,q as Jo,j as r,L as rt,x as Ge,y as yn,z as es,B as he,E as ft,C as er,T as Je,X as Qe,u as ts,D as rs,I as ns,J as is,K as as,O as os,Q as ss,U as In,W as ls,Y as cs,V as ee,Z as us,_ as ot,$ as ds}from"./index-1606e3a6.js";import{M as lr,T as cr,S as Mn,H as fs}from"./trending-up-e61c2c55.js";import{C as it,U as ka}from"./user-320d65d9.js";import{C as Mt}from"./chevron-down-2615923f.js";import{C as Ea}from"./chevron-right-b6135664.js";import{F as Sa}from"./funnel-bb2d01a9.js";import{C as De}from"./clock-9cbbb956.js";import{P as Ln,I as ur,E as Rn,F as tr}from"./paperclip-7f3f2cde.js";import{E as dr}from"./eye-311343d1.js";/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ps=ke("book-open",hs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rt=ke("calendar",ms);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vs=ke("chevron-left",gs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nt=ke("circle-check-big",bs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$n=ke("circle-check",xs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Dn=ke("circle-x",ys);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],js=ke("circle",ws);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_s=ke("download",Ns);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],qn=ke("facebook",ks);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Ss=ke("film",Es);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Cs=ke("folder",Os);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],zs=ke("maximize-2",As);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Ts=ke("menu",Ps);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],fr=ke("message-square",Is);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ls=ke("save",Ms);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Jr=ke("search",Rs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ds=ke("settings",$s);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],Bs=ke("share",qs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Hs=ke("shield-alert",Fs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ht=ke("sparkles",Us);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Vs=ke("square-pen",Gs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],Ks=ke("star-off",Ws);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ys=ke("tag",Zs);/**
 * @license lucide-react v0.519.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Bn=ke("zap",Qs);function Fn({onLinkClick:e}){_a();const[n,t]=M.useState(""),{pathname:i}=Jo();M.useEffect(()=>{const c=localStorage.getItem("role");c&&t(c)},[]);const a=()=>{window.innerWidth<768&&e&&e()},o=c=>i.startsWith(c);return r.jsxs("aside",{className:"sidebar",children:[r.jsx("h2",{className:"sidebar-header",children:n==="admin"?"Panel de Administrador":"Panel de Editor"}),r.jsxs("nav",{className:"flex flex-col gap-1",children:[r.jsx("div",{className:"sidebar-section",children:"Contenido"}),r.jsx(rt,{to:"/admin/news",onClick:a,className:`group sidebar-link ${o("/admin/news")?"sidebar-link-active":""}`,children:r.jsx("span",{children:"Noticias"})}),r.jsx(rt,{to:"/admin/reports",onClick:a,className:`group sidebar-link ${o("/admin/reports")?"sidebar-link-active":""}`,children:r.jsx("span",{children:"Denuncias"})}),r.jsx(rt,{to:"/admin/perfil",onClick:a,className:`group sidebar-link ${o("/admin/perfil")?"sidebar-link-active":""}`,children:r.jsx("span",{children:"Mi Perfil"})}),r.jsx("div",{className:"sidebar-divider"}),r.jsx("div",{className:"sidebar-section",children:"Herramientas"}),r.jsx(rt,{to:"/admin/redactor-ia",onClick:a,className:`group sidebar-link ${o("/admin/redactor-ia")?"sidebar-link-active":""}`,children:r.jsx("span",{children:"Redactor IA"})}),r.jsx("div",{className:"sidebar-divider"}),n==="admin"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"sidebar-section",children:"Administración"}),r.jsx(rt,{to:"/admin/users",onClick:a,className:`group sidebar-link ${o("/admin/users")?"sidebar-link-active":""}`,children:r.jsx("span",{children:"Usuarios"})}),r.jsxs(rt,{to:"/admin/password-requests",onClick:a,className:`group sidebar-link ${o("/admin/password-requests")?"sidebar-link-active":""}`,children:[r.jsx(Hs,{className:"sidebar-icon"}),r.jsx("span",{children:"Solicitudes de contraseña"})]})]})]})]})}function Xs(){this.__data__=[],this.size=0}var Js=Xs;function el(e,n){return e===n||e!==e&&n!==n}var Oa=el,tl=Oa;function rl(e,n){for(var t=e.length;t--;)if(tl(e[t][0],n))return t;return-1}var Cr=rl,nl=Cr,il=Array.prototype,al=il.splice;function ol(e){var n=this.__data__,t=nl(n,e);if(t<0)return!1;var i=n.length-1;return t==i?n.pop():al.call(n,t,1),--this.size,!0}var sl=ol,ll=Cr;function cl(e){var n=this.__data__,t=ll(n,e);return t<0?void 0:n[t][1]}var ul=cl,dl=Cr;function fl(e){return dl(this.__data__,e)>-1}var hl=fl,pl=Cr;function ml(e,n){var t=this.__data__,i=pl(t,e);return i<0?(++this.size,t.push([e,n])):t[i][1]=n,this}var gl=ml,vl=Js,bl=sl,xl=ul,yl=hl,wl=gl;function wt(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}wt.prototype.clear=vl;wt.prototype.delete=bl;wt.prototype.get=xl;wt.prototype.has=yl;wt.prototype.set=wl;var Ar=wt,jl=Ar;function Nl(){this.__data__=new jl,this.size=0}var _l=Nl;function kl(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}var El=kl;function Sl(e){return this.__data__.get(e)}var Ol=Sl;function Cl(e){return this.__data__.has(e)}var Al=Cl,zl=typeof Ge=="object"&&Ge&&Ge.Object===Object&&Ge,Ca=zl,Pl=Ca,Tl=typeof self=="object"&&self&&self.Object===Object&&self,Il=Pl||Tl||Function("return this")(),at=Il,Ml=at,Ll=Ml.Symbol,wn=Ll,Hn=wn,Aa=Object.prototype,Rl=Aa.hasOwnProperty,$l=Aa.toString,At=Hn?Hn.toStringTag:void 0;function Dl(e){var n=Rl.call(e,At),t=e[At];try{e[At]=void 0;var i=!0}catch{}var a=$l.call(e);return i&&(n?e[At]=t:delete e[At]),a}var ql=Dl,Bl=Object.prototype,Fl=Bl.toString;function Hl(e){return Fl.call(e)}var Ul=Hl,Un=wn,Gl=ql,Vl=Ul,Wl="[object Null]",Kl="[object Undefined]",Gn=Un?Un.toStringTag:void 0;function Zl(e){return e==null?e===void 0?Kl:Wl:Gn&&Gn in Object(e)?Gl(e):Vl(e)}var zr=Zl;function Yl(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var za=Yl,Ql=zr,Xl=za,Jl="[object AsyncFunction]",ec="[object Function]",tc="[object GeneratorFunction]",rc="[object Proxy]";function nc(e){if(!Xl(e))return!1;var n=Ql(e);return n==ec||n==tc||n==Jl||n==rc}var Pa=nc,ic=at,ac=ic["__core-js_shared__"],oc=ac,Fr=oc,Vn=function(){var e=/[^.]+$/.exec(Fr&&Fr.keys&&Fr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function sc(e){return!!Vn&&Vn in e}var lc=sc,cc=Function.prototype,uc=cc.toString;function dc(e){if(e!=null){try{return uc.call(e)}catch{}try{return e+""}catch{}}return""}var Ta=dc,fc=Pa,hc=lc,pc=za,mc=Ta,gc=/[\\^$.*+?()[\]{}|]/g,vc=/^\[object .+?Constructor\]$/,bc=Function.prototype,xc=Object.prototype,yc=bc.toString,wc=xc.hasOwnProperty,jc=RegExp("^"+yc.call(wc).replace(gc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nc(e){if(!pc(e)||hc(e))return!1;var n=fc(e)?jc:vc;return n.test(mc(e))}var _c=Nc;function kc(e,n){return e==null?void 0:e[n]}var Ec=kc,Sc=_c,Oc=Ec;function Cc(e,n){var t=Oc(e,n);return Sc(t)?t:void 0}var jt=Cc,Ac=jt,zc=at,Pc=Ac(zc,"Map"),jn=Pc,Tc=jt,Ic=Tc(Object,"create"),Pr=Ic,Wn=Pr;function Mc(){this.__data__=Wn?Wn(null):{},this.size=0}var Lc=Mc;function Rc(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var $c=Rc,Dc=Pr,qc="__lodash_hash_undefined__",Bc=Object.prototype,Fc=Bc.hasOwnProperty;function Hc(e){var n=this.__data__;if(Dc){var t=n[e];return t===qc?void 0:t}return Fc.call(n,e)?n[e]:void 0}var Uc=Hc,Gc=Pr,Vc=Object.prototype,Wc=Vc.hasOwnProperty;function Kc(e){var n=this.__data__;return Gc?n[e]!==void 0:Wc.call(n,e)}var Zc=Kc,Yc=Pr,Qc="__lodash_hash_undefined__";function Xc(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Yc&&n===void 0?Qc:n,this}var Jc=Xc,eu=Lc,tu=$c,ru=Uc,nu=Zc,iu=Jc;function Nt(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}Nt.prototype.clear=eu;Nt.prototype.delete=tu;Nt.prototype.get=ru;Nt.prototype.has=nu;Nt.prototype.set=iu;var au=Nt,Kn=au,ou=Ar,su=jn;function lu(){this.size=0,this.__data__={hash:new Kn,map:new(su||ou),string:new Kn}}var cu=lu;function uu(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var du=uu,fu=du;function hu(e,n){var t=e.__data__;return fu(n)?t[typeof n=="string"?"string":"hash"]:t.map}var Tr=hu,pu=Tr;function mu(e){var n=pu(this,e).delete(e);return this.size-=n?1:0,n}var gu=mu,vu=Tr;function bu(e){return vu(this,e).get(e)}var xu=bu,yu=Tr;function wu(e){return yu(this,e).has(e)}var ju=wu,Nu=Tr;function _u(e,n){var t=Nu(this,e),i=t.size;return t.set(e,n),this.size+=t.size==i?0:1,this}var ku=_u,Eu=cu,Su=gu,Ou=xu,Cu=ju,Au=ku;function _t(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}_t.prototype.clear=Eu;_t.prototype.delete=Su;_t.prototype.get=Ou;_t.prototype.has=Cu;_t.prototype.set=Au;var Ia=_t,zu=Ar,Pu=jn,Tu=Ia,Iu=200;function Mu(e,n){var t=this.__data__;if(t instanceof zu){var i=t.__data__;if(!Pu||i.length<Iu-1)return i.push([e,n]),this.size=++t.size,this;t=this.__data__=new Tu(i)}return t.set(e,n),this.size=t.size,this}var Lu=Mu,Ru=Ar,$u=_l,Du=El,qu=Ol,Bu=Al,Fu=Lu;function kt(e){var n=this.__data__=new Ru(e);this.size=n.size}kt.prototype.clear=$u;kt.prototype.delete=Du;kt.prototype.get=qu;kt.prototype.has=Bu;kt.prototype.set=Fu;var Hu=kt,Uu="__lodash_hash_undefined__";function Gu(e){return this.__data__.set(e,Uu),this}var Vu=Gu;function Wu(e){return this.__data__.has(e)}var Ku=Wu,Zu=Ia,Yu=Vu,Qu=Ku;function hr(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new Zu;++n<t;)this.add(e[n])}hr.prototype.add=hr.prototype.push=Yu;hr.prototype.has=Qu;var Xu=hr;function Ju(e,n){for(var t=-1,i=e==null?0:e.length;++t<i;)if(n(e[t],t,e))return!0;return!1}var ed=Ju;function td(e,n){return e.has(n)}var rd=td,nd=Xu,id=ed,ad=rd,od=1,sd=2;function ld(e,n,t,i,a,o){var c=t&od,m=e.length,v=n.length;if(m!=v&&!(c&&v>m))return!1;var y=o.get(e),x=o.get(n);if(y&&x)return y==n&&x==e;var u=-1,s=!0,l=t&sd?new nd:void 0;for(o.set(e,n),o.set(n,e);++u<m;){var g=e[u],d=n[u];if(i)var b=c?i(d,g,u,n,e,o):i(g,d,u,e,n,o);if(b!==void 0){if(b)continue;s=!1;break}if(l){if(!id(n,function(f,p){if(!ad(l,p)&&(g===f||a(g,f,t,i,o)))return l.push(p)})){s=!1;break}}else if(!(g===d||a(g,d,t,i,o))){s=!1;break}}return o.delete(e),o.delete(n),s}var Ma=ld,cd=at,ud=cd.Uint8Array,dd=ud;function fd(e){var n=-1,t=Array(e.size);return e.forEach(function(i,a){t[++n]=[a,i]}),t}var hd=fd;function pd(e){var n=-1,t=Array(e.size);return e.forEach(function(i){t[++n]=i}),t}var md=pd,Zn=wn,Yn=dd,gd=Oa,vd=Ma,bd=hd,xd=md,yd=1,wd=2,jd="[object Boolean]",Nd="[object Date]",_d="[object Error]",kd="[object Map]",Ed="[object Number]",Sd="[object RegExp]",Od="[object Set]",Cd="[object String]",Ad="[object Symbol]",zd="[object ArrayBuffer]",Pd="[object DataView]",Qn=Zn?Zn.prototype:void 0,Hr=Qn?Qn.valueOf:void 0;function Td(e,n,t,i,a,o,c){switch(t){case Pd:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case zd:return!(e.byteLength!=n.byteLength||!o(new Yn(e),new Yn(n)));case jd:case Nd:case Ed:return gd(+e,+n);case _d:return e.name==n.name&&e.message==n.message;case Sd:case Cd:return e==n+"";case kd:var m=bd;case Od:var v=i&yd;if(m||(m=xd),e.size!=n.size&&!v)return!1;var y=c.get(e);if(y)return y==n;i|=wd,c.set(e,n);var x=vd(m(e),m(n),i,a,o,c);return c.delete(e),x;case Ad:if(Hr)return Hr.call(e)==Hr.call(n)}return!1}var Id=Td;function Md(e,n){for(var t=-1,i=n.length,a=e.length;++t<i;)e[a+t]=n[t];return e}var Ld=Md,Rd=Array.isArray,Nn=Rd,$d=Ld,Dd=Nn;function qd(e,n,t){var i=n(e);return Dd(e)?i:$d(i,t(e))}var Bd=qd;function Fd(e,n){for(var t=-1,i=e==null?0:e.length,a=0,o=[];++t<i;){var c=e[t];n(c,t,e)&&(o[a++]=c)}return o}var Hd=Fd;function Ud(){return[]}var Gd=Ud,Vd=Hd,Wd=Gd,Kd=Object.prototype,Zd=Kd.propertyIsEnumerable,Xn=Object.getOwnPropertySymbols,Yd=Xn?function(e){return e==null?[]:(e=Object(e),Vd(Xn(e),function(n){return Zd.call(e,n)}))}:Wd,Qd=Yd;function Xd(e,n){for(var t=-1,i=Array(e);++t<e;)i[t]=n(t);return i}var Jd=Xd;function ef(e){return e!=null&&typeof e=="object"}var Ir=ef,tf=zr,rf=Ir,nf="[object Arguments]";function af(e){return rf(e)&&tf(e)==nf}var of=af,Jn=of,sf=Ir,La=Object.prototype,lf=La.hasOwnProperty,cf=La.propertyIsEnumerable,uf=Jn(function(){return arguments}())?Jn:function(e){return sf(e)&&lf.call(e,"callee")&&!cf.call(e,"callee")},df=uf,pr={exports:{}};function ff(){return!1}var hf=ff;pr.exports;(function(e,n){var t=at,i=hf,a=n&&!n.nodeType&&n,o=a&&!0&&e&&!e.nodeType&&e,c=o&&o.exports===a,m=c?t.Buffer:void 0,v=m?m.isBuffer:void 0,y=v||i;e.exports=y})(pr,pr.exports);var Ra=pr.exports,pf=9007199254740991,mf=/^(?:0|[1-9]\d*)$/;function gf(e,n){var t=typeof e;return n=n??pf,!!n&&(t=="number"||t!="symbol"&&mf.test(e))&&e>-1&&e%1==0&&e<n}var vf=gf,bf=9007199254740991;function xf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bf}var $a=xf,yf=zr,wf=$a,jf=Ir,Nf="[object Arguments]",_f="[object Array]",kf="[object Boolean]",Ef="[object Date]",Sf="[object Error]",Of="[object Function]",Cf="[object Map]",Af="[object Number]",zf="[object Object]",Pf="[object RegExp]",Tf="[object Set]",If="[object String]",Mf="[object WeakMap]",Lf="[object ArrayBuffer]",Rf="[object DataView]",$f="[object Float32Array]",Df="[object Float64Array]",qf="[object Int8Array]",Bf="[object Int16Array]",Ff="[object Int32Array]",Hf="[object Uint8Array]",Uf="[object Uint8ClampedArray]",Gf="[object Uint16Array]",Vf="[object Uint32Array]",Ne={};Ne[$f]=Ne[Df]=Ne[qf]=Ne[Bf]=Ne[Ff]=Ne[Hf]=Ne[Uf]=Ne[Gf]=Ne[Vf]=!0;Ne[Nf]=Ne[_f]=Ne[Lf]=Ne[kf]=Ne[Rf]=Ne[Ef]=Ne[Sf]=Ne[Of]=Ne[Cf]=Ne[Af]=Ne[zf]=Ne[Pf]=Ne[Tf]=Ne[If]=Ne[Mf]=!1;function Wf(e){return jf(e)&&wf(e.length)&&!!Ne[yf(e)]}var Kf=Wf;function Zf(e){return function(n){return e(n)}}var Yf=Zf,mr={exports:{}};mr.exports;(function(e,n){var t=Ca,i=n&&!n.nodeType&&n,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,c=o&&t.process,m=function(){try{var v=a&&a.require&&a.require("util").types;return v||c&&c.binding&&c.binding("util")}catch{}}();e.exports=m})(mr,mr.exports);var Qf=mr.exports,Xf=Kf,Jf=Yf,ei=Qf,ti=ei&&ei.isTypedArray,eh=ti?Jf(ti):Xf,Da=eh,th=Jd,rh=df,nh=Nn,ih=Ra,ah=vf,oh=Da,sh=Object.prototype,lh=sh.hasOwnProperty;function ch(e,n){var t=nh(e),i=!t&&rh(e),a=!t&&!i&&ih(e),o=!t&&!i&&!a&&oh(e),c=t||i||a||o,m=c?th(e.length,String):[],v=m.length;for(var y in e)(n||lh.call(e,y))&&!(c&&(y=="length"||a&&(y=="offset"||y=="parent")||o&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||ah(y,v)))&&m.push(y);return m}var uh=ch,dh=Object.prototype;function fh(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||dh;return e===t}var hh=fh;function ph(e,n){return function(t){return e(n(t))}}var mh=ph,gh=mh,vh=gh(Object.keys,Object),bh=vh,xh=hh,yh=bh,wh=Object.prototype,jh=wh.hasOwnProperty;function Nh(e){if(!xh(e))return yh(e);var n=[];for(var t in Object(e))jh.call(e,t)&&t!="constructor"&&n.push(t);return n}var _h=Nh,kh=Pa,Eh=$a;function Sh(e){return e!=null&&Eh(e.length)&&!kh(e)}var Oh=Sh,Ch=uh,Ah=_h,zh=Oh;function Ph(e){return zh(e)?Ch(e):Ah(e)}var Th=Ph,Ih=Bd,Mh=Qd,Lh=Th;function Rh(e){return Ih(e,Lh,Mh)}var $h=Rh,ri=$h,Dh=1,qh=Object.prototype,Bh=qh.hasOwnProperty;function Fh(e,n,t,i,a,o){var c=t&Dh,m=ri(e),v=m.length,y=ri(n),x=y.length;if(v!=x&&!c)return!1;for(var u=v;u--;){var s=m[u];if(!(c?s in n:Bh.call(n,s)))return!1}var l=o.get(e),g=o.get(n);if(l&&g)return l==n&&g==e;var d=!0;o.set(e,n),o.set(n,e);for(var b=c;++u<v;){s=m[u];var f=e[s],p=n[s];if(i)var j=c?i(p,f,s,n,e,o):i(f,p,s,e,n,o);if(!(j===void 0?f===p||a(f,p,t,i,o):j)){d=!1;break}b||(b=s=="constructor")}if(d&&!b){var h=e.constructor,N=n.constructor;h!=N&&"constructor"in e&&"constructor"in n&&!(typeof h=="function"&&h instanceof h&&typeof N=="function"&&N instanceof N)&&(d=!1)}return o.delete(e),o.delete(n),d}var Hh=Fh,Uh=jt,Gh=at,Vh=Uh(Gh,"DataView"),Wh=Vh,Kh=jt,Zh=at,Yh=Kh(Zh,"Promise"),Qh=Yh,Xh=jt,Jh=at,ep=Xh(Jh,"Set"),tp=ep,rp=jt,np=at,ip=rp(np,"WeakMap"),ap=ip,en=Wh,tn=jn,rn=Qh,nn=tp,an=ap,qa=zr,Et=Ta,ni="[object Map]",op="[object Object]",ii="[object Promise]",ai="[object Set]",oi="[object WeakMap]",si="[object DataView]",sp=Et(en),lp=Et(tn),cp=Et(rn),up=Et(nn),dp=Et(an),ut=qa;(en&&ut(new en(new ArrayBuffer(1)))!=si||tn&&ut(new tn)!=ni||rn&&ut(rn.resolve())!=ii||nn&&ut(new nn)!=ai||an&&ut(new an)!=oi)&&(ut=function(e){var n=qa(e),t=n==op?e.constructor:void 0,i=t?Et(t):"";if(i)switch(i){case sp:return si;case lp:return ni;case cp:return ii;case up:return ai;case dp:return oi}return n});var fp=ut,Ur=Hu,hp=Ma,pp=Id,mp=Hh,li=fp,ci=Nn,ui=Ra,gp=Da,vp=1,di="[object Arguments]",fi="[object Array]",Kt="[object Object]",bp=Object.prototype,hi=bp.hasOwnProperty;function xp(e,n,t,i,a,o){var c=ci(e),m=ci(n),v=c?fi:li(e),y=m?fi:li(n);v=v==di?Kt:v,y=y==di?Kt:y;var x=v==Kt,u=y==Kt,s=v==y;if(s&&ui(e)){if(!ui(n))return!1;c=!0,x=!1}if(s&&!x)return o||(o=new Ur),c||gp(e)?hp(e,n,t,i,a,o):pp(e,n,v,t,i,a,o);if(!(t&vp)){var l=x&&hi.call(e,"__wrapped__"),g=u&&hi.call(n,"__wrapped__");if(l||g){var d=l?e.value():e,b=g?n.value():n;return o||(o=new Ur),a(d,b,t,i,o)}}return s?(o||(o=new Ur),mp(e,n,t,i,a,o)):!1}var yp=xp,wp=yp,pi=Ir;function Ba(e,n,t,i,a){return e===n?!0:e==null||n==null||!pi(e)&&!pi(n)?e!==e&&n!==n:wp(e,n,t,i,Ba,a)}var jp=Ba,Np=jp;function _p(e,n){return Np(e,n)}var kp=_p,Fa={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,n){(function(i,a){e.exports=a()})(typeof self<"u"?self:Ge,function(){return function(t){var i={};function a(o){if(i[o])return i[o].exports;var c=i[o]={i:o,l:!1,exports:{}};return t[o].call(c.exports,c,c.exports,a),c.l=!0,c.exports}return a.m=t,a.c=i,a.d=function(o,c,m){a.o(o,c)||Object.defineProperty(o,c,{configurable:!1,enumerable:!0,get:m})},a.n=function(o){var c=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(c,"a",c),c},a.o=function(o,c){return Object.prototype.hasOwnProperty.call(o,c)},a.p="",a(a.s=109)}([function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(17),c=a(18),m=a(19),v=a(45),y=a(46),x=a(47),u=a(48),s=a(49),l=a(12),g=a(32),d=a(33),b=a(31),f=a(1),p={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:o.default,Format:c.default,Leaf:m.default,Embed:u.default,Scroll:v.default,Block:x.default,Inline:y.default,Text:s.default,Attributor:{Attribute:l.default,Class:g.default,Style:d.default,Store:b.default}};i.default=p},function(t,i,a){var o=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var j in p)p.hasOwnProperty(j)&&(f[j]=p[j])};return function(f,p){b(f,p);function j(){this.constructor=f}f.prototype=p===null?Object.create(p):(j.prototype=p.prototype,new j)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=function(b){o(f,b);function f(p){var j=this;return p="[Parchment] "+p,j=b.call(this,p)||this,j.message=p,j.name=j.constructor.name,j}return f}(Error);i.ParchmentError=c;var m={},v={},y={},x={};i.DATA_KEY="__blot";var u;(function(b){b[b.TYPE=3]="TYPE",b[b.LEVEL=12]="LEVEL",b[b.ATTRIBUTE=13]="ATTRIBUTE",b[b.BLOT=14]="BLOT",b[b.INLINE=7]="INLINE",b[b.BLOCK=11]="BLOCK",b[b.BLOCK_BLOT=10]="BLOCK_BLOT",b[b.INLINE_BLOT=6]="INLINE_BLOT",b[b.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",b[b.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",b[b.ANY=15]="ANY"})(u=i.Scope||(i.Scope={}));function s(b,f){var p=g(b);if(p==null)throw new c("Unable to create "+b+" blot");var j=p,h=b instanceof Node||b.nodeType===Node.TEXT_NODE?b:j.create(f);return new j(h,f)}i.create=s;function l(b,f){return f===void 0&&(f=!1),b==null?null:b[i.DATA_KEY]!=null?b[i.DATA_KEY].blot:f?l(b.parentNode,f):null}i.find=l;function g(b,f){f===void 0&&(f=u.ANY);var p;if(typeof b=="string")p=x[b]||m[b];else if(b instanceof Text||b.nodeType===Node.TEXT_NODE)p=x.text;else if(typeof b=="number")b&u.LEVEL&u.BLOCK?p=x.block:b&u.LEVEL&u.INLINE&&(p=x.inline);else if(b instanceof HTMLElement){var j=(b.getAttribute("class")||"").split(/\s+/);for(var h in j)if(p=v[j[h]],p)break;p=p||y[b.tagName]}return p==null?null:f&u.LEVEL&p.scope&&f&u.TYPE&p.scope?p:null}i.query=g;function d(){for(var b=[],f=0;f<arguments.length;f++)b[f]=arguments[f];if(b.length>1)return b.map(function(h){return d(h)});var p=b[0];if(typeof p.blotName!="string"&&typeof p.attrName!="string")throw new c("Invalid definition");if(p.blotName==="abstract")throw new c("Cannot register abstract class");if(x[p.blotName||p.attrName]=p,typeof p.keyName=="string")m[p.keyName]=p;else if(p.className!=null&&(v[p.className]=p),p.tagName!=null){Array.isArray(p.tagName)?p.tagName=p.tagName.map(function(h){return h.toUpperCase()}):p.tagName=p.tagName.toUpperCase();var j=Array.isArray(p.tagName)?p.tagName:[p.tagName];j.forEach(function(h){(y[h]==null||p.className==null)&&(y[h]=p)})}return p}i.register=d},function(t,i,a){var o=a(51),c=a(11),m=a(3),v=a(20),y=String.fromCharCode(0),x=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};x.prototype.insert=function(u,s){var l={};return u.length===0?this:(l.insert=u,s!=null&&typeof s=="object"&&Object.keys(s).length>0&&(l.attributes=s),this.push(l))},x.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},x.prototype.retain=function(u,s){if(u<=0)return this;var l={retain:u};return s!=null&&typeof s=="object"&&Object.keys(s).length>0&&(l.attributes=s),this.push(l)},x.prototype.push=function(u){var s=this.ops.length,l=this.ops[s-1];if(u=m(!0,{},u),typeof l=="object"){if(typeof u.delete=="number"&&typeof l.delete=="number")return this.ops[s-1]={delete:l.delete+u.delete},this;if(typeof l.delete=="number"&&u.insert!=null&&(s-=1,l=this.ops[s-1],typeof l!="object"))return this.ops.unshift(u),this;if(c(u.attributes,l.attributes)){if(typeof u.insert=="string"&&typeof l.insert=="string")return this.ops[s-1]={insert:l.insert+u.insert},typeof u.attributes=="object"&&(this.ops[s-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof l.retain=="number")return this.ops[s-1]={retain:l.retain+u.retain},typeof u.attributes=="object"&&(this.ops[s-1].attributes=u.attributes),this}}return s===this.ops.length?this.ops.push(u):this.ops.splice(s,0,u),this},x.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},x.prototype.filter=function(u){return this.ops.filter(u)},x.prototype.forEach=function(u){this.ops.forEach(u)},x.prototype.map=function(u){return this.ops.map(u)},x.prototype.partition=function(u){var s=[],l=[];return this.forEach(function(g){var d=u(g)?s:l;d.push(g)}),[s,l]},x.prototype.reduce=function(u,s){return this.ops.reduce(u,s)},x.prototype.changeLength=function(){return this.reduce(function(u,s){return s.insert?u+v.length(s):s.delete?u-s.delete:u},0)},x.prototype.length=function(){return this.reduce(function(u,s){return u+v.length(s)},0)},x.prototype.slice=function(u,s){u=u||0,typeof s!="number"&&(s=1/0);for(var l=[],g=v.iterator(this.ops),d=0;d<s&&g.hasNext();){var b;d<u?b=g.next(u-d):(b=g.next(s-d),l.push(b)),d+=v.length(b)}return new x(l)},x.prototype.compose=function(u){var s=v.iterator(this.ops),l=v.iterator(u.ops),g=[],d=l.peek();if(d!=null&&typeof d.retain=="number"&&d.attributes==null){for(var b=d.retain;s.peekType()==="insert"&&s.peekLength()<=b;)b-=s.peekLength(),g.push(s.next());d.retain-b>0&&l.next(d.retain-b)}for(var f=new x(g);s.hasNext()||l.hasNext();)if(l.peekType()==="insert")f.push(l.next());else if(s.peekType()==="delete")f.push(s.next());else{var p=Math.min(s.peekLength(),l.peekLength()),j=s.next(p),h=l.next(p);if(typeof h.retain=="number"){var N={};typeof j.retain=="number"?N.retain=p:N.insert=j.insert;var A=v.attributes.compose(j.attributes,h.attributes,typeof j.retain=="number");if(A&&(N.attributes=A),f.push(N),!l.hasNext()&&c(f.ops[f.ops.length-1],N)){var O=new x(s.rest());return f.concat(O).chop()}}else typeof h.delete=="number"&&typeof j.retain=="number"&&f.push(h)}return f.chop()},x.prototype.concat=function(u){var s=new x(this.ops.slice());return u.ops.length>0&&(s.push(u.ops[0]),s.ops=s.ops.concat(u.ops.slice(1))),s},x.prototype.diff=function(u,s){if(this.ops===u.ops)return new x;var l=[this,u].map(function(p){return p.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:y;var h=p===u?"on":"with";throw new Error("diff() called "+h+" non-document")}).join("")}),g=new x,d=o(l[0],l[1],s),b=v.iterator(this.ops),f=v.iterator(u.ops);return d.forEach(function(p){for(var j=p[1].length;j>0;){var h=0;switch(p[0]){case o.INSERT:h=Math.min(f.peekLength(),j),g.push(f.next(h));break;case o.DELETE:h=Math.min(j,b.peekLength()),b.next(h),g.delete(h);break;case o.EQUAL:h=Math.min(b.peekLength(),f.peekLength(),j);var N=b.next(h),A=f.next(h);c(N.insert,A.insert)?g.retain(h,v.attributes.diff(N.attributes,A.attributes)):g.push(A).delete(h);break}j-=h}}),g.chop()},x.prototype.eachLine=function(u,s){s=s||`
`;for(var l=v.iterator(this.ops),g=new x,d=0;l.hasNext();){if(l.peekType()!=="insert")return;var b=l.peek(),f=v.length(b)-l.peekLength(),p=typeof b.insert=="string"?b.insert.indexOf(s,f)-f:-1;if(p<0)g.push(l.next());else if(p>0)g.push(l.next(p));else{if(u(g,l.next(1).attributes||{},d)===!1)return;d+=1,g=new x}}g.length()>0&&u(g,{},d)},x.prototype.transform=function(u,s){if(s=!!s,typeof u=="number")return this.transformPosition(u,s);for(var l=v.iterator(this.ops),g=v.iterator(u.ops),d=new x;l.hasNext()||g.hasNext();)if(l.peekType()==="insert"&&(s||g.peekType()!=="insert"))d.retain(v.length(l.next()));else if(g.peekType()==="insert")d.push(g.next());else{var b=Math.min(l.peekLength(),g.peekLength()),f=l.next(b),p=g.next(b);if(f.delete)continue;p.delete?d.push(p):d.retain(b,v.attributes.transform(f.attributes,p.attributes,s))}return d.chop()},x.prototype.transformPosition=function(u,s){s=!!s;for(var l=v.iterator(this.ops),g=0;l.hasNext()&&g<=u;){var d=l.peekLength(),b=l.peekType();if(l.next(),b==="delete"){u-=Math.min(d,u-g);continue}else b==="insert"&&(g<u||!s)&&(u+=d);g+=d}return u},t.exports=x},function(t,i){var a=Object.prototype.hasOwnProperty,o=Object.prototype.toString,c=Object.defineProperty,m=Object.getOwnPropertyDescriptor,v=function(l){return typeof Array.isArray=="function"?Array.isArray(l):o.call(l)==="[object Array]"},y=function(l){if(!l||o.call(l)!=="[object Object]")return!1;var g=a.call(l,"constructor"),d=l.constructor&&l.constructor.prototype&&a.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!g&&!d)return!1;var b;for(b in l);return typeof b>"u"||a.call(l,b)},x=function(l,g){c&&g.name==="__proto__"?c(l,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):l[g.name]=g.newValue},u=function(l,g){if(g==="__proto__")if(a.call(l,g)){if(m)return m(l,g).value}else return;return l[g]};t.exports=function s(){var l,g,d,b,f,p,j=arguments[0],h=1,N=arguments.length,A=!1;for(typeof j=="boolean"&&(A=j,j=arguments[1]||{},h=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});h<N;++h)if(l=arguments[h],l!=null)for(g in l)d=u(j,g),b=u(l,g),j!==b&&(A&&b&&(y(b)||(f=v(b)))?(f?(f=!1,p=d&&v(d)?d:[]):p=d&&y(d)?d:{},x(j,{name:g,newValue:s(A,p,b)})):typeof b<"u"&&x(j,{name:g,newValue:b}));return j}},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BlockEmbed=i.bubbleFormats=void 0;var o=function(){function _(E,P){for(var z=0;z<P.length;z++){var L=P[z];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,P,z){return P&&_(E.prototype,P),z&&_(E,z),E}}(),c=function _(E,P,z){E===null&&(E=Function.prototype);var L=Object.getOwnPropertyDescriptor(E,P);if(L===void 0){var U=Object.getPrototypeOf(E);return U===null?void 0:_(U,P,z)}else{if("value"in L)return L.value;var G=L.get;return G===void 0?void 0:G.call(z)}},m=a(3),v=j(m),y=a(2),x=j(y),u=a(0),s=j(u),l=a(16),g=j(l),d=a(6),b=j(d),f=a(7),p=j(f);function j(_){return _&&_.__esModule?_:{default:_}}function h(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function N(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function A(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var O=1,S=function(_){A(E,_);function E(){return h(this,E),N(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return o(E,[{key:"attach",value:function(){c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"attach",this).call(this),this.attributes=new s.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new x.default().insert(this.value(),(0,v.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(z,L){var U=s.default.query(z,s.default.Scope.BLOCK_ATTRIBUTE);U!=null&&this.attributes.attribute(U,L)}},{key:"formatAt",value:function(z,L,U,G){this.format(U,G)}},{key:"insertAt",value:function(z,L,U){if(typeof L=="string"&&L.endsWith(`
`)){var G=s.default.create(T.blotName);this.parent.insertBefore(G,z===0?this:this.next),G.insertAt(0,L.slice(0,-1))}else c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,z,L,U)}}]),E}(s.default.Embed);S.scope=s.default.Scope.BLOCK_BLOT;var T=function(_){A(E,_);function E(P){h(this,E);var z=N(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,P));return z.cache={},z}return o(E,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(s.default.Leaf).reduce(function(z,L){return L.length()===0?z:z.insert(L.value(),k(L))},new x.default).insert(`
`,k(this))),this.cache.delta}},{key:"deleteAt",value:function(z,L){c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,z,L),this.cache={}}},{key:"formatAt",value:function(z,L,U,G){L<=0||(s.default.query(U,s.default.Scope.BLOCK)?z+L===this.length()&&this.format(U,G):c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,z,Math.min(L,this.length()-z-1),U,G),this.cache={})}},{key:"insertAt",value:function(z,L,U){if(U!=null)return c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,z,L,U);if(L.length!==0){var G=L.split(`
`),Q=G.shift();Q.length>0&&(z<this.length()-1||this.children.tail==null?c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,Math.min(z,this.length()-1),Q):this.children.tail.insertAt(this.children.tail.length(),Q),this.cache={});var F=this;G.reduce(function(D,C){return F=F.split(D,!0),F.insertAt(0,C),C.length},z+Q.length)}}},{key:"insertBefore",value:function(z,L){var U=this.children.head;c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,z,L),U instanceof g.default&&U.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"length",this).call(this)+O),this.cache.length}},{key:"moveChildren",value:function(z,L){c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"moveChildren",this).call(this,z,L),this.cache={}}},{key:"optimize",value:function(z){c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,z),this.cache={}}},{key:"path",value:function(z){return c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,z,!0)}},{key:"removeChild",value:function(z){c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"removeChild",this).call(this,z),this.cache={}}},{key:"split",value:function(z){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(L&&(z===0||z>=this.length()-O)){var U=this.clone();return z===0?(this.parent.insertBefore(U,this),this):(this.parent.insertBefore(U,this.next),U)}else{var G=c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"split",this).call(this,z,L);return this.cache={},G}}}]),E}(s.default.Block);T.blotName="block",T.tagName="P",T.defaultChild="break",T.allowedChildren=[b.default,s.default.Embed,p.default];function k(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _==null||(typeof _.formats=="function"&&(E=(0,v.default)(E,_.formats())),_.parent==null||_.parent.blotName=="scroll"||_.parent.statics.scope!==_.statics.scope)?E:k(_.parent,E)}i.bubbleFormats=k,i.BlockEmbed=S,i.default=T},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.overload=i.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},c=function(){function F(D,C){var R=[],I=!0,H=!1,q=void 0;try{for(var w=D[Symbol.iterator](),$;!(I=($=w.next()).done)&&(R.push($.value),!(C&&R.length===C));I=!0);}catch(B){H=!0,q=B}finally{try{!I&&w.return&&w.return()}finally{if(H)throw q}}return R}return function(D,C){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return F(D,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function F(D,C){for(var R=0;R<C.length;R++){var I=C[R];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(D,I.key,I)}}return function(D,C,R){return C&&F(D.prototype,C),R&&F(D,R),D}}();a(50);var v=a(2),y=k(v),x=a(14),u=k(x),s=a(8),l=k(s),g=a(9),d=k(g),b=a(0),f=k(b),p=a(15),j=k(p),h=a(3),N=k(h),A=a(10),O=k(A),S=a(34),T=k(S);function k(F){return F&&F.__esModule?F:{default:F}}function _(F,D,C){return D in F?Object.defineProperty(F,D,{value:C,enumerable:!0,configurable:!0,writable:!0}):F[D]=C,F}function E(F,D){if(!(F instanceof D))throw new TypeError("Cannot call a class as a function")}var P=(0,O.default)("quill"),z=function(){m(F,null,[{key:"debug",value:function(C){C===!0&&(C="log"),O.default.level(C)}},{key:"find",value:function(C){return C.__quill||f.default.find(C)}},{key:"import",value:function(C){return this.imports[C]==null&&P.error("Cannot import "+C+". Are you sure it was registered?"),this.imports[C]}},{key:"register",value:function(C,R){var I=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof C!="string"){var q=C.attrName||C.blotName;typeof q=="string"?this.register("formats/"+q,C,R):Object.keys(C).forEach(function(w){I.register(w,C[w],R)})}else this.imports[C]!=null&&!H&&P.warn("Overwriting "+C+" with",R),this.imports[C]=R,(C.startsWith("blots/")||C.startsWith("formats/"))&&R.blotName!=="abstract"?f.default.register(R):C.startsWith("modules")&&typeof R.register=="function"&&R.register()}}]);function F(D){var C=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E(this,F),this.options=L(D,R),this.container=this.options.container,this.container==null)return P.error("Invalid Quill container",D);this.options.debug&&F.debug(this.options.debug);var I=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=f.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(q){q===l.default.events.TEXT_CHANGE&&C.root.classList.toggle("ql-blank",C.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(q,w){var $=C.selection.lastRange,B=$&&$.length===0?$.index:void 0;U.call(C,function(){return C.editor.update(null,w,B)},q)});var H=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+I+"<p><br></p></div>");this.setContents(H),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return m(F,[{key:"addContainer",value:function(C){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof C=="string"){var I=C;C=document.createElement("div"),C.classList.add(I)}return this.container.insertBefore(C,R),C}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(C,R,I){var H=this,q=G(C,R,I),w=c(q,4);return C=w[0],R=w[1],I=w[3],U.call(this,function(){return H.editor.deleteText(C,R)},I,C,-1*R)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(C),this.container.classList.toggle("ql-disabled",!C)}},{key:"focus",value:function(){var C=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=C,this.scrollIntoView()}},{key:"format",value:function(C,R){var I=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.default.sources.API;return U.call(this,function(){var q=I.getSelection(!0),w=new y.default;if(q==null)return w;if(f.default.query(C,f.default.Scope.BLOCK))w=I.editor.formatLine(q.index,q.length,_({},C,R));else{if(q.length===0)return I.selection.format(C,R),w;w=I.editor.formatText(q.index,q.length,_({},C,R))}return I.setSelection(q,l.default.sources.SILENT),w},H)}},{key:"formatLine",value:function(C,R,I,H,q){var w=this,$=void 0,B=G(C,R,I,H,q),V=c(B,4);return C=V[0],R=V[1],$=V[2],q=V[3],U.call(this,function(){return w.editor.formatLine(C,R,$)},q,C,0)}},{key:"formatText",value:function(C,R,I,H,q){var w=this,$=void 0,B=G(C,R,I,H,q),V=c(B,4);return C=V[0],R=V[1],$=V[2],q=V[3],U.call(this,function(){return w.editor.formatText(C,R,$)},q,C,0)}},{key:"getBounds",value:function(C){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=void 0;typeof C=="number"?I=this.selection.getBounds(C,R):I=this.selection.getBounds(C.index,C.length);var H=this.container.getBoundingClientRect();return{bottom:I.bottom-H.top,height:I.height,left:I.left-H.left,right:I.right-H.left,top:I.top-H.top,width:I.width}}},{key:"getContents",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,I=G(C,R),H=c(I,2);return C=H[0],R=H[1],this.editor.getContents(C,R)}},{key:"getFormat",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof C=="number"?this.editor.getFormat(C,R):this.editor.getFormat(C.index,C.length)}},{key:"getIndex",value:function(C){return C.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(C){return this.scroll.leaf(C)}},{key:"getLine",value:function(C){return this.scroll.line(C)}},{key:"getLines",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof C!="number"?this.scroll.lines(C.index,C.length):this.scroll.lines(C,R)}},{key:"getModule",value:function(C){return this.theme.modules[C]}},{key:"getSelection",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return C&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,I=G(C,R),H=c(I,2);return C=H[0],R=H[1],this.editor.getText(C,R)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(C,R,I){var H=this,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:F.sources.API;return U.call(this,function(){return H.editor.insertEmbed(C,R,I)},q,C)}},{key:"insertText",value:function(C,R,I,H,q){var w=this,$=void 0,B=G(C,0,I,H,q),V=c(B,4);return C=V[0],$=V[2],q=V[3],U.call(this,function(){return w.editor.insertText(C,R,$)},q,C,R.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(C,R,I){this.clipboard.dangerouslyPasteHTML(C,R,I)}},{key:"removeFormat",value:function(C,R,I){var H=this,q=G(C,R,I),w=c(q,4);return C=w[0],R=w[1],I=w[3],U.call(this,function(){return H.editor.removeFormat(C,R)},I,C)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(C){var R=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API;return U.call(this,function(){C=new y.default(C);var H=R.getLength(),q=R.editor.deleteText(0,H),w=R.editor.applyDelta(C),$=w.ops[w.ops.length-1];$!=null&&typeof $.insert=="string"&&$.insert[$.insert.length-1]===`
`&&(R.editor.deleteText(R.getLength()-1,1),w.delete(1));var B=q.compose(w);return B},I)}},{key:"setSelection",value:function(C,R,I){if(C==null)this.selection.setRange(null,R||F.sources.API);else{var H=G(C,R,I),q=c(H,4);C=q[0],R=q[1],I=q[3],this.selection.setRange(new p.Range(C,R),I),I!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(C){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API,I=new y.default().insert(C);return this.setContents(I,R)}},{key:"update",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.default.sources.USER,R=this.scroll.update(C);return this.selection.update(C),R}},{key:"updateContents",value:function(C){var R=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.default.sources.API;return U.call(this,function(){return C=new y.default(C),R.editor.applyDelta(C,I)},I,!0)}}]),F}();z.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},z.events=l.default.events,z.sources=l.default.sources,z.version="1.3.7",z.imports={delta:y.default,parchment:f.default,"core/module":d.default,"core/theme":T.default};function L(F,D){if(D=(0,N.default)(!0,{container:F,modules:{clipboard:!0,keyboard:!0,history:!0}},D),!D.theme||D.theme===z.DEFAULTS.theme)D.theme=T.default;else if(D.theme=z.import("themes/"+D.theme),D.theme==null)throw new Error("Invalid theme "+D.theme+". Did you register it?");var C=(0,N.default)(!0,{},D.theme.DEFAULTS);[C,D].forEach(function(H){H.modules=H.modules||{},Object.keys(H.modules).forEach(function(q){H.modules[q]===!0&&(H.modules[q]={})})});var R=Object.keys(C.modules).concat(Object.keys(D.modules)),I=R.reduce(function(H,q){var w=z.import("modules/"+q);return w==null?P.error("Cannot load "+q+" module. Are you sure you registered it?"):H[q]=w.DEFAULTS||{},H},{});return D.modules!=null&&D.modules.toolbar&&D.modules.toolbar.constructor!==Object&&(D.modules.toolbar={container:D.modules.toolbar}),D=(0,N.default)(!0,{},z.DEFAULTS,{modules:I},C,D),["bounds","container","scrollingContainer"].forEach(function(H){typeof D[H]=="string"&&(D[H]=document.querySelector(D[H]))}),D.modules=Object.keys(D.modules).reduce(function(H,q){return D.modules[q]&&(H[q]=D.modules[q]),H},{}),D}function U(F,D,C,R){if(this.options.strict&&!this.isEnabled()&&D===l.default.sources.USER)return new y.default;var I=C==null?null:this.getSelection(),H=this.editor.delta,q=F();if(I!=null&&(C===!0&&(C=I.index),R==null?I=Q(I,q,D):R!==0&&(I=Q(I,C,R,D)),this.setSelection(I,l.default.sources.SILENT)),q.length()>0){var w,$=[l.default.events.TEXT_CHANGE,q,H,D];if((w=this.emitter).emit.apply(w,[l.default.events.EDITOR_CHANGE].concat($)),D!==l.default.sources.SILENT){var B;(B=this.emitter).emit.apply(B,$)}}return q}function G(F,D,C,R,I){var H={};return typeof F.index=="number"&&typeof F.length=="number"?typeof D!="number"?(I=R,R=C,C=D,D=F.length,F=F.index):(D=F.length,F=F.index):typeof D!="number"&&(I=R,R=C,C=D,D=0),(typeof C>"u"?"undefined":o(C))==="object"?(H=C,I=R):typeof C=="string"&&(R!=null?H[C]=R:I=C),I=I||l.default.sources.API,[F,D,H,I]}function Q(F,D,C,R){if(F==null)return null;var I=void 0,H=void 0;if(D instanceof y.default){var q=[F.index,F.index+F.length].map(function(V){return D.transformPosition(V,R!==l.default.sources.USER)}),w=c(q,2);I=w[0],H=w[1]}else{var $=[F.index,F.index+F.length].map(function(V){return V<D||V===D&&R===l.default.sources.USER?V:C>=0?V+C:Math.max(D,V+C)}),B=c($,2);I=B[0],H=B[1]}return new p.Range(I,H-I)}i.expandConfig=L,i.overload=G,i.default=z},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function b(f,p){for(var j=0;j<p.length;j++){var h=p[j];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,p,j){return p&&b(f.prototype,p),j&&b(f,j),f}}(),c=function b(f,p,j){f===null&&(f=Function.prototype);var h=Object.getOwnPropertyDescriptor(f,p);if(h===void 0){var N=Object.getPrototypeOf(f);return N===null?void 0:b(N,p,j)}else{if("value"in h)return h.value;var A=h.get;return A===void 0?void 0:A.call(j)}},m=a(7),v=u(m),y=a(0),x=u(y);function u(b){return b&&b.__esModule?b:{default:b}}function s(b,f){if(!(b instanceof f))throw new TypeError("Cannot call a class as a function")}function l(b,f){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:b}function g(b,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}var d=function(b){g(f,b);function f(){return s(this,f),l(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return o(f,[{key:"formatAt",value:function(j,h,N,A){if(f.compare(this.statics.blotName,N)<0&&x.default.query(N,x.default.Scope.BLOT)){var O=this.isolate(j,h);A&&O.wrap(N,A)}else c(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"formatAt",this).call(this,j,h,N,A)}},{key:"optimize",value:function(j){if(c(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"optimize",this).call(this,j),this.parent instanceof f&&f.compare(this.statics.blotName,this.parent.statics.blotName)>0){var h=this.parent.isolate(this.offset(),this.length());this.moveChildren(h),h.wrap(this)}}}],[{key:"compare",value:function(j,h){var N=f.order.indexOf(j),A=f.order.indexOf(h);return N>=0||A>=0?N-A:j===h?0:j<h?-1:1}}]),f}(x.default.Inline);d.allowedChildren=[d,x.default.Embed,v.default],d.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],i.default=d},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(0),c=m(o);function m(s){return s&&s.__esModule?s:{default:s}}function v(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function y(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function x(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var u=function(s){x(l,s);function l(){return v(this,l),y(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(c.default.Text);i.default=u},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function p(j,h){for(var N=0;N<h.length;N++){var A=h[N];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(j,A.key,A)}}return function(j,h,N){return h&&p(j.prototype,h),N&&p(j,N),j}}(),c=function p(j,h,N){j===null&&(j=Function.prototype);var A=Object.getOwnPropertyDescriptor(j,h);if(A===void 0){var O=Object.getPrototypeOf(j);return O===null?void 0:p(O,h,N)}else{if("value"in A)return A.value;var S=A.get;return S===void 0?void 0:S.call(N)}},m=a(54),v=u(m),y=a(10),x=u(y);function u(p){return p&&p.__esModule?p:{default:p}}function s(p,j){if(!(p instanceof j))throw new TypeError("Cannot call a class as a function")}function l(p,j){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:p}function g(p,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);p.prototype=Object.create(j&&j.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(p,j):p.__proto__=j)}var d=(0,x.default)("quill:events"),b=["selectionchange","mousedown","mouseup","click"];b.forEach(function(p){document.addEventListener(p,function(){for(var j=arguments.length,h=Array(j),N=0;N<j;N++)h[N]=arguments[N];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(A){if(A.__quill&&A.__quill.emitter){var O;(O=A.__quill.emitter).handleDOM.apply(O,h)}})})});var f=function(p){g(j,p);function j(){s(this,j);var h=l(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return h.listeners={},h.on("error",d.error),h}return o(j,[{key:"emit",value:function(){d.log.apply(d,arguments),c(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(N){for(var A=arguments.length,O=Array(A>1?A-1:0),S=1;S<A;S++)O[S-1]=arguments[S];(this.listeners[N.type]||[]).forEach(function(T){var k=T.node,_=T.handler;(N.target===k||k.contains(N.target))&&_.apply(void 0,[N].concat(O))})}},{key:"listenDOM",value:function(N,A,O){this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push({node:A,handler:O})}}]),j}(v.default);f.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},f.sources={API:"api",SILENT:"silent",USER:"user"},i.default=f},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});function o(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}var c=function m(v){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,m),this.quill=v,this.options=y};c.DEFAULTS={},i.default=c},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=["error","warn","log","info"],c="warn";function m(y){if(o.indexOf(y)<=o.indexOf(c)){for(var x,u=arguments.length,s=Array(u>1?u-1:0),l=1;l<u;l++)s[l-1]=arguments[l];(x=console)[y].apply(x,s)}}function v(y){return o.reduce(function(x,u){return x[u]=m.bind(console,u,y),x},{})}m.level=v.level=function(y){c=y},i.default=v},function(t,i,a){var o=Array.prototype.slice,c=a(52),m=a(53),v=t.exports=function(s,l,g){return g||(g={}),s===l?!0:s instanceof Date&&l instanceof Date?s.getTime()===l.getTime():!s||!l||typeof s!="object"&&typeof l!="object"?g.strict?s===l:s==l:u(s,l,g)};function y(s){return s==null}function x(s){return!(!s||typeof s!="object"||typeof s.length!="number"||typeof s.copy!="function"||typeof s.slice!="function"||s.length>0&&typeof s[0]!="number")}function u(s,l,g){var d,b;if(y(s)||y(l)||s.prototype!==l.prototype)return!1;if(m(s))return m(l)?(s=o.call(s),l=o.call(l),v(s,l,g)):!1;if(x(s)){if(!x(l)||s.length!==l.length)return!1;for(d=0;d<s.length;d++)if(s[d]!==l[d])return!1;return!0}try{var f=c(s),p=c(l)}catch{return!1}if(f.length!=p.length)return!1;for(f.sort(),p.sort(),d=f.length-1;d>=0;d--)if(f[d]!=p[d])return!1;for(d=f.length-1;d>=0;d--)if(b=f[d],!v(s[b],l[b],g))return!1;return typeof s==typeof l}},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(1),c=function(){function m(v,y,x){x===void 0&&(x={}),this.attrName=v,this.keyName=y;var u=o.Scope.TYPE&o.Scope.ATTRIBUTE;x.scope!=null?this.scope=x.scope&o.Scope.LEVEL|u:this.scope=o.Scope.ATTRIBUTE,x.whitelist!=null&&(this.whitelist=x.whitelist)}return m.keys=function(v){return[].map.call(v.attributes,function(y){return y.name})},m.prototype.add=function(v,y){return this.canAdd(v,y)?(v.setAttribute(this.keyName,y),!0):!1},m.prototype.canAdd=function(v,y){var x=o.query(v,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return x==null?!1:this.whitelist==null?!0:typeof y=="string"?this.whitelist.indexOf(y.replace(/["']/g,""))>-1:this.whitelist.indexOf(y)>-1},m.prototype.remove=function(v){v.removeAttribute(this.keyName)},m.prototype.value=function(v){var y=v.getAttribute(this.keyName);return this.canAdd(v,y)&&y?y:""},m}();i.default=c},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.Code=void 0;var o=function(){function S(T,k){var _=[],E=!0,P=!1,z=void 0;try{for(var L=T[Symbol.iterator](),U;!(E=(U=L.next()).done)&&(_.push(U.value),!(k&&_.length===k));E=!0);}catch(G){P=!0,z=G}finally{try{!E&&L.return&&L.return()}finally{if(P)throw z}}return _}return function(T,k){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return S(T,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function S(T,k){for(var _=0;_<k.length;_++){var E=k[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(T,E.key,E)}}return function(T,k,_){return k&&S(T.prototype,k),_&&S(T,_),T}}(),m=function S(T,k,_){T===null&&(T=Function.prototype);var E=Object.getOwnPropertyDescriptor(T,k);if(E===void 0){var P=Object.getPrototypeOf(T);return P===null?void 0:S(P,k,_)}else{if("value"in E)return E.value;var z=E.get;return z===void 0?void 0:z.call(_)}},v=a(2),y=p(v),x=a(0),u=p(x),s=a(4),l=p(s),g=a(6),d=p(g),b=a(7),f=p(b);function p(S){return S&&S.__esModule?S:{default:S}}function j(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}function h(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:S}function N(S,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);S.prototype=Object.create(T&&T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(S,T):S.__proto__=T)}var A=function(S){N(T,S);function T(){return j(this,T),h(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(d.default);A.blotName="code",A.tagName="CODE";var O=function(S){N(T,S);function T(){return j(this,T),h(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return c(T,[{key:"delta",value:function(){var _=this,E=this.domNode.textContent;return E.endsWith(`
`)&&(E=E.slice(0,-1)),E.split(`
`).reduce(function(P,z){return P.insert(z).insert(`
`,_.formats())},new y.default)}},{key:"format",value:function(_,E){if(!(_===this.statics.blotName&&E)){var P=this.descendant(f.default,this.length()-1),z=o(P,1),L=z[0];L!=null&&L.deleteAt(L.length()-1,1),m(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,_,E)}}},{key:"formatAt",value:function(_,E,P,z){if(E!==0&&!(u.default.query(P,u.default.Scope.BLOCK)==null||P===this.statics.blotName&&z===this.statics.formats(this.domNode))){var L=this.newlineIndex(_);if(!(L<0||L>=_+E)){var U=this.newlineIndex(_,!0)+1,G=L-U+1,Q=this.isolate(U,G),F=Q.next;Q.format(P,z),F instanceof T&&F.formatAt(0,_-U+E-G,P,z)}}}},{key:"insertAt",value:function(_,E,P){if(P==null){var z=this.descendant(f.default,_),L=o(z,2),U=L[0],G=L[1];U.insertAt(G,E)}}},{key:"length",value:function(){var _=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?_:_+1}},{key:"newlineIndex",value:function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return this.domNode.textContent.slice(0,_).lastIndexOf(`
`);var P=this.domNode.textContent.slice(_).indexOf(`
`);return P>-1?_+P:-1}},{key:"optimize",value:function(_){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),m(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,_);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===E.statics.formats(E.domNode)&&(E.optimize(_),E.moveChildren(this),E.remove())}},{key:"replace",value:function(_){m(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,_),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(E){var P=u.default.find(E);P==null?E.parentNode.removeChild(E):P instanceof u.default.Embed?P.remove():P.unwrap()})}}],[{key:"create",value:function(_){var E=m(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,_);return E.setAttribute("spellcheck",!1),E}},{key:"formats",value:function(){return!0}}]),T}(l.default);O.blotName="code-block",O.tagName="PRE",O.TAB="  ",i.Code=A,i.default=O},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},c=function(){function F(D,C){var R=[],I=!0,H=!1,q=void 0;try{for(var w=D[Symbol.iterator](),$;!(I=($=w.next()).done)&&(R.push($.value),!(C&&R.length===C));I=!0);}catch(B){H=!0,q=B}finally{try{!I&&w.return&&w.return()}finally{if(H)throw q}}return R}return function(D,C){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return F(D,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function F(D,C){for(var R=0;R<C.length;R++){var I=C[R];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(D,I.key,I)}}return function(D,C,R){return C&&F(D.prototype,C),R&&F(D,R),D}}(),v=a(2),y=E(v),x=a(20),u=E(x),s=a(0),l=E(s),g=a(13),d=E(g),b=a(24),f=E(b),p=a(4),j=E(p),h=a(16),N=E(h),A=a(21),O=E(A),S=a(11),T=E(S),k=a(3),_=E(k);function E(F){return F&&F.__esModule?F:{default:F}}function P(F,D,C){return D in F?Object.defineProperty(F,D,{value:C,enumerable:!0,configurable:!0,writable:!0}):F[D]=C,F}function z(F,D){if(!(F instanceof D))throw new TypeError("Cannot call a class as a function")}var L=/^[ -~]*$/,U=function(){function F(D){z(this,F),this.scroll=D,this.delta=this.getDelta()}return m(F,[{key:"applyDelta",value:function(C){var R=this,I=!1;this.scroll.update();var H=this.scroll.length();return this.scroll.batchStart(),C=Q(C),C.reduce(function(q,w){var $=w.retain||w.delete||w.insert.length||1,B=w.attributes||{};if(w.insert!=null){if(typeof w.insert=="string"){var V=w.insert;V.endsWith(`
`)&&I&&(I=!1,V=V.slice(0,-1)),q>=H&&!V.endsWith(`
`)&&(I=!0),R.scroll.insertAt(q,V);var W=R.scroll.line(q),X=c(W,2),ie=X[0],re=X[1],ce=(0,_.default)({},(0,p.bubbleFormats)(ie));if(ie instanceof j.default){var Y=ie.descendant(l.default.Leaf,re),le=c(Y,1),ue=le[0];ce=(0,_.default)(ce,(0,p.bubbleFormats)(ue))}B=u.default.attributes.diff(ce,B)||{}}else if(o(w.insert)==="object"){var Z=Object.keys(w.insert)[0];if(Z==null)return q;R.scroll.insertAt(q,Z,w.insert[Z])}H+=$}return Object.keys(B).forEach(function(K){R.scroll.formatAt(q,$,K,B[K])}),q+$},0),C.reduce(function(q,w){return typeof w.delete=="number"?(R.scroll.deleteAt(q,w.delete),q):q+(w.retain||w.insert.length||1)},0),this.scroll.batchEnd(),this.update(C)}},{key:"deleteText",value:function(C,R){return this.scroll.deleteAt(C,R),this.update(new y.default().retain(C).delete(R))}},{key:"formatLine",value:function(C,R){var I=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(H).forEach(function(q){if(!(I.scroll.whitelist!=null&&!I.scroll.whitelist[q])){var w=I.scroll.lines(C,Math.max(R,1)),$=R;w.forEach(function(B){var V=B.length();if(!(B instanceof d.default))B.format(q,H[q]);else{var W=C-B.offset(I.scroll),X=B.newlineIndex(W+$)-W+1;B.formatAt(W,X,q,H[q])}$-=V})}}),this.scroll.optimize(),this.update(new y.default().retain(C).retain(R,(0,O.default)(H)))}},{key:"formatText",value:function(C,R){var I=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(H).forEach(function(q){I.scroll.formatAt(C,R,q,H[q])}),this.update(new y.default().retain(C).retain(R,(0,O.default)(H)))}},{key:"getContents",value:function(C,R){return this.delta.slice(C,C+R)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(C,R){return C.concat(R.delta())},new y.default)}},{key:"getFormat",value:function(C){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=[],H=[];R===0?this.scroll.path(C).forEach(function(w){var $=c(w,1),B=$[0];B instanceof j.default?I.push(B):B instanceof l.default.Leaf&&H.push(B)}):(I=this.scroll.lines(C,R),H=this.scroll.descendants(l.default.Leaf,C,R));var q=[I,H].map(function(w){if(w.length===0)return{};for(var $=(0,p.bubbleFormats)(w.shift());Object.keys($).length>0;){var B=w.shift();if(B==null)return $;$=G((0,p.bubbleFormats)(B),$)}return $});return _.default.apply(_.default,q)}},{key:"getText",value:function(C,R){return this.getContents(C,R).filter(function(I){return typeof I.insert=="string"}).map(function(I){return I.insert}).join("")}},{key:"insertEmbed",value:function(C,R,I){return this.scroll.insertAt(C,R,I),this.update(new y.default().retain(C).insert(P({},R,I)))}},{key:"insertText",value:function(C,R){var I=this,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return R=R.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(C,R),Object.keys(H).forEach(function(q){I.scroll.formatAt(C,R.length,q,H[q])}),this.update(new y.default().retain(C).insert(R,(0,O.default)(H)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var C=this.scroll.children.head;return C.statics.blotName!==j.default.blotName||C.children.length>1?!1:C.children.head instanceof N.default}},{key:"removeFormat",value:function(C,R){var I=this.getText(C,R),H=this.scroll.line(C+R),q=c(H,2),w=q[0],$=q[1],B=0,V=new y.default;w!=null&&(w instanceof d.default?B=w.newlineIndex($)-$+1:B=w.length()-$,V=w.delta().slice($,$+B-1).insert(`
`));var W=this.getContents(C,R+B),X=W.diff(new y.default().insert(I).concat(V)),ie=new y.default().retain(C).concat(X);return this.applyDelta(ie)}},{key:"update",value:function(C){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,H=this.delta;if(R.length===1&&R[0].type==="characterData"&&R[0].target.data.match(L)&&l.default.find(R[0].target)){var q=l.default.find(R[0].target),w=(0,p.bubbleFormats)(q),$=q.offset(this.scroll),B=R[0].oldValue.replace(f.default.CONTENTS,""),V=new y.default().insert(B),W=new y.default().insert(q.value()),X=new y.default().retain($).concat(V.diff(W,I));C=X.reduce(function(ie,re){return re.insert?ie.insert(re.insert,w):ie.push(re)},new y.default),this.delta=H.compose(C)}else this.delta=this.getDelta(),(!C||!(0,T.default)(H.compose(C),this.delta))&&(C=H.diff(this.delta,I));return C}}]),F}();function G(F,D){return Object.keys(D).reduce(function(C,R){return F[R]==null||(D[R]===F[R]?C[R]=D[R]:Array.isArray(D[R])?D[R].indexOf(F[R])<0&&(C[R]=D[R].concat([F[R]])):C[R]=[D[R],F[R]]),C},{})}function Q(F){return F.reduce(function(D,C){if(C.insert===1){var R=(0,O.default)(C.attributes);return delete R.image,D.insert({image:C.attributes.image},R)}if(C.attributes!=null&&(C.attributes.list===!0||C.attributes.bullet===!0)&&(C=(0,O.default)(C),C.attributes.list?C.attributes.list="ordered":(C.attributes.list="bullet",delete C.attributes.bullet)),typeof C.insert=="string"){var I=C.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return D.insert(I,C.attributes)}return D.push(C)},new y.default)}i.default=U},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.Range=void 0;var o=function(){function S(T,k){var _=[],E=!0,P=!1,z=void 0;try{for(var L=T[Symbol.iterator](),U;!(E=(U=L.next()).done)&&(_.push(U.value),!(k&&_.length===k));E=!0);}catch(G){P=!0,z=G}finally{try{!E&&L.return&&L.return()}finally{if(P)throw z}}return _}return function(T,k){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return S(T,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function S(T,k){for(var _=0;_<k.length;_++){var E=k[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(T,E.key,E)}}return function(T,k,_){return k&&S(T.prototype,k),_&&S(T,_),T}}(),m=a(0),v=f(m),y=a(21),x=f(y),u=a(11),s=f(u),l=a(8),g=f(l),d=a(10),b=f(d);function f(S){return S&&S.__esModule?S:{default:S}}function p(S){if(Array.isArray(S)){for(var T=0,k=Array(S.length);T<S.length;T++)k[T]=S[T];return k}else return Array.from(S)}function j(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}var h=(0,b.default)("quill:selection"),N=function S(T){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,S),this.index=T,this.length=k},A=function(){function S(T,k){var _=this;j(this,S),this.emitter=k,this.scroll=T,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=v.default.create("cursor",this),this.lastRange=this.savedRange=new N(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){_.mouseDown||setTimeout(_.update.bind(_,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(E,P){E===g.default.events.TEXT_CHANGE&&P.length()>0&&_.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(_.hasFocus()){var E=_.getNativeRange();E!=null&&E.start.node!==_.cursor.textNode&&_.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{_.setNativeRange(E.start.node,E.start.offset,E.end.node,E.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(E,P){if(P.range){var z=P.range,L=z.startNode,U=z.startOffset,G=z.endNode,Q=z.endOffset;_.setNativeRange(L,U,G,Q)}}),this.update(g.default.sources.SILENT)}return c(S,[{key:"handleComposition",value:function(){var k=this;this.root.addEventListener("compositionstart",function(){k.composing=!0}),this.root.addEventListener("compositionend",function(){if(k.composing=!1,k.cursor.parent){var _=k.cursor.restore();if(!_)return;setTimeout(function(){k.setNativeRange(_.startNode,_.startOffset,_.endNode,_.endOffset)},1)}})}},{key:"handleDragging",value:function(){var k=this;this.emitter.listenDOM("mousedown",document.body,function(){k.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){k.mouseDown=!1,k.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(k,_){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[k])){this.scroll.update();var E=this.getNativeRange();if(!(E==null||!E.native.collapsed||v.default.query(k,v.default.Scope.BLOCK))){if(E.start.node!==this.cursor.textNode){var P=v.default.find(E.start.node,!1);if(P==null)return;if(P instanceof v.default.Leaf){var z=P.split(E.start.offset);P.parent.insertBefore(this.cursor,z)}else P.insertBefore(this.cursor,E.start.node);this.cursor.attach()}this.cursor.format(k,_),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(k){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=this.scroll.length();k=Math.min(k,E-1),_=Math.min(k+_,E-1)-k;var P=void 0,z=this.scroll.leaf(k),L=o(z,2),U=L[0],G=L[1];if(U==null)return null;var Q=U.position(G,!0),F=o(Q,2);P=F[0],G=F[1];var D=document.createRange();if(_>0){D.setStart(P,G);var C=this.scroll.leaf(k+_),R=o(C,2);if(U=R[0],G=R[1],U==null)return null;var I=U.position(G,!0),H=o(I,2);return P=H[0],G=H[1],D.setEnd(P,G),D.getBoundingClientRect()}else{var q="left",w=void 0;return P instanceof Text?(G<P.data.length?(D.setStart(P,G),D.setEnd(P,G+1)):(D.setStart(P,G-1),D.setEnd(P,G),q="right"),w=D.getBoundingClientRect()):(w=U.domNode.getBoundingClientRect(),G>0&&(q="right")),{bottom:w.top+w.height,height:w.height,left:w[q],right:w[q],top:w.top,width:0}}}},{key:"getNativeRange",value:function(){var k=document.getSelection();if(k==null||k.rangeCount<=0)return null;var _=k.getRangeAt(0);if(_==null)return null;var E=this.normalizeNative(_);return h.info("getNativeRange",E),E}},{key:"getRange",value:function(){var k=this.getNativeRange();if(k==null)return[null,null];var _=this.normalizedToRange(k);return[_,k]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(k){var _=this,E=[[k.start.node,k.start.offset]];k.native.collapsed||E.push([k.end.node,k.end.offset]);var P=E.map(function(U){var G=o(U,2),Q=G[0],F=G[1],D=v.default.find(Q,!0),C=D.offset(_.scroll);return F===0?C:D instanceof v.default.Container?C+D.length():C+D.index(Q,F)}),z=Math.min(Math.max.apply(Math,p(P)),this.scroll.length()-1),L=Math.min.apply(Math,[z].concat(p(P)));return new N(L,z-L)}},{key:"normalizeNative",value:function(k){if(!O(this.root,k.startContainer)||!k.collapsed&&!O(this.root,k.endContainer))return null;var _={start:{node:k.startContainer,offset:k.startOffset},end:{node:k.endContainer,offset:k.endOffset},native:k};return[_.start,_.end].forEach(function(E){for(var P=E.node,z=E.offset;!(P instanceof Text)&&P.childNodes.length>0;)if(P.childNodes.length>z)P=P.childNodes[z],z=0;else if(P.childNodes.length===z)P=P.lastChild,z=P instanceof Text?P.data.length:P.childNodes.length+1;else break;E.node=P,E.offset=z}),_}},{key:"rangeToNative",value:function(k){var _=this,E=k.collapsed?[k.index]:[k.index,k.index+k.length],P=[],z=this.scroll.length();return E.forEach(function(L,U){L=Math.min(z-1,L);var G=void 0,Q=_.scroll.leaf(L),F=o(Q,2),D=F[0],C=F[1],R=D.position(C,U!==0),I=o(R,2);G=I[0],C=I[1],P.push(G,C)}),P.length<2&&(P=P.concat(P)),P}},{key:"scrollIntoView",value:function(k){var _=this.lastRange;if(_!=null){var E=this.getBounds(_.index,_.length);if(E!=null){var P=this.scroll.length()-1,z=this.scroll.line(Math.min(_.index,P)),L=o(z,1),U=L[0],G=U;if(_.length>0){var Q=this.scroll.line(Math.min(_.index+_.length,P)),F=o(Q,1);G=F[0]}if(!(U==null||G==null)){var D=k.getBoundingClientRect();E.top<D.top?k.scrollTop-=D.top-E.top:E.bottom>D.bottom&&(k.scrollTop+=E.bottom-D.bottom)}}}}},{key:"setNativeRange",value:function(k,_){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_,z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(h.info("setNativeRange",k,_,E,P),!(k!=null&&(this.root.parentNode==null||k.parentNode==null||E.parentNode==null))){var L=document.getSelection();if(L!=null)if(k!=null){this.hasFocus()||this.root.focus();var U=(this.getNativeRange()||{}).native;if(U==null||z||k!==U.startContainer||_!==U.startOffset||E!==U.endContainer||P!==U.endOffset){k.tagName=="BR"&&(_=[].indexOf.call(k.parentNode.childNodes,k),k=k.parentNode),E.tagName=="BR"&&(P=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode);var G=document.createRange();G.setStart(k,_),G.setEnd(E,P),L.removeAllRanges(),L.addRange(G)}}else L.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(k){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof _=="string"&&(E=_,_=!1),h.info("setRange",k),k!=null){var P=this.rangeToNative(k);this.setNativeRange.apply(this,p(P).concat([_]))}else this.setNativeRange(null);this.update(E)}},{key:"update",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,_=this.lastRange,E=this.getRange(),P=o(E,2),z=P[0],L=P[1];if(this.lastRange=z,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,s.default)(_,this.lastRange)){var U;!this.composing&&L!=null&&L.native.collapsed&&L.start.node!==this.cursor.textNode&&this.cursor.restore();var G=[g.default.events.SELECTION_CHANGE,(0,x.default)(this.lastRange),(0,x.default)(_),k];if((U=this.emitter).emit.apply(U,[g.default.events.EDITOR_CHANGE].concat(G)),k!==g.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,G)}}}}]),S}();function O(S,T){try{T.parentNode}catch{return!1}return T instanceof Text&&(T=T.parentNode),S.contains(T)}i.Range=N,i.default=A},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(d,b){for(var f=0;f<b.length;f++){var p=b[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,b,f){return b&&g(d.prototype,b),f&&g(d,f),d}}(),c=function g(d,b,f){d===null&&(d=Function.prototype);var p=Object.getOwnPropertyDescriptor(d,b);if(p===void 0){var j=Object.getPrototypeOf(d);return j===null?void 0:g(j,b,f)}else{if("value"in p)return p.value;var h=p.get;return h===void 0?void 0:h.call(f)}},m=a(0),v=y(m);function y(g){return g&&g.__esModule?g:{default:g}}function x(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function u(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function s(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var l=function(g){s(d,g);function d(){return x(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return o(d,[{key:"insertInto",value:function(f,p){f.children.length===0?c(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"insertInto",this).call(this,f,p):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),d}(v.default.Embed);l.blotName="break",l.tagName="BR",i.default=l},function(t,i,a){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var g in l)l.hasOwnProperty(g)&&(s[g]=l[g])};return function(s,l){u(s,l);function g(){this.constructor=s}s.prototype=l===null?Object.create(l):(g.prototype=l.prototype,new g)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(44),m=a(30),v=a(1),y=function(u){o(s,u);function s(l){var g=u.call(this,l)||this;return g.build(),g}return s.prototype.appendChild=function(l){this.insertBefore(l)},s.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(l){l.attach()})},s.prototype.build=function(){var l=this;this.children=new c.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var d=x(g);l.insertBefore(d,l.children.head||void 0)}catch(b){if(b instanceof v.ParchmentError)return;throw b}})},s.prototype.deleteAt=function(l,g){if(l===0&&g===this.length())return this.remove();this.children.forEachAt(l,g,function(d,b,f){d.deleteAt(b,f)})},s.prototype.descendant=function(l,g){var d=this.children.find(g),b=d[0],f=d[1];return l.blotName==null&&l(b)||l.blotName!=null&&b instanceof l?[b,f]:b instanceof s?b.descendant(l,f):[null,-1]},s.prototype.descendants=function(l,g,d){g===void 0&&(g=0),d===void 0&&(d=Number.MAX_VALUE);var b=[],f=d;return this.children.forEachAt(g,d,function(p,j,h){(l.blotName==null&&l(p)||l.blotName!=null&&p instanceof l)&&b.push(p),p instanceof s&&(b=b.concat(p.descendants(l,j,f))),f-=h}),b},s.prototype.detach=function(){this.children.forEach(function(l){l.detach()}),u.prototype.detach.call(this)},s.prototype.formatAt=function(l,g,d,b){this.children.forEachAt(l,g,function(f,p,j){f.formatAt(p,j,d,b)})},s.prototype.insertAt=function(l,g,d){var b=this.children.find(l),f=b[0],p=b[1];if(f)f.insertAt(p,g,d);else{var j=d==null?v.create("text",g):v.create(g,d);this.appendChild(j)}},s.prototype.insertBefore=function(l,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(d){return l instanceof d}))throw new v.ParchmentError("Cannot insert "+l.statics.blotName+" into "+this.statics.blotName);l.insertInto(this,g)},s.prototype.length=function(){return this.children.reduce(function(l,g){return l+g.length()},0)},s.prototype.moveChildren=function(l,g){this.children.forEach(function(d){l.insertBefore(d,g)})},s.prototype.optimize=function(l){if(u.prototype.optimize.call(this,l),this.children.length===0)if(this.statics.defaultChild!=null){var g=v.create(this.statics.defaultChild);this.appendChild(g),g.optimize(l)}else this.remove()},s.prototype.path=function(l,g){g===void 0&&(g=!1);var d=this.children.find(l,g),b=d[0],f=d[1],p=[[this,l]];return b instanceof s?p.concat(b.path(f,g)):(b!=null&&p.push([b,f]),p)},s.prototype.removeChild=function(l){this.children.remove(l)},s.prototype.replace=function(l){l instanceof s&&l.moveChildren(this),u.prototype.replace.call(this,l)},s.prototype.split=function(l,g){if(g===void 0&&(g=!1),!g){if(l===0)return this;if(l===this.length())return this.next}var d=this.clone();return this.parent.insertBefore(d,this.next),this.children.forEachAt(l,this.length(),function(b,f,p){b=b.split(f,g),d.appendChild(b)}),d},s.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},s.prototype.update=function(l,g){var d=this,b=[],f=[];l.forEach(function(p){p.target===d.domNode&&p.type==="childList"&&(b.push.apply(b,p.addedNodes),f.push.apply(f,p.removedNodes))}),f.forEach(function(p){if(!(p.parentNode!=null&&p.tagName!=="IFRAME"&&document.body.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=v.find(p);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===d.domNode)&&j.detach()}}),b.filter(function(p){return p.parentNode==d.domNode}).sort(function(p,j){return p===j?0:p.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(p){var j=null;p.nextSibling!=null&&(j=v.find(p.nextSibling));var h=x(p);(h.next!=j||h.next==null)&&(h.parent!=null&&h.parent.removeChild(d),d.insertBefore(h,j||void 0))})},s}(m.default);function x(u){var s=v.find(u);if(s==null)try{s=v.create(u)}catch{s=v.create(v.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(g){s.domNode.appendChild(g)}),u.parentNode&&u.parentNode.replaceChild(s.domNode,u),s.attach()}return s}i.default=y},function(t,i,a){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var g in l)l.hasOwnProperty(g)&&(s[g]=l[g])};return function(s,l){u(s,l);function g(){this.constructor=s}s.prototype=l===null?Object.create(l):(g.prototype=l.prototype,new g)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(12),m=a(31),v=a(17),y=a(1),x=function(u){o(s,u);function s(l){var g=u.call(this,l)||this;return g.attributes=new m.default(g.domNode),g}return s.formats=function(l){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return l.tagName.toLowerCase()},s.prototype.format=function(l,g){var d=y.query(l);d instanceof c.default?this.attributes.attribute(d,g):g&&d!=null&&(l!==this.statics.blotName||this.formats()[l]!==g)&&this.replaceWith(l,g)},s.prototype.formats=function(){var l=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(l[this.statics.blotName]=g),l},s.prototype.replaceWith=function(l,g){var d=u.prototype.replaceWith.call(this,l,g);return this.attributes.copy(d),d},s.prototype.update=function(l,g){var d=this;u.prototype.update.call(this,l,g),l.some(function(b){return b.target===d.domNode&&b.type==="attributes"})&&this.attributes.build()},s.prototype.wrap=function(l,g){var d=u.prototype.wrap.call(this,l,g);return d instanceof s&&d.statics.scope===this.statics.scope&&this.attributes.move(d),d},s}(v.default);i.default=x},function(t,i,a){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,u){x.__proto__=u}||function(x,u){for(var s in u)u.hasOwnProperty(s)&&(x[s]=u[s])};return function(x,u){y(x,u);function s(){this.constructor=x}x.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(30),m=a(1),v=function(y){o(x,y);function x(){return y!==null&&y.apply(this,arguments)||this}return x.value=function(u){return!0},x.prototype.index=function(u,s){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(s,1):-1},x.prototype.position=function(u,s){var l=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(l+=1),[this.parent.domNode,l]},x.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},x.scope=m.Scope.INLINE_BLOT,x}(c.default);i.default=v},function(t,i,a){var o=a(11),c=a(3),m={attributes:{compose:function(y,x,u){typeof y!="object"&&(y={}),typeof x!="object"&&(x={});var s=c(!0,{},x);u||(s=Object.keys(s).reduce(function(g,d){return s[d]!=null&&(g[d]=s[d]),g},{}));for(var l in y)y[l]!==void 0&&x[l]===void 0&&(s[l]=y[l]);return Object.keys(s).length>0?s:void 0},diff:function(y,x){typeof y!="object"&&(y={}),typeof x!="object"&&(x={});var u=Object.keys(y).concat(Object.keys(x)).reduce(function(s,l){return o(y[l],x[l])||(s[l]=x[l]===void 0?null:x[l]),s},{});return Object.keys(u).length>0?u:void 0},transform:function(y,x,u){if(typeof y!="object")return x;if(typeof x=="object"){if(!u)return x;var s=Object.keys(x).reduce(function(l,g){return y[g]===void 0&&(l[g]=x[g]),l},{});return Object.keys(s).length>0?s:void 0}}},iterator:function(y){return new v(y)},length:function(y){return typeof y.delete=="number"?y.delete:typeof y.retain=="number"?y.retain:typeof y.insert=="string"?y.insert.length:1}};function v(y){this.ops=y,this.index=0,this.offset=0}v.prototype.hasNext=function(){return this.peekLength()<1/0},v.prototype.next=function(y){y||(y=1/0);var x=this.ops[this.index];if(x){var u=this.offset,s=m.length(x);if(y>=s-u?(y=s-u,this.index+=1,this.offset=0):this.offset+=y,typeof x.delete=="number")return{delete:y};var l={};return x.attributes&&(l.attributes=x.attributes),typeof x.retain=="number"?l.retain=y:typeof x.insert=="string"?l.insert=x.insert.substr(u,y):l.insert=x.insert,l}else return{retain:1/0}},v.prototype.peek=function(){return this.ops[this.index]},v.prototype.peekLength=function(){return this.ops[this.index]?m.length(this.ops[this.index])-this.offset:1/0},v.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},v.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var y=this.offset,x=this.index,u=this.next(),s=this.ops.slice(this.index);return this.offset=y,this.index=x,[u].concat(s)}else return[]},t.exports=m},function(t,i){var a=function(){function o(d,b){return b!=null&&d instanceof b}var c;try{c=Map}catch{c=function(){}}var m;try{m=Set}catch{m=function(){}}var v;try{v=Promise}catch{v=function(){}}function y(d,b,f,p,j){typeof b=="object"&&(f=b.depth,p=b.prototype,j=b.includeNonEnumerable,b=b.circular);var h=[],N=[],A=typeof Buffer<"u";typeof b>"u"&&(b=!0),typeof f>"u"&&(f=1/0);function O(S,T){if(S===null)return null;if(T===0)return S;var k,_;if(typeof S!="object")return S;if(o(S,c))k=new c;else if(o(S,m))k=new m;else if(o(S,v))k=new v(function(D,C){S.then(function(R){D(O(R,T-1))},function(R){C(O(R,T-1))})});else if(y.__isArray(S))k=[];else if(y.__isRegExp(S))k=new RegExp(S.source,g(S)),S.lastIndex&&(k.lastIndex=S.lastIndex);else if(y.__isDate(S))k=new Date(S.getTime());else{if(A&&Buffer.isBuffer(S))return Buffer.allocUnsafe?k=Buffer.allocUnsafe(S.length):k=new Buffer(S.length),S.copy(k),k;o(S,Error)?k=Object.create(S):typeof p>"u"?(_=Object.getPrototypeOf(S),k=Object.create(_)):(k=Object.create(p),_=p)}if(b){var E=h.indexOf(S);if(E!=-1)return N[E];h.push(S),N.push(k)}o(S,c)&&S.forEach(function(D,C){var R=O(C,T-1),I=O(D,T-1);k.set(R,I)}),o(S,m)&&S.forEach(function(D){var C=O(D,T-1);k.add(C)});for(var P in S){var z;_&&(z=Object.getOwnPropertyDescriptor(_,P)),!(z&&z.set==null)&&(k[P]=O(S[P],T-1))}if(Object.getOwnPropertySymbols)for(var L=Object.getOwnPropertySymbols(S),P=0;P<L.length;P++){var U=L[P],G=Object.getOwnPropertyDescriptor(S,U);G&&!G.enumerable&&!j||(k[U]=O(S[U],T-1),G.enumerable||Object.defineProperty(k,U,{enumerable:!1}))}if(j)for(var Q=Object.getOwnPropertyNames(S),P=0;P<Q.length;P++){var F=Q[P],G=Object.getOwnPropertyDescriptor(S,F);G&&G.enumerable||(k[F]=O(S[F],T-1),Object.defineProperty(k,F,{enumerable:!1}))}return k}return O(d,f)}y.clonePrototype=function(b){if(b===null)return null;var f=function(){};return f.prototype=b,new f};function x(d){return Object.prototype.toString.call(d)}y.__objToStr=x;function u(d){return typeof d=="object"&&x(d)==="[object Date]"}y.__isDate=u;function s(d){return typeof d=="object"&&x(d)==="[object Array]"}y.__isArray=s;function l(d){return typeof d=="object"&&x(d)==="[object RegExp]"}y.__isRegExp=l;function g(d){var b="";return d.global&&(b+="g"),d.ignoreCase&&(b+="i"),d.multiline&&(b+="m"),b}return y.__getRegExpFlags=g,y}();typeof t=="object"&&t.exports&&(t.exports=a)},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function k(_,E){var P=[],z=!0,L=!1,U=void 0;try{for(var G=_[Symbol.iterator](),Q;!(z=(Q=G.next()).done)&&(P.push(Q.value),!(E&&P.length===E));z=!0);}catch(F){L=!0,U=F}finally{try{!z&&G.return&&G.return()}finally{if(L)throw U}}return P}return function(_,E){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return k(_,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function k(_,E){for(var P=0;P<E.length;P++){var z=E[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(_,z.key,z)}}return function(_,E,P){return E&&k(_.prototype,E),P&&k(_,P),_}}(),m=function k(_,E,P){_===null&&(_=Function.prototype);var z=Object.getOwnPropertyDescriptor(_,E);if(z===void 0){var L=Object.getPrototypeOf(_);return L===null?void 0:k(L,E,P)}else{if("value"in z)return z.value;var U=z.get;return U===void 0?void 0:U.call(P)}},v=a(0),y=h(v),x=a(8),u=h(x),s=a(4),l=h(s),g=a(16),d=h(g),b=a(13),f=h(b),p=a(25),j=h(p);function h(k){return k&&k.__esModule?k:{default:k}}function N(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")}function A(k,_){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:k}function O(k,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);k.prototype=Object.create(_&&_.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(k,_):k.__proto__=_)}function S(k){return k instanceof l.default||k instanceof s.BlockEmbed}var T=function(k){O(_,k);function _(E,P){N(this,_);var z=A(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E));return z.emitter=P.emitter,Array.isArray(P.whitelist)&&(z.whitelist=P.whitelist.reduce(function(L,U){return L[U]=!0,L},{})),z.domNode.addEventListener("DOMNodeInserted",function(){}),z.optimize(),z.enable(),z}return c(_,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(P,z){var L=this.line(P),U=o(L,2),G=U[0],Q=U[1],F=this.line(P+z),D=o(F,1),C=D[0];if(m(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"deleteAt",this).call(this,P,z),C!=null&&G!==C&&Q>0){if(G instanceof s.BlockEmbed||C instanceof s.BlockEmbed){this.optimize();return}if(G instanceof f.default){var R=G.newlineIndex(G.length(),!0);if(R>-1&&(G=G.split(R+1),G===C)){this.optimize();return}}else if(C instanceof f.default){var I=C.newlineIndex(0);I>-1&&C.split(I+1)}var H=C.children.head instanceof d.default?null:C.children.head;G.moveChildren(C,H),G.remove()}this.optimize()}},{key:"enable",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",P)}},{key:"formatAt",value:function(P,z,L,U){this.whitelist!=null&&!this.whitelist[L]||(m(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,P,z,L,U),this.optimize())}},{key:"insertAt",value:function(P,z,L){if(!(L!=null&&this.whitelist!=null&&!this.whitelist[z])){if(P>=this.length())if(L==null||y.default.query(z,y.default.Scope.BLOCK)==null){var U=y.default.create(this.statics.defaultChild);this.appendChild(U),L==null&&z.endsWith(`
`)&&(z=z.slice(0,-1)),U.insertAt(0,z,L)}else{var G=y.default.create(z,L);this.appendChild(G)}else m(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,P,z,L);this.optimize()}}},{key:"insertBefore",value:function(P,z){if(P.statics.scope===y.default.Scope.INLINE_BLOT){var L=y.default.create(this.statics.defaultChild);L.appendChild(P),P=L}m(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertBefore",this).call(this,P,z)}},{key:"leaf",value:function(P){return this.path(P).pop()||[null,-1]}},{key:"line",value:function(P){return P===this.length()?this.line(P-1):this.descendant(S,P)}},{key:"lines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,L=function U(G,Q,F){var D=[],C=F;return G.children.forEachAt(Q,F,function(R,I,H){S(R)?D.push(R):R instanceof y.default.Container&&(D=D.concat(U(R,I,C))),C-=H}),D};return L(this,P,z)}},{key:"optimize",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(m(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,P,z),P.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,P,z))}},{key:"path",value:function(P){return m(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"path",this).call(this,P).slice(1)}},{key:"update",value:function(P){if(this.batch!==!0){var z=u.default.sources.USER;typeof P=="string"&&(z=P),Array.isArray(P)||(P=this.observer.takeRecords()),P.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,z,P),m(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"update",this).call(this,P.concat([])),P.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,z,P)}}}]),_}(y.default.Scroll);T.blotName="scroll",T.className="ql-editor",T.tagName="DIV",T.defaultChild="block",T.allowedChildren=[l.default,s.BlockEmbed,j.default],i.default=T},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.SHORTKEY=i.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},c=function(){function w($,B){var V=[],W=!0,X=!1,ie=void 0;try{for(var re=$[Symbol.iterator](),ce;!(W=(ce=re.next()).done)&&(V.push(ce.value),!(B&&V.length===B));W=!0);}catch(Y){X=!0,ie=Y}finally{try{!W&&re.return&&re.return()}finally{if(X)throw ie}}return V}return function($,B){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return w($,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function w($,B){for(var V=0;V<B.length;V++){var W=B[V];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty($,W.key,W)}}return function($,B,V){return B&&w($.prototype,B),V&&w($,V),$}}(),v=a(21),y=k(v),x=a(11),u=k(x),s=a(3),l=k(s),g=a(2),d=k(g),b=a(20),f=k(b),p=a(0),j=k(p),h=a(5),N=k(h),A=a(10),O=k(A),S=a(9),T=k(S);function k(w){return w&&w.__esModule?w:{default:w}}function _(w,$,B){return $ in w?Object.defineProperty(w,$,{value:B,enumerable:!0,configurable:!0,writable:!0}):w[$]=B,w}function E(w,$){if(!(w instanceof $))throw new TypeError("Cannot call a class as a function")}function P(w,$){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:w}function z(w,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);w.prototype=Object.create($&&$.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(w,$):w.__proto__=$)}var L=(0,O.default)("quill:keyboard"),U=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",G=function(w){z($,w),m($,null,[{key:"match",value:function(V,W){return W=q(W),["altKey","ctrlKey","metaKey","shiftKey"].some(function(X){return!!W[X]!==V[X]&&W[X]!==null})?!1:W.key===(V.which||V.keyCode)}}]);function $(B,V){E(this,$);var W=P(this,($.__proto__||Object.getPrototypeOf($)).call(this,B,V));return W.bindings={},Object.keys(W.options.bindings).forEach(function(X){X==="list autofill"&&B.scroll.whitelist!=null&&!B.scroll.whitelist.list||W.options.bindings[X]&&W.addBinding(W.options.bindings[X])}),W.addBinding({key:$.keys.ENTER,shiftKey:null},R),W.addBinding({key:$.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(W.addBinding({key:$.keys.BACKSPACE},{collapsed:!0},F),W.addBinding({key:$.keys.DELETE},{collapsed:!0},D)):(W.addBinding({key:$.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},F),W.addBinding({key:$.keys.DELETE},{collapsed:!0,suffix:/^.?$/},D)),W.addBinding({key:$.keys.BACKSPACE},{collapsed:!1},C),W.addBinding({key:$.keys.DELETE},{collapsed:!1},C),W.addBinding({key:$.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},F),W.listen(),W}return m($,[{key:"addBinding",value:function(V){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ie=q(V);if(ie==null||ie.key==null)return L.warn("Attempted to add invalid keyboard binding",ie);typeof W=="function"&&(W={handler:W}),typeof X=="function"&&(X={handler:X}),ie=(0,l.default)(ie,W,X),this.bindings[ie.key]=this.bindings[ie.key]||[],this.bindings[ie.key].push(ie)}},{key:"listen",value:function(){var V=this;this.quill.root.addEventListener("keydown",function(W){if(!W.defaultPrevented){var X=W.which||W.keyCode,ie=(V.bindings[X]||[]).filter(function(Se){return $.match(W,Se)});if(ie.length!==0){var re=V.quill.getSelection();if(!(re==null||!V.quill.hasFocus())){var ce=V.quill.getLine(re.index),Y=c(ce,2),le=Y[0],ue=Y[1],Z=V.quill.getLeaf(re.index),K=c(Z,2),ae=K[0],oe=K[1],J=re.length===0?[ae,oe]:V.quill.getLeaf(re.index+re.length),ne=c(J,2),de=ne[0],pe=ne[1],Pe=ae instanceof j.default.Text?ae.value().slice(0,oe):"",qe=de instanceof j.default.Text?de.value().slice(pe):"",fe={collapsed:re.length===0,empty:re.length===0&&le.length()<=1,format:V.quill.getFormat(re),offset:ue,prefix:Pe,suffix:qe},ct=ie.some(function(Se){if(Se.collapsed!=null&&Se.collapsed!==fe.collapsed||Se.empty!=null&&Se.empty!==fe.empty||Se.offset!=null&&Se.offset!==fe.offset)return!1;if(Array.isArray(Se.format)){if(Se.format.every(function(We){return fe.format[We]==null}))return!1}else if(o(Se.format)==="object"&&!Object.keys(Se.format).every(function(We){return Se.format[We]===!0?fe.format[We]!=null:Se.format[We]===!1?fe.format[We]==null:(0,u.default)(Se.format[We],fe.format[We])}))return!1;return Se.prefix!=null&&!Se.prefix.test(fe.prefix)||Se.suffix!=null&&!Se.suffix.test(fe.suffix)?!1:Se.handler.call(V,re,fe)!==!0});ct&&W.preventDefault()}}}})}}]),$}(T.default);G.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},G.DEFAULTS={bindings:{bold:H("bold"),italic:H("italic"),underline:H("underline"),indent:{key:G.keys.TAB,format:["blockquote","indent","list"],handler:function($,B){if(B.collapsed&&B.offset!==0)return!0;this.quill.format("indent","+1",N.default.sources.USER)}},outdent:{key:G.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function($,B){if(B.collapsed&&B.offset!==0)return!0;this.quill.format("indent","-1",N.default.sources.USER)}},"outdent backspace":{key:G.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function($,B){B.format.indent!=null?this.quill.format("indent","-1",N.default.sources.USER):B.format.list!=null&&this.quill.format("list",!1,N.default.sources.USER)}},"indent code-block":I(!0),"outdent code-block":I(!1),"remove tab":{key:G.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function($){this.quill.deleteText($.index-1,1,N.default.sources.USER)}},tab:{key:G.keys.TAB,handler:function($){this.quill.history.cutoff();var B=new d.default().retain($.index).delete($.length).insert("	");this.quill.updateContents(B,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index+1,N.default.sources.SILENT)}},"list empty enter":{key:G.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function($,B){this.quill.format("list",!1,N.default.sources.USER),B.format.indent&&this.quill.format("indent",!1,N.default.sources.USER)}},"checklist enter":{key:G.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function($){var B=this.quill.getLine($.index),V=c(B,2),W=V[0],X=V[1],ie=(0,l.default)({},W.formats(),{list:"checked"}),re=new d.default().retain($.index).insert(`
`,ie).retain(W.length()-X-1).retain(1,{list:"unchecked"});this.quill.updateContents(re,N.default.sources.USER),this.quill.setSelection($.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:G.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function($,B){var V=this.quill.getLine($.index),W=c(V,2),X=W[0],ie=W[1],re=new d.default().retain($.index).insert(`
`,B.format).retain(X.length()-ie-1).retain(1,{header:null});this.quill.updateContents(re,N.default.sources.USER),this.quill.setSelection($.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function($,B){var V=B.prefix.length,W=this.quill.getLine($.index),X=c(W,2),ie=X[0],re=X[1];if(re>V)return!0;var ce=void 0;switch(B.prefix.trim()){case"[]":case"[ ]":ce="unchecked";break;case"[x]":ce="checked";break;case"-":case"*":ce="bullet";break;default:ce="ordered"}this.quill.insertText($.index," ",N.default.sources.USER),this.quill.history.cutoff();var Y=new d.default().retain($.index-re).delete(V+1).retain(ie.length()-2-re).retain(1,{list:ce});this.quill.updateContents(Y,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection($.index-V,N.default.sources.SILENT)}},"code exit":{key:G.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function($){var B=this.quill.getLine($.index),V=c(B,2),W=V[0],X=V[1],ie=new d.default().retain($.index+W.length()-X-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ie,N.default.sources.USER)}},"embed left":Q(G.keys.LEFT,!1),"embed left shift":Q(G.keys.LEFT,!0),"embed right":Q(G.keys.RIGHT,!1),"embed right shift":Q(G.keys.RIGHT,!0)}};function Q(w,$){var B,V=w===G.keys.LEFT?"prefix":"suffix";return B={key:w,shiftKey:$,altKey:null},_(B,V,/^$/),_(B,"handler",function(X){var ie=X.index;w===G.keys.RIGHT&&(ie+=X.length+1);var re=this.quill.getLeaf(ie),ce=c(re,1),Y=ce[0];return Y instanceof j.default.Embed?(w===G.keys.LEFT?$?this.quill.setSelection(X.index-1,X.length+1,N.default.sources.USER):this.quill.setSelection(X.index-1,N.default.sources.USER):$?this.quill.setSelection(X.index,X.length+1,N.default.sources.USER):this.quill.setSelection(X.index+X.length+1,N.default.sources.USER),!1):!0}),B}function F(w,$){if(!(w.index===0||this.quill.getLength()<=1)){var B=this.quill.getLine(w.index),V=c(B,1),W=V[0],X={};if($.offset===0){var ie=this.quill.getLine(w.index-1),re=c(ie,1),ce=re[0];if(ce!=null&&ce.length()>1){var Y=W.formats(),le=this.quill.getFormat(w.index-1,1);X=f.default.attributes.diff(Y,le)||{}}}var ue=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test($.prefix)?2:1;this.quill.deleteText(w.index-ue,ue,N.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(w.index-ue,ue,X,N.default.sources.USER),this.quill.focus()}}function D(w,$){var B=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test($.suffix)?2:1;if(!(w.index>=this.quill.getLength()-B)){var V={},W=0,X=this.quill.getLine(w.index),ie=c(X,1),re=ie[0];if($.offset>=re.length()-1){var ce=this.quill.getLine(w.index+1),Y=c(ce,1),le=Y[0];if(le){var ue=re.formats(),Z=this.quill.getFormat(w.index,1);V=f.default.attributes.diff(ue,Z)||{},W=le.length()}}this.quill.deleteText(w.index,B,N.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(w.index+W-1,B,V,N.default.sources.USER)}}function C(w){var $=this.quill.getLines(w),B={};if($.length>1){var V=$[0].formats(),W=$[$.length-1].formats();B=f.default.attributes.diff(W,V)||{}}this.quill.deleteText(w,N.default.sources.USER),Object.keys(B).length>0&&this.quill.formatLine(w.index,1,B,N.default.sources.USER),this.quill.setSelection(w.index,N.default.sources.SILENT),this.quill.focus()}function R(w,$){var B=this;w.length>0&&this.quill.scroll.deleteAt(w.index,w.length);var V=Object.keys($.format).reduce(function(W,X){return j.default.query(X,j.default.Scope.BLOCK)&&!Array.isArray($.format[X])&&(W[X]=$.format[X]),W},{});this.quill.insertText(w.index,`
`,V,N.default.sources.USER),this.quill.setSelection(w.index+1,N.default.sources.SILENT),this.quill.focus(),Object.keys($.format).forEach(function(W){V[W]==null&&(Array.isArray($.format[W])||W!=="link"&&B.quill.format(W,$.format[W],N.default.sources.USER))})}function I(w){return{key:G.keys.TAB,shiftKey:!w,format:{"code-block":!0},handler:function(B){var V=j.default.query("code-block"),W=B.index,X=B.length,ie=this.quill.scroll.descendant(V,W),re=c(ie,2),ce=re[0],Y=re[1];if(ce!=null){var le=this.quill.getIndex(ce),ue=ce.newlineIndex(Y,!0)+1,Z=ce.newlineIndex(le+Y+X),K=ce.domNode.textContent.slice(ue,Z).split(`
`);Y=0,K.forEach(function(ae,oe){w?(ce.insertAt(ue+Y,V.TAB),Y+=V.TAB.length,oe===0?W+=V.TAB.length:X+=V.TAB.length):ae.startsWith(V.TAB)&&(ce.deleteAt(ue+Y,V.TAB.length),Y-=V.TAB.length,oe===0?W-=V.TAB.length:X-=V.TAB.length),Y+=ae.length+1}),this.quill.update(N.default.sources.USER),this.quill.setSelection(W,X,N.default.sources.SILENT)}}}}function H(w){return{key:w[0].toUpperCase(),shortKey:!0,handler:function(B,V){this.quill.format(w,!V.format[w],N.default.sources.USER)}}}function q(w){if(typeof w=="string"||typeof w=="number")return q({key:w});if((typeof w>"u"?"undefined":o(w))==="object"&&(w=(0,y.default)(w,!1)),typeof w.key=="string")if(G.keys[w.key.toUpperCase()]!=null)w.key=G.keys[w.key.toUpperCase()];else if(w.key.length===1)w.key=w.key.toUpperCase().charCodeAt(0);else return null;return w.shortKey&&(w[U]=w.shortKey,delete w.shortKey),w}i.default=G,i.SHORTKEY=U},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function f(p,j){var h=[],N=!0,A=!1,O=void 0;try{for(var S=p[Symbol.iterator](),T;!(N=(T=S.next()).done)&&(h.push(T.value),!(j&&h.length===j));N=!0);}catch(k){A=!0,O=k}finally{try{!N&&S.return&&S.return()}finally{if(A)throw O}}return h}return function(p,j){if(Array.isArray(p))return p;if(Symbol.iterator in Object(p))return f(p,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function f(p,j,h){p===null&&(p=Function.prototype);var N=Object.getOwnPropertyDescriptor(p,j);if(N===void 0){var A=Object.getPrototypeOf(p);return A===null?void 0:f(A,j,h)}else{if("value"in N)return N.value;var O=N.get;return O===void 0?void 0:O.call(h)}},m=function(){function f(p,j){for(var h=0;h<j.length;h++){var N=j[h];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(p,N.key,N)}}return function(p,j,h){return j&&f(p.prototype,j),h&&f(p,h),p}}(),v=a(0),y=s(v),x=a(7),u=s(x);function s(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function g(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var b=function(f){d(p,f),m(p,null,[{key:"value",value:function(){}}]);function p(j,h){l(this,p);var N=g(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,j));return N.selection=h,N.textNode=document.createTextNode(p.CONTENTS),N.domNode.appendChild(N.textNode),N._length=0,N}return m(p,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(h,N){if(this._length!==0)return c(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"format",this).call(this,h,N);for(var A=this,O=0;A!=null&&A.statics.scope!==y.default.Scope.BLOCK_BLOT;)O+=A.offset(A.parent),A=A.parent;A!=null&&(this._length=p.CONTENTS.length,A.optimize(),A.formatAt(O,p.CONTENTS.length,h,N),this._length=0)}},{key:"index",value:function(h,N){return h===this.textNode?0:c(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"index",this).call(this,h,N)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){c(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var h=this.textNode,N=this.selection.getNativeRange(),A=void 0,O=void 0,S=void 0;if(N!=null&&N.start.node===h&&N.end.node===h){var T=[h,N.start.offset,N.end.offset];A=T[0],O=T[1],S=T[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==p.CONTENTS){var k=this.textNode.data.split(p.CONTENTS).join("");this.next instanceof u.default?(A=this.next.domNode,this.next.insertAt(0,k),this.textNode.data=p.CONTENTS):(this.textNode.data=k,this.parent.insertBefore(y.default.create(this.textNode),this),this.textNode=document.createTextNode(p.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),O!=null){var _=[O,S].map(function(P){return Math.max(0,Math.min(A.data.length,P-1))}),E=o(_,2);return O=E[0],S=E[1],{startNode:A,startOffset:O,endNode:A,endOffset:S}}}}},{key:"update",value:function(h,N){var A=this;if(h.some(function(S){return S.type==="characterData"&&S.target===A.textNode})){var O=this.restore();O&&(N.range=O)}}},{key:"value",value:function(){return""}}]),p}(y.default.Embed);b.blotName="cursor",b.className="ql-cursor",b.tagName="span",b.CONTENTS="\uFEFF",i.default=b},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(0),c=y(o),m=a(4),v=y(m);function y(g){return g&&g.__esModule?g:{default:g}}function x(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function u(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function s(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var l=function(g){s(d,g);function d(){return x(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(c.default.Container);l.allowedChildren=[v.default,m.BlockEmbed,l],i.default=l},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.ColorStyle=i.ColorClass=i.ColorAttributor=void 0;var o=function(){function b(f,p){for(var j=0;j<p.length;j++){var h=p[j];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,p,j){return p&&b(f.prototype,p),j&&b(f,j),f}}(),c=function b(f,p,j){f===null&&(f=Function.prototype);var h=Object.getOwnPropertyDescriptor(f,p);if(h===void 0){var N=Object.getPrototypeOf(f);return N===null?void 0:b(N,p,j)}else{if("value"in h)return h.value;var A=h.get;return A===void 0?void 0:A.call(j)}},m=a(0),v=y(m);function y(b){return b&&b.__esModule?b:{default:b}}function x(b,f){if(!(b instanceof f))throw new TypeError("Cannot call a class as a function")}function u(b,f){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:b}function s(b,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}var l=function(b){s(f,b);function f(){return x(this,f),u(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return o(f,[{key:"value",value:function(j){var h=c(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this).call(this,j);return h.startsWith("rgb(")?(h=h.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+h.split(",").map(function(N){return("00"+parseInt(N).toString(16)).slice(-2)}).join("")):h}}]),f}(v.default.Attributor.Style),g=new v.default.Attributor.Class("color","ql-color",{scope:v.default.Scope.INLINE}),d=new l("color","color",{scope:v.default.Scope.INLINE});i.ColorAttributor=l,i.ColorClass=g,i.ColorStyle=d},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.sanitize=i.default=void 0;var o=function(){function d(b,f){for(var p=0;p<f.length;p++){var j=f[p];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,f,p){return f&&d(b.prototype,f),p&&d(b,p),b}}(),c=function d(b,f,p){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,f);if(j===void 0){var h=Object.getPrototypeOf(b);return h===null?void 0:d(h,f,p)}else{if("value"in j)return j.value;var N=j.get;return N===void 0?void 0:N.call(p)}},m=a(6),v=y(m);function y(d){return d&&d.__esModule?d:{default:d}}function x(d,b){if(!(d instanceof b))throw new TypeError("Cannot call a class as a function")}function u(d,b){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:d}function s(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}var l=function(d){s(b,d);function b(){return x(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"format",value:function(p,j){if(p!==this.statics.blotName||!j)return c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,p,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(p){var j=c(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,p);return p=this.sanitize(p),j.setAttribute("href",p),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(p){return p.getAttribute("href")}},{key:"sanitize",value:function(p){return g(p,this.PROTOCOL_WHITELIST)?p:this.SANITIZED_URL}}]),b}(v.default);l.blotName="link",l.tagName="A",l.SANITIZED_URL="about:blank",l.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(d,b){var f=document.createElement("a");f.href=d;var p=f.href.slice(0,f.href.indexOf(":"));return b.indexOf(p)>-1}i.default=l,i.sanitize=g},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},c=function(){function b(f,p){for(var j=0;j<p.length;j++){var h=p[j];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,p,j){return p&&b(f.prototype,p),j&&b(f,j),f}}(),m=a(23),v=u(m),y=a(107),x=u(y);function u(b){return b&&b.__esModule?b:{default:b}}function s(b,f){if(!(b instanceof f))throw new TypeError("Cannot call a class as a function")}var l=0;function g(b,f){b.setAttribute(f,b.getAttribute(f)!=="true")}var d=function(){function b(f){var p=this;s(this,b),this.select=f,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){p.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case v.default.keys.ENTER:p.togglePicker();break;case v.default.keys.ESCAPE:p.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return c(b,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(p){var j=this,h=document.createElement("span");return h.tabIndex="0",h.setAttribute("role","button"),h.classList.add("ql-picker-item"),p.hasAttribute("value")&&h.setAttribute("data-value",p.getAttribute("value")),p.textContent&&h.setAttribute("data-label",p.textContent),h.addEventListener("click",function(){j.selectItem(h,!0)}),h.addEventListener("keydown",function(N){switch(N.keyCode){case v.default.keys.ENTER:j.selectItem(h,!0),N.preventDefault();break;case v.default.keys.ESCAPE:j.escape(),N.preventDefault();break}}),h}},{key:"buildLabel",value:function(){var p=document.createElement("span");return p.classList.add("ql-picker-label"),p.innerHTML=x.default,p.tabIndex="0",p.setAttribute("role","button"),p.setAttribute("aria-expanded","false"),this.container.appendChild(p),p}},{key:"buildOptions",value:function(){var p=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(h){var N=p.buildItem(h);j.appendChild(N),h.selected===!0&&p.selectItem(N)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var p=this;[].slice.call(this.select.attributes).forEach(function(j){p.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var p=this;this.close(),setTimeout(function(){return p.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(p){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h=this.container.querySelector(".ql-selected");if(p!==h&&(h!=null&&h.classList.remove("ql-selected"),p!=null&&(p.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(p.parentNode.children,p),p.hasAttribute("data-value")?this.label.setAttribute("data-value",p.getAttribute("data-value")):this.label.removeAttribute("data-value"),p.hasAttribute("data-label")?this.label.setAttribute("data-label",p.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var N=document.createEvent("Event");N.initEvent("change",!0,!0),this.select.dispatchEvent(N)}this.close()}}},{key:"update",value:function(){var p=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];p=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var h=p!=null&&p!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",h)}}]),b}();i.default=d},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(0),c=L(o),m=a(5),v=L(m),y=a(4),x=L(y),u=a(16),s=L(u),l=a(25),g=L(l),d=a(24),b=L(d),f=a(35),p=L(f),j=a(6),h=L(j),N=a(22),A=L(N),O=a(7),S=L(O),T=a(55),k=L(T),_=a(42),E=L(_),P=a(23),z=L(P);function L(U){return U&&U.__esModule?U:{default:U}}v.default.register({"blots/block":x.default,"blots/block/embed":y.BlockEmbed,"blots/break":s.default,"blots/container":g.default,"blots/cursor":b.default,"blots/embed":p.default,"blots/inline":h.default,"blots/scroll":A.default,"blots/text":S.default,"modules/clipboard":k.default,"modules/history":E.default,"modules/keyboard":z.default}),c.default.register(x.default,s.default,b.default,h.default,A.default,S.default),i.default=v.default},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(1),c=function(){function m(v){this.domNode=v,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(m.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),m.create=function(v){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var y;return Array.isArray(this.tagName)?(typeof v=="string"&&(v=v.toUpperCase(),parseInt(v).toString()===v&&(v=parseInt(v))),typeof v=="number"?y=document.createElement(this.tagName[v-1]):this.tagName.indexOf(v)>-1?y=document.createElement(v):y=document.createElement(this.tagName[0])):y=document.createElement(this.tagName),this.className&&y.classList.add(this.className),y},m.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},m.prototype.clone=function(){var v=this.domNode.cloneNode(!1);return o.create(v)},m.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},m.prototype.deleteAt=function(v,y){var x=this.isolate(v,y);x.remove()},m.prototype.formatAt=function(v,y,x,u){var s=this.isolate(v,y);if(o.query(x,o.Scope.BLOT)!=null&&u)s.wrap(x,u);else if(o.query(x,o.Scope.ATTRIBUTE)!=null){var l=o.create(this.statics.scope);s.wrap(l),l.format(x,u)}},m.prototype.insertAt=function(v,y,x){var u=x==null?o.create("text",y):o.create(y,x),s=this.split(v);this.parent.insertBefore(u,s)},m.prototype.insertInto=function(v,y){y===void 0&&(y=null),this.parent!=null&&this.parent.children.remove(this);var x=null;v.children.insertBefore(this,y),y!=null&&(x=y.domNode),(this.domNode.parentNode!=v.domNode||this.domNode.nextSibling!=x)&&v.domNode.insertBefore(this.domNode,x),this.parent=v,this.attach()},m.prototype.isolate=function(v,y){var x=this.split(v);return x.split(y),x},m.prototype.length=function(){return 1},m.prototype.offset=function(v){return v===void 0&&(v=this.parent),this.parent==null||this==v?0:this.parent.children.offset(this)+this.parent.offset(v)},m.prototype.optimize=function(v){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},m.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},m.prototype.replace=function(v){v.parent!=null&&(v.parent.insertBefore(this,v.next),v.remove())},m.prototype.replaceWith=function(v,y){var x=typeof v=="string"?o.create(v,y):v;return x.replace(this),x},m.prototype.split=function(v,y){return v===0?this:this.next},m.prototype.update=function(v,y){},m.prototype.wrap=function(v,y){var x=typeof v=="string"?o.create(v,y):v;return this.parent!=null&&this.parent.insertBefore(x,this.next),x.appendChild(this),x},m.blotName="abstract",m}();i.default=c},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(12),c=a(32),m=a(33),v=a(1),y=function(){function x(u){this.attributes={},this.domNode=u,this.build()}return x.prototype.attribute=function(u,s){s?u.add(this.domNode,s)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},x.prototype.build=function(){var u=this;this.attributes={};var s=o.default.keys(this.domNode),l=c.default.keys(this.domNode),g=m.default.keys(this.domNode);s.concat(l).concat(g).forEach(function(d){var b=v.query(d,v.Scope.ATTRIBUTE);b instanceof o.default&&(u.attributes[b.attrName]=b)})},x.prototype.copy=function(u){var s=this;Object.keys(this.attributes).forEach(function(l){var g=s.attributes[l].value(s.domNode);u.format(l,g)})},x.prototype.move=function(u){var s=this;this.copy(u),Object.keys(this.attributes).forEach(function(l){s.attributes[l].remove(s.domNode)}),this.attributes={}},x.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(s,l){return s[l]=u.attributes[l].value(u.domNode),s},{})},x}();i.default=y},function(t,i,a){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,u){x.__proto__=u}||function(x,u){for(var s in u)u.hasOwnProperty(s)&&(x[s]=u[s])};return function(x,u){y(x,u);function s(){this.constructor=x}x.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(12);function m(y,x){var u=y.getAttribute("class")||"";return u.split(/\s+/).filter(function(s){return s.indexOf(x+"-")===0})}var v=function(y){o(x,y);function x(){return y!==null&&y.apply(this,arguments)||this}return x.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(s){return s.split("-").slice(0,-1).join("-")})},x.prototype.add=function(u,s){return this.canAdd(u,s)?(this.remove(u),u.classList.add(this.keyName+"-"+s),!0):!1},x.prototype.remove=function(u){var s=m(u,this.keyName);s.forEach(function(l){u.classList.remove(l)}),u.classList.length===0&&u.removeAttribute("class")},x.prototype.value=function(u){var s=m(u,this.keyName)[0]||"",l=s.slice(this.keyName.length+1);return this.canAdd(u,l)?l:""},x}(c.default);i.default=v},function(t,i,a){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,u){x.__proto__=u}||function(x,u){for(var s in u)u.hasOwnProperty(s)&&(x[s]=u[s])};return function(x,u){y(x,u);function s(){this.constructor=x}x.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(12);function m(y){var x=y.split("-"),u=x.slice(1).map(function(s){return s[0].toUpperCase()+s.slice(1)}).join("");return x[0]+u}var v=function(y){o(x,y);function x(){return y!==null&&y.apply(this,arguments)||this}return x.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(s){var l=s.split(":");return l[0].trim()})},x.prototype.add=function(u,s){return this.canAdd(u,s)?(u.style[m(this.keyName)]=s,!0):!1},x.prototype.remove=function(u){u.style[m(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},x.prototype.value=function(u){var s=u.style[m(this.keyName)];return this.canAdd(u,s)?s:""},x}(c.default);i.default=v},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function v(y,x){for(var u=0;u<x.length;u++){var s=x[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(y,s.key,s)}}return function(y,x,u){return x&&v(y.prototype,x),u&&v(y,u),y}}();function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}var m=function(){function v(y,x){c(this,v),this.quill=y,this.options=x,this.modules={}}return o(v,[{key:"init",value:function(){var x=this;Object.keys(this.options.modules).forEach(function(u){x.modules[u]==null&&x.addModule(u)})}},{key:"addModule",value:function(x){var u=this.quill.constructor.import("modules/"+x);return this.modules[x]=new u(this.quill,this.options.modules[x]||{}),this.modules[x]}}]),v}();m.DEFAULTS={modules:{}},m.themes={default:m},i.default=m},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function f(p,j){for(var h=0;h<j.length;h++){var N=j[h];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(p,N.key,N)}}return function(p,j,h){return j&&f(p.prototype,j),h&&f(p,h),p}}(),c=function f(p,j,h){p===null&&(p=Function.prototype);var N=Object.getOwnPropertyDescriptor(p,j);if(N===void 0){var A=Object.getPrototypeOf(p);return A===null?void 0:f(A,j,h)}else{if("value"in N)return N.value;var O=N.get;return O===void 0?void 0:O.call(h)}},m=a(0),v=u(m),y=a(7),x=u(y);function u(f){return f&&f.__esModule?f:{default:f}}function s(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function l(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function g(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var d="\uFEFF",b=function(f){g(p,f);function p(j){s(this,p);var h=l(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,j));return h.contentNode=document.createElement("span"),h.contentNode.setAttribute("contenteditable",!1),[].slice.call(h.domNode.childNodes).forEach(function(N){h.contentNode.appendChild(N)}),h.leftGuard=document.createTextNode(d),h.rightGuard=document.createTextNode(d),h.domNode.appendChild(h.leftGuard),h.domNode.appendChild(h.contentNode),h.domNode.appendChild(h.rightGuard),h}return o(p,[{key:"index",value:function(h,N){return h===this.leftGuard?0:h===this.rightGuard?1:c(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"index",this).call(this,h,N)}},{key:"restore",value:function(h){var N=void 0,A=void 0,O=h.data.split(d).join("");if(h===this.leftGuard)if(this.prev instanceof x.default){var S=this.prev.length();this.prev.insertAt(S,O),N={startNode:this.prev.domNode,startOffset:S+O.length}}else A=document.createTextNode(O),this.parent.insertBefore(v.default.create(A),this),N={startNode:A,startOffset:O.length};else h===this.rightGuard&&(this.next instanceof x.default?(this.next.insertAt(0,O),N={startNode:this.next.domNode,startOffset:O.length}):(A=document.createTextNode(O),this.parent.insertBefore(v.default.create(A),this.next),N={startNode:A,startOffset:O.length}));return h.data=d,N}},{key:"update",value:function(h,N){var A=this;h.forEach(function(O){if(O.type==="characterData"&&(O.target===A.leftGuard||O.target===A.rightGuard)){var S=A.restore(O.target);S&&(N.range=S)}})}}]),p}(v.default.Embed);i.default=b},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.AlignStyle=i.AlignClass=i.AlignAttribute=void 0;var o=a(0),c=m(o);function m(s){return s&&s.__esModule?s:{default:s}}var v={scope:c.default.Scope.BLOCK,whitelist:["right","center","justify"]},y=new c.default.Attributor.Attribute("align","align",v),x=new c.default.Attributor.Class("align","ql-align",v),u=new c.default.Attributor.Style("align","text-align",v);i.AlignAttribute=y,i.AlignClass=x,i.AlignStyle=u},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.BackgroundStyle=i.BackgroundClass=void 0;var o=a(0),c=v(o),m=a(26);function v(u){return u&&u.__esModule?u:{default:u}}var y=new c.default.Attributor.Class("background","ql-bg",{scope:c.default.Scope.INLINE}),x=new m.ColorAttributor("background","background-color",{scope:c.default.Scope.INLINE});i.BackgroundClass=y,i.BackgroundStyle=x},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.DirectionStyle=i.DirectionClass=i.DirectionAttribute=void 0;var o=a(0),c=m(o);function m(s){return s&&s.__esModule?s:{default:s}}var v={scope:c.default.Scope.BLOCK,whitelist:["rtl"]},y=new c.default.Attributor.Attribute("direction","dir",v),x=new c.default.Attributor.Class("direction","ql-direction",v),u=new c.default.Attributor.Style("direction","direction",v);i.DirectionAttribute=y,i.DirectionClass=x,i.DirectionStyle=u},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.FontClass=i.FontStyle=void 0;var o=function(){function f(p,j){for(var h=0;h<j.length;h++){var N=j[h];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(p,N.key,N)}}return function(p,j,h){return j&&f(p.prototype,j),h&&f(p,h),p}}(),c=function f(p,j,h){p===null&&(p=Function.prototype);var N=Object.getOwnPropertyDescriptor(p,j);if(N===void 0){var A=Object.getPrototypeOf(p);return A===null?void 0:f(A,j,h)}else{if("value"in N)return N.value;var O=N.get;return O===void 0?void 0:O.call(h)}},m=a(0),v=y(m);function y(f){return f&&f.__esModule?f:{default:f}}function x(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function s(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var l={scope:v.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new v.default.Attributor.Class("font","ql-font",l),d=function(f){s(p,f);function p(){return x(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return o(p,[{key:"value",value:function(h){return c(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"value",this).call(this,h).replace(/["']/g,"")}}]),p}(v.default.Attributor.Style),b=new d("font","font-family",l);i.FontStyle=b,i.FontClass=g},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.SizeStyle=i.SizeClass=void 0;var o=a(0),c=m(o);function m(x){return x&&x.__esModule?x:{default:x}}var v=new c.default.Attributor.Class("size","ql-size",{scope:c.default.Scope.INLINE,whitelist:["small","large","huge"]}),y=new c.default.Attributor.Style("size","font-size",{scope:c.default.Scope.INLINE,whitelist:["10px","18px","32px"]});i.SizeClass=v,i.SizeStyle=y},function(t,i,a){t.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.getLastChangeIndex=i.default=void 0;var o=function(){function j(h,N){for(var A=0;A<N.length;A++){var O=N[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(h,O.key,O)}}return function(h,N,A){return N&&j(h.prototype,N),A&&j(h,A),h}}(),c=a(0),m=s(c),v=a(5),y=s(v),x=a(9),u=s(x);function s(j){return j&&j.__esModule?j:{default:j}}function l(j,h){if(!(j instanceof h))throw new TypeError("Cannot call a class as a function")}function g(j,h){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:j}function d(j,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);j.prototype=Object.create(h&&h.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(j,h):j.__proto__=h)}var b=function(j){d(h,j);function h(N,A){l(this,h);var O=g(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,N,A));return O.lastRecorded=0,O.ignoreChange=!1,O.clear(),O.quill.on(y.default.events.EDITOR_CHANGE,function(S,T,k,_){S!==y.default.events.TEXT_CHANGE||O.ignoreChange||(!O.options.userOnly||_===y.default.sources.USER?O.record(T,k):O.transform(T))}),O.quill.keyboard.addBinding({key:"Z",shortKey:!0},O.undo.bind(O)),O.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},O.redo.bind(O)),/Win/i.test(navigator.platform)&&O.quill.keyboard.addBinding({key:"Y",shortKey:!0},O.redo.bind(O)),O}return o(h,[{key:"change",value:function(A,O){if(this.stack[A].length!==0){var S=this.stack[A].pop();this.stack[O].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[A],y.default.sources.USER),this.ignoreChange=!1;var T=p(S[A]);this.quill.setSelection(T)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(A,O){if(A.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(O),T=Date.now();if(this.lastRecorded+this.options.delay>T&&this.stack.undo.length>0){var k=this.stack.undo.pop();S=S.compose(k.undo),A=k.redo.compose(A)}else this.lastRecorded=T;this.stack.undo.push({redo:A,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(A){this.stack.undo.forEach(function(O){O.undo=A.transform(O.undo,!0),O.redo=A.transform(O.redo,!0)}),this.stack.redo.forEach(function(O){O.undo=A.transform(O.undo,!0),O.redo=A.transform(O.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),h}(u.default);b.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function f(j){var h=j.ops[j.ops.length-1];return h==null?!1:h.insert!=null?typeof h.insert=="string"&&h.insert.endsWith(`
`):h.attributes!=null?Object.keys(h.attributes).some(function(N){return m.default.query(N,m.default.Scope.BLOCK)!=null}):!1}function p(j){var h=j.reduce(function(A,O){return A+=O.delete||0,A},0),N=j.length()-h;return f(j)&&(N-=1),N}i.default=b,i.getLastChangeIndex=p},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BaseTooltip=void 0;var o=function(){function R(I,H){for(var q=0;q<H.length;q++){var w=H[q];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(I,w.key,w)}}return function(I,H,q){return H&&R(I.prototype,H),q&&R(I,q),I}}(),c=function R(I,H,q){I===null&&(I=Function.prototype);var w=Object.getOwnPropertyDescriptor(I,H);if(w===void 0){var $=Object.getPrototypeOf(I);return $===null?void 0:R($,H,q)}else{if("value"in w)return w.value;var B=w.get;return B===void 0?void 0:B.call(q)}},m=a(3),v=T(m),y=a(2),x=T(y),u=a(8),s=T(u),l=a(23),g=T(l),d=a(34),b=T(d),f=a(59),p=T(f),j=a(60),h=T(j),N=a(28),A=T(N),O=a(61),S=T(O);function T(R){return R&&R.__esModule?R:{default:R}}function k(R,I){if(!(R instanceof I))throw new TypeError("Cannot call a class as a function")}function _(R,I){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:R}function E(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);R.prototype=Object.create(I&&I.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(R,I):R.__proto__=I)}var P=[!1,"center","right","justify"],z=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L=[!1,"serif","monospace"],U=["1","2","3",!1],G=["small",!1,"large","huge"],Q=function(R){E(I,R);function I(H,q){k(this,I);var w=_(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,H,q)),$=function B(V){if(!document.body.contains(H.root))return document.body.removeEventListener("click",B);w.tooltip!=null&&!w.tooltip.root.contains(V.target)&&document.activeElement!==w.tooltip.textbox&&!w.quill.hasFocus()&&w.tooltip.hide(),w.pickers!=null&&w.pickers.forEach(function(W){W.container.contains(V.target)||W.close()})};return H.emitter.listenDOM("click",document.body,$),w}return o(I,[{key:"addModule",value:function(q){var w=c(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"addModule",this).call(this,q);return q==="toolbar"&&this.extendToolbar(w),w}},{key:"buildButtons",value:function(q,w){q.forEach(function($){var B=$.getAttribute("class")||"";B.split(/\s+/).forEach(function(V){if(V.startsWith("ql-")&&(V=V.slice(3),w[V]!=null))if(V==="direction")$.innerHTML=w[V][""]+w[V].rtl;else if(typeof w[V]=="string")$.innerHTML=w[V];else{var W=$.value||"";W!=null&&w[V][W]&&($.innerHTML=w[V][W])}})})}},{key:"buildPickers",value:function(q,w){var $=this;this.pickers=q.map(function(V){if(V.classList.contains("ql-align"))return V.querySelector("option")==null&&C(V,P),new h.default(V,w.align);if(V.classList.contains("ql-background")||V.classList.contains("ql-color")){var W=V.classList.contains("ql-background")?"background":"color";return V.querySelector("option")==null&&C(V,z,W==="background"?"#ffffff":"#000000"),new p.default(V,w[W])}else return V.querySelector("option")==null&&(V.classList.contains("ql-font")?C(V,L):V.classList.contains("ql-header")?C(V,U):V.classList.contains("ql-size")&&C(V,G)),new A.default(V)});var B=function(){$.pickers.forEach(function(W){W.update()})};this.quill.on(s.default.events.EDITOR_CHANGE,B)}}]),I}(b.default);Q.DEFAULTS=(0,v.default)(!0,{},b.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var I=this,H=this.container.querySelector("input.ql-image[type=file]");H==null&&(H=document.createElement("input"),H.setAttribute("type","file"),H.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),H.classList.add("ql-image"),H.addEventListener("change",function(){if(H.files!=null&&H.files[0]!=null){var q=new FileReader;q.onload=function(w){var $=I.quill.getSelection(!0);I.quill.updateContents(new x.default().retain($.index).delete($.length).insert({image:w.target.result}),s.default.sources.USER),I.quill.setSelection($.index+1,s.default.sources.SILENT),H.value=""},q.readAsDataURL(H.files[0])}}),this.container.appendChild(H)),H.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var F=function(R){E(I,R);function I(H,q){k(this,I);var w=_(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,H,q));return w.textbox=w.root.querySelector('input[type="text"]'),w.listen(),w}return o(I,[{key:"listen",value:function(){var q=this;this.textbox.addEventListener("keydown",function(w){g.default.match(w,"enter")?(q.save(),w.preventDefault()):g.default.match(w,"escape")&&(q.cancel(),w.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),w!=null?this.textbox.value=w:q!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+q)||""),this.root.setAttribute("data-mode",q)}},{key:"restoreFocus",value:function(){var q=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=q}},{key:"save",value:function(){var q=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var w=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",q,s.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",q,s.default.sources.USER)),this.quill.root.scrollTop=w;break}case"video":q=D(q);case"formula":{if(!q)break;var $=this.quill.getSelection(!0);if($!=null){var B=$.index+$.length;this.quill.insertEmbed(B,this.root.getAttribute("data-mode"),q,s.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(B+1," ",s.default.sources.USER),this.quill.setSelection(B+2,s.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),I}(S.default);function D(R){var I=R.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||R.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return I?(I[1]||"https")+"://www.youtube.com/embed/"+I[2]+"?showinfo=0":(I=R.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(I[1]||"https")+"://player.vimeo.com/video/"+I[2]+"/":R}function C(R,I){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;I.forEach(function(q){var w=document.createElement("option");q===H?w.setAttribute("selected","selected"):w.setAttribute("value",q),R.appendChild(w)})}i.BaseTooltip=F,i.default=Q},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function c(){this.head=this.tail=null,this.length=0}return c.prototype.append=function(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];this.insertBefore(m[0],null),m.length>1&&this.append.apply(this,m.slice(1))},c.prototype.contains=function(m){for(var v,y=this.iterator();v=y();)if(v===m)return!0;return!1},c.prototype.insertBefore=function(m,v){m&&(m.next=v,v!=null?(m.prev=v.prev,v.prev!=null&&(v.prev.next=m),v.prev=m,v===this.head&&(this.head=m)):this.tail!=null?(this.tail.next=m,m.prev=this.tail,this.tail=m):(m.prev=null,this.head=this.tail=m),this.length+=1)},c.prototype.offset=function(m){for(var v=0,y=this.head;y!=null;){if(y===m)return v;v+=y.length(),y=y.next}return-1},c.prototype.remove=function(m){this.contains(m)&&(m.prev!=null&&(m.prev.next=m.next),m.next!=null&&(m.next.prev=m.prev),m===this.head&&(this.head=m.next),m===this.tail&&(this.tail=m.prev),this.length-=1)},c.prototype.iterator=function(m){return m===void 0&&(m=this.head),function(){var v=m;return m!=null&&(m=m.next),v}},c.prototype.find=function(m,v){v===void 0&&(v=!1);for(var y,x=this.iterator();y=x();){var u=y.length();if(m<u||v&&m===u&&(y.next==null||y.next.length()!==0))return[y,m];m-=u}return[null,0]},c.prototype.forEach=function(m){for(var v,y=this.iterator();v=y();)m(v)},c.prototype.forEachAt=function(m,v,y){if(!(v<=0))for(var x=this.find(m),u=x[0],s=x[1],l,g=m-s,d=this.iterator(u);(l=d())&&g<m+v;){var b=l.length();m>g?y(l,m-g,Math.min(v,g+b-m)):y(l,0,Math.min(b,m+v-g)),g+=b}},c.prototype.map=function(m){return this.reduce(function(v,y){return v.push(m(y)),v},[])},c.prototype.reduce=function(m,v){for(var y,x=this.iterator();y=x();)v=m(v,y);return v},c}();i.default=o},function(t,i,a){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var g in l)l.hasOwnProperty(g)&&(s[g]=l[g])};return function(s,l){u(s,l);function g(){this.constructor=s}s.prototype=l===null?Object.create(l):(g.prototype=l.prototype,new g)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(17),m=a(1),v={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},y=100,x=function(u){o(s,u);function s(l){var g=u.call(this,l)||this;return g.scroll=g,g.observer=new MutationObserver(function(d){g.update(d)}),g.observer.observe(g.domNode,v),g.attach(),g}return s.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},s.prototype.deleteAt=function(l,g){this.update(),l===0&&g===this.length()?this.children.forEach(function(d){d.remove()}):u.prototype.deleteAt.call(this,l,g)},s.prototype.formatAt=function(l,g,d,b){this.update(),u.prototype.formatAt.call(this,l,g,d,b)},s.prototype.insertAt=function(l,g,d){this.update(),u.prototype.insertAt.call(this,l,g,d)},s.prototype.optimize=function(l,g){var d=this;l===void 0&&(l=[]),g===void 0&&(g={}),u.prototype.optimize.call(this,g);for(var b=[].slice.call(this.observer.takeRecords());b.length>0;)l.push(b.pop());for(var f=function(N,A){A===void 0&&(A=!0),!(N==null||N===d)&&N.domNode.parentNode!=null&&(N.domNode[m.DATA_KEY].mutations==null&&(N.domNode[m.DATA_KEY].mutations=[]),A&&f(N.parent))},p=function(N){N.domNode[m.DATA_KEY]==null||N.domNode[m.DATA_KEY].mutations==null||(N instanceof c.default&&N.children.forEach(p),N.optimize(g))},j=l,h=0;j.length>0;h+=1){if(h>=y)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(N){var A=m.find(N.target,!0);A!=null&&(A.domNode===N.target&&(N.type==="childList"?(f(m.find(N.previousSibling,!1)),[].forEach.call(N.addedNodes,function(O){var S=m.find(O,!1);f(S,!1),S instanceof c.default&&S.children.forEach(function(T){f(T,!1)})})):N.type==="attributes"&&f(A.prev)),f(A))}),this.children.forEach(p),j=[].slice.call(this.observer.takeRecords()),b=j.slice();b.length>0;)l.push(b.pop())}},s.prototype.update=function(l,g){var d=this;g===void 0&&(g={}),l=l||this.observer.takeRecords(),l.map(function(b){var f=m.find(b.target,!0);return f==null?null:f.domNode[m.DATA_KEY].mutations==null?(f.domNode[m.DATA_KEY].mutations=[b],f):(f.domNode[m.DATA_KEY].mutations.push(b),null)}).forEach(function(b){b==null||b===d||b.domNode[m.DATA_KEY]==null||b.update(b.domNode[m.DATA_KEY].mutations||[],g)}),this.domNode[m.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[m.DATA_KEY].mutations,g),this.optimize(l,g)},s.blotName="scroll",s.defaultChild="block",s.scope=m.Scope.BLOCK_BLOT,s.tagName="DIV",s}(c.default);i.default=x},function(t,i,a){var o=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)s.hasOwnProperty(l)&&(u[l]=s[l])};return function(u,s){x(u,s);function l(){this.constructor=u}u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(18),m=a(1);function v(x,u){if(Object.keys(x).length!==Object.keys(u).length)return!1;for(var s in x)if(x[s]!==u[s])return!1;return!0}var y=function(x){o(u,x);function u(){return x!==null&&x.apply(this,arguments)||this}return u.formats=function(s){if(s.tagName!==u.tagName)return x.formats.call(this,s)},u.prototype.format=function(s,l){var g=this;s===this.statics.blotName&&!l?(this.children.forEach(function(d){d instanceof c.default||(d=d.wrap(u.blotName,!0)),g.attributes.copy(d)}),this.unwrap()):x.prototype.format.call(this,s,l)},u.prototype.formatAt=function(s,l,g,d){if(this.formats()[g]!=null||m.query(g,m.Scope.ATTRIBUTE)){var b=this.isolate(s,l);b.format(g,d)}else x.prototype.formatAt.call(this,s,l,g,d)},u.prototype.optimize=function(s){x.prototype.optimize.call(this,s);var l=this.formats();if(Object.keys(l).length===0)return this.unwrap();var g=this.next;g instanceof u&&g.prev===this&&v(l,g.formats())&&(g.moveChildren(this),g.remove())},u.blotName="inline",u.scope=m.Scope.INLINE_BLOT,u.tagName="SPAN",u}(c.default);i.default=y},function(t,i,a){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,u){x.__proto__=u}||function(x,u){for(var s in u)u.hasOwnProperty(s)&&(x[s]=u[s])};return function(x,u){y(x,u);function s(){this.constructor=x}x.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(18),m=a(1),v=function(y){o(x,y);function x(){return y!==null&&y.apply(this,arguments)||this}return x.formats=function(u){var s=m.query(x.blotName).tagName;if(u.tagName!==s)return y.formats.call(this,u)},x.prototype.format=function(u,s){m.query(u,m.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!s?this.replaceWith(x.blotName):y.prototype.format.call(this,u,s))},x.prototype.formatAt=function(u,s,l,g){m.query(l,m.Scope.BLOCK)!=null?this.format(l,g):y.prototype.formatAt.call(this,u,s,l,g)},x.prototype.insertAt=function(u,s,l){if(l==null||m.query(s,m.Scope.INLINE)!=null)y.prototype.insertAt.call(this,u,s,l);else{var g=this.split(u),d=m.create(s,l);g.parent.insertBefore(d,g)}},x.prototype.update=function(u,s){navigator.userAgent.match(/Trident/)?this.build():y.prototype.update.call(this,u,s)},x.blotName="block",x.scope=m.Scope.BLOCK_BLOT,x.tagName="P",x}(c.default);i.default=v},function(t,i,a){var o=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var u in x)x.hasOwnProperty(u)&&(y[u]=x[u])};return function(y,x){v(y,x);function u(){this.constructor=y}y.prototype=x===null?Object.create(x):(u.prototype=x.prototype,new u)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(19),m=function(v){o(y,v);function y(){return v!==null&&v.apply(this,arguments)||this}return y.formats=function(x){},y.prototype.format=function(x,u){v.prototype.formatAt.call(this,0,this.length(),x,u)},y.prototype.formatAt=function(x,u,s,l){x===0&&u===this.length()?this.format(s,l):v.prototype.formatAt.call(this,x,u,s,l)},y.prototype.formats=function(){return this.statics.formats(this.domNode)},y}(c.default);i.default=m},function(t,i,a){var o=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,u){x.__proto__=u}||function(x,u){for(var s in u)u.hasOwnProperty(s)&&(x[s]=u[s])};return function(x,u){y(x,u);function s(){this.constructor=x}x.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}}();Object.defineProperty(i,"__esModule",{value:!0});var c=a(19),m=a(1),v=function(y){o(x,y);function x(u){var s=y.call(this,u)||this;return s.text=s.statics.value(s.domNode),s}return x.create=function(u){return document.createTextNode(u)},x.value=function(u){var s=u.data;return s.normalize&&(s=s.normalize()),s},x.prototype.deleteAt=function(u,s){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+s)},x.prototype.index=function(u,s){return this.domNode===u?s:-1},x.prototype.insertAt=function(u,s,l){l==null?(this.text=this.text.slice(0,u)+s+this.text.slice(u),this.domNode.data=this.text):y.prototype.insertAt.call(this,u,s,l)},x.prototype.length=function(){return this.text.length},x.prototype.optimize=function(u){y.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof x&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},x.prototype.position=function(u,s){return[this.domNode,u]},x.prototype.split=function(u,s){if(s===void 0&&(s=!1),!s){if(u===0)return this;if(u===this.length())return this.next}var l=m.create(this.domNode.splitText(u));return this.parent.insertBefore(l,this.next),this.text=this.statics.value(this.domNode),l},x.prototype.update=function(u,s){var l=this;u.some(function(g){return g.type==="characterData"&&g.target===l.domNode})&&(this.text=this.statics.value(this.domNode))},x.prototype.value=function(){return this.text},x.blotName="text",x.scope=m.Scope.INLINE_BLOT,x}(c.default);i.default=v},function(t,i,a){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(m,v){return arguments.length>1&&!this.contains(m)==!v?v:c.call(this,m)}}String.prototype.startsWith||(String.prototype.startsWith=function(m,v){return v=v||0,this.substr(v,m.length)===m}),String.prototype.endsWith||(String.prototype.endsWith=function(m,v){var y=this.toString();(typeof v!="number"||!isFinite(v)||Math.floor(v)!==v||v>y.length)&&(v=y.length),v-=m.length;var x=y.indexOf(m,v);return x!==-1&&x===v}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(v){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof v!="function")throw new TypeError("predicate must be a function");for(var y=Object(this),x=y.length>>>0,u=arguments[1],s,l=0;l<x;l++)if(s=y[l],v.call(u,s,l,y))return s}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,i){var a=-1,o=1,c=0;function m(h,N,A){if(h==N)return h?[[c,h]]:[];(A<0||h.length<A)&&(A=null);var O=u(h,N),S=h.substring(0,O);h=h.substring(O),N=N.substring(O),O=s(h,N);var T=h.substring(h.length-O);h=h.substring(0,h.length-O),N=N.substring(0,N.length-O);var k=v(h,N);return S&&k.unshift([c,S]),T&&k.push([c,T]),g(k),A!=null&&(k=f(k,A)),k=p(k),k}function v(h,N){var A;if(!h)return[[o,N]];if(!N)return[[a,h]];var O=h.length>N.length?h:N,S=h.length>N.length?N:h,T=O.indexOf(S);if(T!=-1)return A=[[o,O.substring(0,T)],[c,S],[o,O.substring(T+S.length)]],h.length>N.length&&(A[0][0]=A[2][0]=a),A;if(S.length==1)return[[a,h],[o,N]];var k=l(h,N);if(k){var _=k[0],E=k[1],P=k[2],z=k[3],L=k[4],U=m(_,P),G=m(E,z);return U.concat([[c,L]],G)}return y(h,N)}function y(h,N){for(var A=h.length,O=N.length,S=Math.ceil((A+O)/2),T=S,k=2*S,_=new Array(k),E=new Array(k),P=0;P<k;P++)_[P]=-1,E[P]=-1;_[T+1]=0,E[T+1]=0;for(var z=A-O,L=z%2!=0,U=0,G=0,Q=0,F=0,D=0;D<S;D++){for(var C=-D+U;C<=D-G;C+=2){var R=T+C,I;C==-D||C!=D&&_[R-1]<_[R+1]?I=_[R+1]:I=_[R-1]+1;for(var H=I-C;I<A&&H<O&&h.charAt(I)==N.charAt(H);)I++,H++;if(_[R]=I,I>A)G+=2;else if(H>O)U+=2;else if(L){var q=T+z-C;if(q>=0&&q<k&&E[q]!=-1){var w=A-E[q];if(I>=w)return x(h,N,I,H)}}}for(var $=-D+Q;$<=D-F;$+=2){var q=T+$,w;$==-D||$!=D&&E[q-1]<E[q+1]?w=E[q+1]:w=E[q-1]+1;for(var B=w-$;w<A&&B<O&&h.charAt(A-w-1)==N.charAt(O-B-1);)w++,B++;if(E[q]=w,w>A)F+=2;else if(B>O)Q+=2;else if(!L){var R=T+z-$;if(R>=0&&R<k&&_[R]!=-1){var I=_[R],H=T+I-R;if(w=A-w,I>=w)return x(h,N,I,H)}}}}return[[a,h],[o,N]]}function x(h,N,A,O){var S=h.substring(0,A),T=N.substring(0,O),k=h.substring(A),_=N.substring(O),E=m(S,T),P=m(k,_);return E.concat(P)}function u(h,N){if(!h||!N||h.charAt(0)!=N.charAt(0))return 0;for(var A=0,O=Math.min(h.length,N.length),S=O,T=0;A<S;)h.substring(T,S)==N.substring(T,S)?(A=S,T=A):O=S,S=Math.floor((O-A)/2+A);return S}function s(h,N){if(!h||!N||h.charAt(h.length-1)!=N.charAt(N.length-1))return 0;for(var A=0,O=Math.min(h.length,N.length),S=O,T=0;A<S;)h.substring(h.length-S,h.length-T)==N.substring(N.length-S,N.length-T)?(A=S,T=A):O=S,S=Math.floor((O-A)/2+A);return S}function l(h,N){var A=h.length>N.length?h:N,O=h.length>N.length?N:h;if(A.length<4||O.length*2<A.length)return null;function S(G,Q,F){for(var D=G.substring(F,F+Math.floor(G.length/4)),C=-1,R="",I,H,q,w;(C=Q.indexOf(D,C+1))!=-1;){var $=u(G.substring(F),Q.substring(C)),B=s(G.substring(0,F),Q.substring(0,C));R.length<B+$&&(R=Q.substring(C-B,C)+Q.substring(C,C+$),I=G.substring(0,F-B),H=G.substring(F+$),q=Q.substring(0,C-B),w=Q.substring(C+$))}return R.length*2>=G.length?[I,H,q,w,R]:null}var T=S(A,O,Math.ceil(A.length/4)),k=S(A,O,Math.ceil(A.length/2)),_;if(!T&&!k)return null;k?T?_=T[4].length>k[4].length?T:k:_=k:_=T;var E,P,z,L;h.length>N.length?(E=_[0],P=_[1],z=_[2],L=_[3]):(z=_[0],L=_[1],E=_[2],P=_[3]);var U=_[4];return[E,P,z,L,U]}function g(h){h.push([c,""]);for(var N=0,A=0,O=0,S="",T="",k;N<h.length;)switch(h[N][0]){case o:O++,T+=h[N][1],N++;break;case a:A++,S+=h[N][1],N++;break;case c:A+O>1?(A!==0&&O!==0&&(k=u(T,S),k!==0&&(N-A-O>0&&h[N-A-O-1][0]==c?h[N-A-O-1][1]+=T.substring(0,k):(h.splice(0,0,[c,T.substring(0,k)]),N++),T=T.substring(k),S=S.substring(k)),k=s(T,S),k!==0&&(h[N][1]=T.substring(T.length-k)+h[N][1],T=T.substring(0,T.length-k),S=S.substring(0,S.length-k))),A===0?h.splice(N-O,A+O,[o,T]):O===0?h.splice(N-A,A+O,[a,S]):h.splice(N-A-O,A+O,[a,S],[o,T]),N=N-A-O+(A?1:0)+(O?1:0)+1):N!==0&&h[N-1][0]==c?(h[N-1][1]+=h[N][1],h.splice(N,1)):N++,O=0,A=0,S="",T="";break}h[h.length-1][1]===""&&h.pop();var _=!1;for(N=1;N<h.length-1;)h[N-1][0]==c&&h[N+1][0]==c&&(h[N][1].substring(h[N][1].length-h[N-1][1].length)==h[N-1][1]?(h[N][1]=h[N-1][1]+h[N][1].substring(0,h[N][1].length-h[N-1][1].length),h[N+1][1]=h[N-1][1]+h[N+1][1],h.splice(N-1,1),_=!0):h[N][1].substring(0,h[N+1][1].length)==h[N+1][1]&&(h[N-1][1]+=h[N+1][1],h[N][1]=h[N][1].substring(h[N+1][1].length)+h[N+1][1],h.splice(N+1,1),_=!0)),N++;_&&g(h)}var d=m;d.INSERT=o,d.DELETE=a,d.EQUAL=c,t.exports=d;function b(h,N){if(N===0)return[c,h];for(var A=0,O=0;O<h.length;O++){var S=h[O];if(S[0]===a||S[0]===c){var T=A+S[1].length;if(N===T)return[O+1,h];if(N<T){h=h.slice();var k=N-A,_=[S[0],S[1].slice(0,k)],E=[S[0],S[1].slice(k)];return h.splice(O,1,_,E),[O+1,h]}else A=T}}throw new Error("cursor_pos is out of bounds!")}function f(h,N){var A=b(h,N),O=A[1],S=A[0],T=O[S],k=O[S+1];if(T==null)return h;if(T[0]!==c)return h;if(k!=null&&T[1]+k[1]===k[1]+T[1])return O.splice(S,2,k,T),j(O,S,2);if(k!=null&&k[1].indexOf(T[1])===0){O.splice(S,2,[k[0],T[1]],[0,T[1]]);var _=k[1].slice(T[1].length);return _.length>0&&O.splice(S+2,0,[k[0],_]),j(O,S,3)}else return h}function p(h){for(var N=!1,A=function(k){return k.charCodeAt(0)>=56320&&k.charCodeAt(0)<=57343},O=function(k){return k.charCodeAt(k.length-1)>=55296&&k.charCodeAt(k.length-1)<=56319},S=2;S<h.length;S+=1)h[S-2][0]===c&&O(h[S-2][1])&&h[S-1][0]===a&&A(h[S-1][1])&&h[S][0]===o&&A(h[S][1])&&(N=!0,h[S-1][1]=h[S-2][1].slice(-1)+h[S-1][1],h[S][1]=h[S-2][1].slice(-1)+h[S][1],h[S-2][1]=h[S-2][1].slice(0,-1));if(!N)return h;for(var T=[],S=0;S<h.length;S+=1)h[S][1].length>0&&T.push(h[S]);return T}function j(h,N,A){for(var O=N+A-1;O>=0&&O>=N-1;O--)if(O+1<h.length){var S=h[O],T=h[O+1];S[0]===T[1]&&h.splice(O,2,[S[0],S[1]+T[1]])}return h}},function(t,i){i=t.exports=typeof Object.keys=="function"?Object.keys:a,i.shim=a;function a(o){var c=[];for(var m in o)c.push(m);return c}},function(t,i){var a=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";i=t.exports=a?o:c,i.supported=o;function o(m){return Object.prototype.toString.call(m)=="[object Arguments]"}i.unsupported=c;function c(m){return m&&typeof m=="object"&&typeof m.length=="number"&&Object.prototype.hasOwnProperty.call(m,"callee")&&!Object.prototype.propertyIsEnumerable.call(m,"callee")||!1}},function(t,i){var a=Object.prototype.hasOwnProperty,o="~";function c(){}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(o=!1));function m(y,x,u){this.fn=y,this.context=x,this.once=u||!1}function v(){this._events=new c,this._eventsCount=0}v.prototype.eventNames=function(){var x=[],u,s;if(this._eventsCount===0)return x;for(s in u=this._events)a.call(u,s)&&x.push(o?s.slice(1):s);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(u)):x},v.prototype.listeners=function(x,u){var s=o?o+x:x,l=this._events[s];if(u)return!!l;if(!l)return[];if(l.fn)return[l.fn];for(var g=0,d=l.length,b=new Array(d);g<d;g++)b[g]=l[g].fn;return b},v.prototype.emit=function(x,u,s,l,g,d){var b=o?o+x:x;if(!this._events[b])return!1;var f=this._events[b],p=arguments.length,j,h;if(f.fn){switch(f.once&&this.removeListener(x,f.fn,void 0,!0),p){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,u),!0;case 3:return f.fn.call(f.context,u,s),!0;case 4:return f.fn.call(f.context,u,s,l),!0;case 5:return f.fn.call(f.context,u,s,l,g),!0;case 6:return f.fn.call(f.context,u,s,l,g,d),!0}for(h=1,j=new Array(p-1);h<p;h++)j[h-1]=arguments[h];f.fn.apply(f.context,j)}else{var N=f.length,A;for(h=0;h<N;h++)switch(f[h].once&&this.removeListener(x,f[h].fn,void 0,!0),p){case 1:f[h].fn.call(f[h].context);break;case 2:f[h].fn.call(f[h].context,u);break;case 3:f[h].fn.call(f[h].context,u,s);break;case 4:f[h].fn.call(f[h].context,u,s,l);break;default:if(!j)for(A=1,j=new Array(p-1);A<p;A++)j[A-1]=arguments[A];f[h].fn.apply(f[h].context,j)}}return!0},v.prototype.on=function(x,u,s){var l=new m(u,s||this),g=o?o+x:x;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],l]:this._events[g].push(l):(this._events[g]=l,this._eventsCount++),this},v.prototype.once=function(x,u,s){var l=new m(u,s||this,!0),g=o?o+x:x;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],l]:this._events[g].push(l):(this._events[g]=l,this._eventsCount++),this},v.prototype.removeListener=function(x,u,s,l){var g=o?o+x:x;if(!this._events[g])return this;if(!u)return--this._eventsCount===0?this._events=new c:delete this._events[g],this;var d=this._events[g];if(d.fn)d.fn===u&&(!l||d.once)&&(!s||d.context===s)&&(--this._eventsCount===0?this._events=new c:delete this._events[g]);else{for(var b=0,f=[],p=d.length;b<p;b++)(d[b].fn!==u||l&&!d[b].once||s&&d[b].context!==s)&&f.push(d[b]);f.length?this._events[g]=f.length===1?f[0]:f:--this._eventsCount===0?this._events=new c:delete this._events[g]}return this},v.prototype.removeAllListeners=function(x){var u;return x?(u=o?o+x:x,this._events[u]&&(--this._eventsCount===0?this._events=new c:delete this._events[u])):(this._events=new c,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prototype.setMaxListeners=function(){return this},v.prefixed=o,v.EventEmitter=v,typeof t<"u"&&(t.exports=v)},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.matchText=i.matchSpacing=i.matchNewline=i.matchBlot=i.matchAttributor=i.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},c=function(){function Z(K,ae){var oe=[],J=!0,ne=!1,de=void 0;try{for(var pe=K[Symbol.iterator](),Pe;!(J=(Pe=pe.next()).done)&&(oe.push(Pe.value),!(ae&&oe.length===ae));J=!0);}catch(qe){ne=!0,de=qe}finally{try{!J&&pe.return&&pe.return()}finally{if(ne)throw de}}return oe}return function(K,ae){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return Z(K,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=function(){function Z(K,ae){for(var oe=0;oe<ae.length;oe++){var J=ae[oe];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(K,J.key,J)}}return function(K,ae,oe){return ae&&Z(K.prototype,ae),oe&&Z(K,oe),K}}(),v=a(3),y=E(v),x=a(2),u=E(x),s=a(0),l=E(s),g=a(5),d=E(g),b=a(10),f=E(b),p=a(9),j=E(p),h=a(36),N=a(37),A=a(13),O=E(A),S=a(26),T=a(38),k=a(39),_=a(40);function E(Z){return Z&&Z.__esModule?Z:{default:Z}}function P(Z,K,ae){return K in Z?Object.defineProperty(Z,K,{value:ae,enumerable:!0,configurable:!0,writable:!0}):Z[K]=ae,Z}function z(Z,K){if(!(Z instanceof K))throw new TypeError("Cannot call a class as a function")}function L(Z,K){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:Z}function U(Z,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);Z.prototype=Object.create(K&&K.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,K):Z.__proto__=K)}var G=(0,f.default)("quill:clipboard"),Q="__ql-matcher",F=[[Node.TEXT_NODE,ue],[Node.TEXT_NODE,ce],["br",X],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,Y],[Node.ELEMENT_NODE,V],[Node.ELEMENT_NODE,le],["li",re],["b",B.bind(B,"bold")],["i",B.bind(B,"italic")],["style",ie]],D=[h.AlignAttribute,T.DirectionAttribute].reduce(function(Z,K){return Z[K.keyName]=K,Z},{}),C=[h.AlignStyle,N.BackgroundStyle,S.ColorStyle,T.DirectionStyle,k.FontStyle,_.SizeStyle].reduce(function(Z,K){return Z[K.keyName]=K,Z},{}),R=function(Z){U(K,Z);function K(ae,oe){z(this,K);var J=L(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,ae,oe));return J.quill.root.addEventListener("paste",J.onPaste.bind(J)),J.container=J.quill.addContainer("ql-clipboard"),J.container.setAttribute("contenteditable",!0),J.container.setAttribute("tabindex",-1),J.matchers=[],F.concat(J.options.matchers).forEach(function(ne){var de=c(ne,2),pe=de[0],Pe=de[1];!oe.matchVisual&&Pe===Y||J.addMatcher(pe,Pe)}),J}return m(K,[{key:"addMatcher",value:function(oe,J){this.matchers.push([oe,J])}},{key:"convert",value:function(oe){if(typeof oe=="string")return this.container.innerHTML=oe.replace(/\>\r?\n +\</g,"><"),this.convert();var J=this.quill.getFormat(this.quill.selection.savedRange.index);if(J[O.default.blotName]){var ne=this.container.innerText;return this.container.innerHTML="",new u.default().insert(ne,P({},O.default.blotName,J[O.default.blotName]))}var de=this.prepareMatching(),pe=c(de,2),Pe=pe[0],qe=pe[1],fe=$(this.container,Pe,qe);return q(fe,`
`)&&fe.ops[fe.ops.length-1].attributes==null&&(fe=fe.compose(new u.default().retain(fe.length()-1).delete(1))),G.log("convert",this.container.innerHTML,fe),this.container.innerHTML="",fe}},{key:"dangerouslyPasteHTML",value:function(oe,J){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;if(typeof oe=="string")this.quill.setContents(this.convert(oe),J),this.quill.setSelection(0,d.default.sources.SILENT);else{var de=this.convert(J);this.quill.updateContents(new u.default().retain(oe).concat(de),ne),this.quill.setSelection(oe+de.length(),d.default.sources.SILENT)}}},{key:"onPaste",value:function(oe){var J=this;if(!(oe.defaultPrevented||!this.quill.isEnabled())){var ne=this.quill.getSelection(),de=new u.default().retain(ne.index),pe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(d.default.sources.SILENT),setTimeout(function(){de=de.concat(J.convert()).delete(ne.length),J.quill.updateContents(de,d.default.sources.USER),J.quill.setSelection(de.length()-ne.length,d.default.sources.SILENT),J.quill.scrollingContainer.scrollTop=pe,J.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var oe=this,J=[],ne=[];return this.matchers.forEach(function(de){var pe=c(de,2),Pe=pe[0],qe=pe[1];switch(Pe){case Node.TEXT_NODE:ne.push(qe);break;case Node.ELEMENT_NODE:J.push(qe);break;default:[].forEach.call(oe.container.querySelectorAll(Pe),function(fe){fe[Q]=fe[Q]||[],fe[Q].push(qe)});break}}),[J,ne]}}]),K}(j.default);R.DEFAULTS={matchers:[],matchVisual:!0};function I(Z,K,ae){return(typeof K>"u"?"undefined":o(K))==="object"?Object.keys(K).reduce(function(oe,J){return I(oe,J,K[J])},Z):Z.reduce(function(oe,J){return J.attributes&&J.attributes[K]?oe.push(J):oe.insert(J.insert,(0,y.default)({},P({},K,ae),J.attributes))},new u.default)}function H(Z){if(Z.nodeType!==Node.ELEMENT_NODE)return{};var K="__ql-computed-style";return Z[K]||(Z[K]=window.getComputedStyle(Z))}function q(Z,K){for(var ae="",oe=Z.ops.length-1;oe>=0&&ae.length<K.length;--oe){var J=Z.ops[oe];if(typeof J.insert!="string")break;ae=J.insert+ae}return ae.slice(-1*K.length)===K}function w(Z){if(Z.childNodes.length===0)return!1;var K=H(Z);return["block","list-item"].indexOf(K.display)>-1}function $(Z,K,ae){return Z.nodeType===Z.TEXT_NODE?ae.reduce(function(oe,J){return J(Z,oe)},new u.default):Z.nodeType===Z.ELEMENT_NODE?[].reduce.call(Z.childNodes||[],function(oe,J){var ne=$(J,K,ae);return J.nodeType===Z.ELEMENT_NODE&&(ne=K.reduce(function(de,pe){return pe(J,de)},ne),ne=(J[Q]||[]).reduce(function(de,pe){return pe(J,de)},ne)),oe.concat(ne)},new u.default):new u.default}function B(Z,K,ae){return I(ae,Z,!0)}function V(Z,K){var ae=l.default.Attributor.Attribute.keys(Z),oe=l.default.Attributor.Class.keys(Z),J=l.default.Attributor.Style.keys(Z),ne={};return ae.concat(oe).concat(J).forEach(function(de){var pe=l.default.query(de,l.default.Scope.ATTRIBUTE);pe!=null&&(ne[pe.attrName]=pe.value(Z),ne[pe.attrName])||(pe=D[de],pe!=null&&(pe.attrName===de||pe.keyName===de)&&(ne[pe.attrName]=pe.value(Z)||void 0),pe=C[de],pe!=null&&(pe.attrName===de||pe.keyName===de)&&(pe=C[de],ne[pe.attrName]=pe.value(Z)||void 0))}),Object.keys(ne).length>0&&(K=I(K,ne)),K}function W(Z,K){var ae=l.default.query(Z);if(ae==null)return K;if(ae.prototype instanceof l.default.Embed){var oe={},J=ae.value(Z);J!=null&&(oe[ae.blotName]=J,K=new u.default().insert(oe,ae.formats(Z)))}else typeof ae.formats=="function"&&(K=I(K,ae.blotName,ae.formats(Z)));return K}function X(Z,K){return q(K,`
`)||K.insert(`
`),K}function ie(){return new u.default}function re(Z,K){var ae=l.default.query(Z);if(ae==null||ae.blotName!=="list-item"||!q(K,`
`))return K;for(var oe=-1,J=Z.parentNode;!J.classList.contains("ql-clipboard");)(l.default.query(J)||{}).blotName==="list"&&(oe+=1),J=J.parentNode;return oe<=0?K:K.compose(new u.default().retain(K.length()-1).retain(1,{indent:oe}))}function ce(Z,K){return q(K,`
`)||(w(Z)||K.length()>0&&Z.nextSibling&&w(Z.nextSibling))&&K.insert(`
`),K}function Y(Z,K){if(w(Z)&&Z.nextElementSibling!=null&&!q(K,`

`)){var ae=Z.offsetHeight+parseFloat(H(Z).marginTop)+parseFloat(H(Z).marginBottom);Z.nextElementSibling.offsetTop>Z.offsetTop+ae*1.5&&K.insert(`
`)}return K}function le(Z,K){var ae={},oe=Z.style||{};return oe.fontStyle&&H(Z).fontStyle==="italic"&&(ae.italic=!0),oe.fontWeight&&(H(Z).fontWeight.startsWith("bold")||parseInt(H(Z).fontWeight)>=700)&&(ae.bold=!0),Object.keys(ae).length>0&&(K=I(K,ae)),parseFloat(oe.textIndent||0)>0&&(K=new u.default().insert("	").concat(K)),K}function ue(Z,K){var ae=Z.data;if(Z.parentNode.tagName==="O:P")return K.insert(ae.trim());if(ae.trim().length===0&&Z.parentNode.classList.contains("ql-clipboard"))return K;if(!H(Z.parentNode).whiteSpace.startsWith("pre")){var oe=function(ne,de){return de=de.replace(/[^\u00a0]/g,""),de.length<1&&ne?" ":de};ae=ae.replace(/\r\n/g," ").replace(/\n/g," "),ae=ae.replace(/\s\s+/g,oe.bind(oe,!0)),(Z.previousSibling==null&&w(Z.parentNode)||Z.previousSibling!=null&&w(Z.previousSibling))&&(ae=ae.replace(/^\s+/,oe.bind(oe,!1))),(Z.nextSibling==null&&w(Z.parentNode)||Z.nextSibling!=null&&w(Z.nextSibling))&&(ae=ae.replace(/\s+$/,oe.bind(oe,!1)))}return K.insert(ae)}i.default=R,i.matchAttributor=V,i.matchBlot=W,i.matchNewline=ce,i.matchSpacing=Y,i.matchText=ue},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(d,b){for(var f=0;f<b.length;f++){var p=b[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,b,f){return b&&g(d.prototype,b),f&&g(d,f),d}}(),c=function g(d,b,f){d===null&&(d=Function.prototype);var p=Object.getOwnPropertyDescriptor(d,b);if(p===void 0){var j=Object.getPrototypeOf(d);return j===null?void 0:g(j,b,f)}else{if("value"in p)return p.value;var h=p.get;return h===void 0?void 0:h.call(f)}},m=a(6),v=y(m);function y(g){return g&&g.__esModule?g:{default:g}}function x(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function u(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function s(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var l=function(g){s(d,g);function d(){return x(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return o(d,[{key:"optimize",value:function(f){c(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"optimize",this).call(this,f),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return c(d.__proto__||Object.getPrototypeOf(d),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),d}(v.default);l.blotName="bold",l.tagName=["STRONG","B"],i.default=l},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.addControls=i.default=void 0;var o=function(){function _(E,P){var z=[],L=!0,U=!1,G=void 0;try{for(var Q=E[Symbol.iterator](),F;!(L=(F=Q.next()).done)&&(z.push(F.value),!(P&&z.length===P));L=!0);}catch(D){U=!0,G=D}finally{try{!L&&Q.return&&Q.return()}finally{if(U)throw G}}return z}return function(E,P){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return _(E,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function _(E,P){for(var z=0;z<P.length;z++){var L=P[z];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}return function(E,P,z){return P&&_(E.prototype,P),z&&_(E,z),E}}(),m=a(2),v=f(m),y=a(0),x=f(y),u=a(5),s=f(u),l=a(10),g=f(l),d=a(9),b=f(d);function f(_){return _&&_.__esModule?_:{default:_}}function p(_,E,P){return E in _?Object.defineProperty(_,E,{value:P,enumerable:!0,configurable:!0,writable:!0}):_[E]=P,_}function j(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function h(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function N(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var A=(0,g.default)("quill:toolbar"),O=function(_){N(E,_);function E(P,z){j(this,E);var L=h(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,P,z));if(Array.isArray(L.options.container)){var U=document.createElement("div");T(U,L.options.container),P.container.parentNode.insertBefore(U,P.container),L.container=U}else typeof L.options.container=="string"?L.container=document.querySelector(L.options.container):L.container=L.options.container;if(!(L.container instanceof HTMLElement)){var G;return G=A.error("Container required for toolbar",L.options),h(L,G)}return L.container.classList.add("ql-toolbar"),L.controls=[],L.handlers={},Object.keys(L.options.handlers).forEach(function(Q){L.addHandler(Q,L.options.handlers[Q])}),[].forEach.call(L.container.querySelectorAll("button, select"),function(Q){L.attach(Q)}),L.quill.on(s.default.events.EDITOR_CHANGE,function(Q,F){Q===s.default.events.SELECTION_CHANGE&&L.update(F)}),L.quill.on(s.default.events.SCROLL_OPTIMIZE,function(){var Q=L.quill.selection.getRange(),F=o(Q,1),D=F[0];L.update(D)}),L}return c(E,[{key:"addHandler",value:function(z,L){this.handlers[z]=L}},{key:"attach",value:function(z){var L=this,U=[].find.call(z.classList,function(Q){return Q.indexOf("ql-")===0});if(U){if(U=U.slice(3),z.tagName==="BUTTON"&&z.setAttribute("type","button"),this.handlers[U]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[U]==null){A.warn("ignoring attaching to disabled format",U,z);return}if(x.default.query(U)==null){A.warn("ignoring attaching to nonexistent format",U,z);return}}var G=z.tagName==="SELECT"?"change":"click";z.addEventListener(G,function(Q){var F=void 0;if(z.tagName==="SELECT"){if(z.selectedIndex<0)return;var D=z.options[z.selectedIndex];D.hasAttribute("selected")?F=!1:F=D.value||!1}else z.classList.contains("ql-active")?F=!1:F=z.value||!z.hasAttribute("value"),Q.preventDefault();L.quill.focus();var C=L.quill.selection.getRange(),R=o(C,1),I=R[0];if(L.handlers[U]!=null)L.handlers[U].call(L,F);else if(x.default.query(U).prototype instanceof x.default.Embed){if(F=prompt("Enter "+U),!F)return;L.quill.updateContents(new v.default().retain(I.index).delete(I.length).insert(p({},U,F)),s.default.sources.USER)}else L.quill.format(U,F,s.default.sources.USER);L.update(I)}),this.controls.push([U,z])}}},{key:"update",value:function(z){var L=z==null?{}:this.quill.getFormat(z);this.controls.forEach(function(U){var G=o(U,2),Q=G[0],F=G[1];if(F.tagName==="SELECT"){var D=void 0;if(z==null)D=null;else if(L[Q]==null)D=F.querySelector("option[selected]");else if(!Array.isArray(L[Q])){var C=L[Q];typeof C=="string"&&(C=C.replace(/\"/g,'\\"')),D=F.querySelector('option[value="'+C+'"]')}D==null?(F.value="",F.selectedIndex=-1):D.selected=!0}else if(z==null)F.classList.remove("ql-active");else if(F.hasAttribute("value")){var R=L[Q]===F.getAttribute("value")||L[Q]!=null&&L[Q].toString()===F.getAttribute("value")||L[Q]==null&&!F.getAttribute("value");F.classList.toggle("ql-active",R)}else F.classList.toggle("ql-active",L[Q]!=null)})}}]),E}(b.default);O.DEFAULTS={};function S(_,E,P){var z=document.createElement("button");z.setAttribute("type","button"),z.classList.add("ql-"+E),P!=null&&(z.value=P),_.appendChild(z)}function T(_,E){Array.isArray(E[0])||(E=[E]),E.forEach(function(P){var z=document.createElement("span");z.classList.add("ql-formats"),P.forEach(function(L){if(typeof L=="string")S(z,L);else{var U=Object.keys(L)[0],G=L[U];Array.isArray(G)?k(z,U,G):S(z,U,G)}}),_.appendChild(z)})}function k(_,E,P){var z=document.createElement("select");z.classList.add("ql-"+E),P.forEach(function(L){var U=document.createElement("option");L!==!1?U.setAttribute("value",L):U.setAttribute("selected","selected"),z.appendChild(U)}),_.appendChild(z)}O.DEFAULTS={container:null,handlers:{clean:function(){var E=this,P=this.quill.getSelection();if(P!=null)if(P.length==0){var z=this.quill.getFormat();Object.keys(z).forEach(function(L){x.default.query(L,x.default.Scope.INLINE)!=null&&E.quill.format(L,!1)})}else this.quill.removeFormat(P,s.default.sources.USER)},direction:function(E){var P=this.quill.getFormat().align;E==="rtl"&&P==null?this.quill.format("align","right",s.default.sources.USER):!E&&P==="right"&&this.quill.format("align",!1,s.default.sources.USER),this.quill.format("direction",E,s.default.sources.USER)},indent:function(E){var P=this.quill.getSelection(),z=this.quill.getFormat(P),L=parseInt(z.indent||0);if(E==="+1"||E==="-1"){var U=E==="+1"?1:-1;z.direction==="rtl"&&(U*=-1),this.quill.format("indent",L+U,s.default.sources.USER)}},link:function(E){E===!0&&(E=prompt("Enter link URL:")),this.quill.format("link",E,s.default.sources.USER)},list:function(E){var P=this.quill.getSelection(),z=this.quill.getFormat(P);E==="check"?z.list==="checked"||z.list==="unchecked"?this.quill.format("list",!1,s.default.sources.USER):this.quill.format("list","unchecked",s.default.sources.USER):this.quill.format("list",E,s.default.sources.USER)}}},i.default=O,i.addControls=T},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(d,b){for(var f=0;f<b.length;f++){var p=b[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,b,f){return b&&g(d.prototype,b),f&&g(d,f),d}}(),c=function g(d,b,f){d===null&&(d=Function.prototype);var p=Object.getOwnPropertyDescriptor(d,b);if(p===void 0){var j=Object.getPrototypeOf(d);return j===null?void 0:g(j,b,f)}else{if("value"in p)return p.value;var h=p.get;return h===void 0?void 0:h.call(f)}},m=a(28),v=y(m);function y(g){return g&&g.__esModule?g:{default:g}}function x(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function u(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function s(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var l=function(g){s(d,g);function d(b,f){x(this,d);var p=u(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,b));return p.label.innerHTML=f,p.container.classList.add("ql-color-picker"),[].slice.call(p.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),p}return o(d,[{key:"buildItem",value:function(f){var p=c(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"buildItem",this).call(this,f);return p.style.backgroundColor=f.getAttribute("value")||"",p}},{key:"selectItem",value:function(f,p){c(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"selectItem",this).call(this,f,p);var j=this.label.querySelector(".ql-color-label"),h=f&&f.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=h:j.style.fill=h)}}]),d}(v.default);i.default=l},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(d,b){for(var f=0;f<b.length;f++){var p=b[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,b,f){return b&&g(d.prototype,b),f&&g(d,f),d}}(),c=function g(d,b,f){d===null&&(d=Function.prototype);var p=Object.getOwnPropertyDescriptor(d,b);if(p===void 0){var j=Object.getPrototypeOf(d);return j===null?void 0:g(j,b,f)}else{if("value"in p)return p.value;var h=p.get;return h===void 0?void 0:h.call(f)}},m=a(28),v=y(m);function y(g){return g&&g.__esModule?g:{default:g}}function x(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function u(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function s(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var l=function(g){s(d,g);function d(b,f){x(this,d);var p=u(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,b));return p.container.classList.add("ql-icon-picker"),[].forEach.call(p.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=f[j.getAttribute("data-value")||""]}),p.defaultItem=p.container.querySelector(".ql-selected"),p.selectItem(p.defaultItem),p}return o(d,[{key:"selectItem",value:function(f,p){c(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"selectItem",this).call(this,f,p),f=f||this.defaultItem,this.label.innerHTML=f.innerHTML}}]),d}(v.default);i.default=l},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function v(y,x){for(var u=0;u<x.length;u++){var s=x[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(y,s.key,s)}}return function(y,x,u){return x&&v(y.prototype,x),u&&v(y,u),y}}();function c(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}var m=function(){function v(y,x){var u=this;c(this,v),this.quill=y,this.boundsContainer=x||document.body,this.root=y.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return o(v,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(x){var u=x.left+x.width/2-this.root.offsetWidth/2,s=x.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=s+"px",this.root.classList.remove("ql-flip");var l=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),d=0;if(g.right>l.right&&(d=l.right-g.right,this.root.style.left=u+d+"px"),g.left<l.left&&(d=l.left-g.left,this.root.style.left=u+d+"px"),g.bottom>l.bottom){var b=g.bottom-g.top,f=x.bottom-x.top+b;this.root.style.top=s-f+"px",this.root.classList.add("ql-flip")}return d}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),v}();i.default=m},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function k(_,E){var P=[],z=!0,L=!1,U=void 0;try{for(var G=_[Symbol.iterator](),Q;!(z=(Q=G.next()).done)&&(P.push(Q.value),!(E&&P.length===E));z=!0);}catch(F){L=!0,U=F}finally{try{!z&&G.return&&G.return()}finally{if(L)throw U}}return P}return function(_,E){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return k(_,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function k(_,E,P){_===null&&(_=Function.prototype);var z=Object.getOwnPropertyDescriptor(_,E);if(z===void 0){var L=Object.getPrototypeOf(_);return L===null?void 0:k(L,E,P)}else{if("value"in z)return z.value;var U=z.get;return U===void 0?void 0:U.call(P)}},m=function(){function k(_,E){for(var P=0;P<E.length;P++){var z=E[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(_,z.key,z)}}return function(_,E,P){return E&&k(_.prototype,E),P&&k(_,P),_}}(),v=a(3),y=j(v),x=a(8),u=j(x),s=a(43),l=j(s),g=a(27),d=j(g),b=a(15),f=a(41),p=j(f);function j(k){return k&&k.__esModule?k:{default:k}}function h(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")}function N(k,_){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:k}function A(k,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);k.prototype=Object.create(_&&_.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(k,_):k.__proto__=_)}var O=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(k){A(_,k);function _(E,P){h(this,_),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=O);var z=N(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E,P));return z.quill.container.classList.add("ql-snow"),z}return m(_,[{key:"extendToolbar",value:function(P){P.container.classList.add("ql-snow"),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),p.default),this.tooltip=new T(this.quill,this.options.bounds),P.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(z,L){P.handlers.link.call(P,!L.format.link)})}}]),_}(l.default);S.DEFAULTS=(0,y.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){if(_){var E=this.quill.getSelection();if(E==null||E.length==0)return;var P=this.quill.getText(E);/^\S+@\S+\.\S+$/.test(P)&&P.indexOf("mailto:")!==0&&(P="mailto:"+P);var z=this.quill.theme.tooltip;z.edit("link",P)}else this.quill.format("link",!1)}}}}});var T=function(k){A(_,k);function _(E,P){h(this,_);var z=N(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E,P));return z.preview=z.root.querySelector("a.ql-preview"),z}return m(_,[{key:"listen",value:function(){var P=this;c(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(z){P.root.classList.contains("ql-editing")?P.save():P.edit("link",P.preview.textContent),z.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(z){if(P.linkRange!=null){var L=P.linkRange;P.restoreFocus(),P.quill.formatText(L,"link",!1,u.default.sources.USER),delete P.linkRange}z.preventDefault(),P.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(z,L,U){if(z!=null){if(z.length===0&&U===u.default.sources.USER){var G=P.quill.scroll.descendant(d.default,z.index),Q=o(G,2),F=Q[0],D=Q[1];if(F!=null){P.linkRange=new b.Range(z.index-D,F.length());var C=d.default.formats(F.domNode);P.preview.textContent=C,P.preview.setAttribute("href",C),P.show(),P.position(P.quill.getBounds(P.linkRange));return}}else delete P.linkRange;P.hide()}})}},{key:"show",value:function(){c(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),_}(s.BaseTooltip);T.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),i.default=S},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(29),c=J(o),m=a(36),v=a(38),y=a(64),x=a(65),u=J(x),s=a(66),l=J(s),g=a(67),d=J(g),b=a(37),f=a(26),p=a(39),j=a(40),h=a(56),N=J(h),A=a(68),O=J(A),S=a(27),T=J(S),k=a(69),_=J(k),E=a(70),P=J(E),z=a(71),L=J(z),U=a(72),G=J(U),Q=a(73),F=J(Q),D=a(13),C=J(D),R=a(74),I=J(R),H=a(75),q=J(H),w=a(57),$=J(w),B=a(41),V=J(B),W=a(28),X=J(W),ie=a(59),re=J(ie),ce=a(60),Y=J(ce),le=a(61),ue=J(le),Z=a(108),K=J(Z),ae=a(62),oe=J(ae);function J(ne){return ne&&ne.__esModule?ne:{default:ne}}c.default.register({"attributors/attribute/direction":v.DirectionAttribute,"attributors/class/align":m.AlignClass,"attributors/class/background":b.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":v.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":m.AlignStyle,"attributors/style/background":b.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":v.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":j.SizeStyle},!0),c.default.register({"formats/align":m.AlignClass,"formats/direction":v.DirectionClass,"formats/indent":y.IndentClass,"formats/background":b.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":p.FontClass,"formats/size":j.SizeClass,"formats/blockquote":u.default,"formats/code-block":C.default,"formats/header":l.default,"formats/list":d.default,"formats/bold":N.default,"formats/code":D.Code,"formats/italic":O.default,"formats/link":T.default,"formats/script":_.default,"formats/strike":P.default,"formats/underline":L.default,"formats/image":G.default,"formats/video":F.default,"formats/list/item":g.ListItem,"modules/formula":I.default,"modules/syntax":q.default,"modules/toolbar":$.default,"themes/bubble":K.default,"themes/snow":oe.default,"ui/icons":V.default,"ui/picker":X.default,"ui/icon-picker":Y.default,"ui/color-picker":re.default,"ui/tooltip":ue.default},!0),i.default=c.default},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.IndentClass=void 0;var o=function(){function d(b,f){for(var p=0;p<f.length;p++){var j=f[p];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,f,p){return f&&d(b.prototype,f),p&&d(b,p),b}}(),c=function d(b,f,p){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,f);if(j===void 0){var h=Object.getPrototypeOf(b);return h===null?void 0:d(h,f,p)}else{if("value"in j)return j.value;var N=j.get;return N===void 0?void 0:N.call(p)}},m=a(0),v=y(m);function y(d){return d&&d.__esModule?d:{default:d}}function x(d,b){if(!(d instanceof b))throw new TypeError("Cannot call a class as a function")}function u(d,b){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:d}function s(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}var l=function(d){s(b,d);function b(){return x(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"add",value:function(p,j){if(j==="+1"||j==="-1"){var h=this.value(p)||0;j=j==="+1"?h+1:h-1}return j===0?(this.remove(p),!0):c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"add",this).call(this,p,j)}},{key:"canAdd",value:function(p,j){return c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,p,j)||c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,p,parseInt(j))}},{key:"value",value:function(p){return parseInt(c(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,p))||void 0}}]),b}(v.default.Attributor.Class),g=new l("indent","ql-indent",{scope:v.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});i.IndentClass=g},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(4),c=m(o);function m(s){return s&&s.__esModule?s:{default:s}}function v(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function y(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function x(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var u=function(s){x(l,s);function l(){return v(this,l),y(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(c.default);u.blotName="blockquote",u.tagName="blockquote",i.default=u},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function l(g,d){for(var b=0;b<d.length;b++){var f=d[b];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(g,f.key,f)}}return function(g,d,b){return d&&l(g.prototype,d),b&&l(g,b),g}}(),c=a(4),m=v(c);function v(l){return l&&l.__esModule?l:{default:l}}function y(l,g){if(!(l instanceof g))throw new TypeError("Cannot call a class as a function")}function x(l,g){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:l}function u(l,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);l.prototype=Object.create(g&&g.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(l,g):l.__proto__=g)}var s=function(l){u(g,l);function g(){return y(this,g),x(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,null,[{key:"formats",value:function(b){return this.tagName.indexOf(b.tagName)+1}}]),g}(m.default);s.blotName="header",s.tagName=["H1","H2","H3","H4","H5","H6"],i.default=s},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.ListItem=void 0;var o=function(){function h(N,A){for(var O=0;O<A.length;O++){var S=A[O];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,A,O){return A&&h(N.prototype,A),O&&h(N,O),N}}(),c=function h(N,A,O){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,A);if(S===void 0){var T=Object.getPrototypeOf(N);return T===null?void 0:h(T,A,O)}else{if("value"in S)return S.value;var k=S.get;return k===void 0?void 0:k.call(O)}},m=a(0),v=l(m),y=a(4),x=l(y),u=a(25),s=l(u);function l(h){return h&&h.__esModule?h:{default:h}}function g(h,N,A){return N in h?Object.defineProperty(h,N,{value:A,enumerable:!0,configurable:!0,writable:!0}):h[N]=A,h}function d(h,N){if(!(h instanceof N))throw new TypeError("Cannot call a class as a function")}function b(h,N){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:h}function f(h,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);h.prototype=Object.create(N&&N.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(h,N):h.__proto__=N)}var p=function(h){f(N,h);function N(){return d(this,N),b(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return o(N,[{key:"format",value:function(O,S){O===j.blotName&&!S?this.replaceWith(v.default.create(this.statics.scope)):c(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,O,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():c(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(O,S){return this.parent.isolate(this.offset(this.parent),this.length()),O===this.parent.statics.blotName?(this.parent.replaceWith(O,S),this):(this.parent.unwrap(),c(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replaceWith",this).call(this,O,S))}}],[{key:"formats",value:function(O){return O.tagName===this.tagName?void 0:c(N.__proto__||Object.getPrototypeOf(N),"formats",this).call(this,O)}}]),N}(x.default);p.blotName="list-item",p.tagName="LI";var j=function(h){f(N,h),o(N,null,[{key:"create",value:function(O){var S=O==="ordered"?"OL":"UL",T=c(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,S);return(O==="checked"||O==="unchecked")&&T.setAttribute("data-checked",O==="checked"),T}},{key:"formats",value:function(O){if(O.tagName==="OL")return"ordered";if(O.tagName==="UL")return O.hasAttribute("data-checked")?O.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function N(A){d(this,N);var O=b(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,A)),S=function(k){if(k.target.parentNode===A){var _=O.statics.formats(A),E=v.default.find(k.target);_==="checked"?E.format("list","unchecked"):_==="unchecked"&&E.format("list","checked")}};return A.addEventListener("touchstart",S),A.addEventListener("mousedown",S),O}return o(N,[{key:"format",value:function(O,S){this.children.length>0&&this.children.tail.format(O,S)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(O,S){if(O instanceof p)c(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,O,S);else{var T=S==null?this.length():S.offset(this),k=this.split(T);k.parent.insertBefore(O,k)}}},{key:"optimize",value:function(O){c(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,O);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(O){if(O.statics.blotName!==this.statics.blotName){var S=v.default.create(this.statics.defaultChild);O.moveChildren(S),this.appendChild(S)}c(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replace",this).call(this,O)}}]),N}(s.default);j.blotName="list",j.scope=v.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[p],i.ListItem=p,i.default=j},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(56),c=m(o);function m(s){return s&&s.__esModule?s:{default:s}}function v(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function y(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function x(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var u=function(s){x(l,s);function l(){return v(this,l),y(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(c.default);u.blotName="italic",u.tagName=["EM","I"],i.default=u},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function g(d,b){for(var f=0;f<b.length;f++){var p=b[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,b,f){return b&&g(d.prototype,b),f&&g(d,f),d}}(),c=function g(d,b,f){d===null&&(d=Function.prototype);var p=Object.getOwnPropertyDescriptor(d,b);if(p===void 0){var j=Object.getPrototypeOf(d);return j===null?void 0:g(j,b,f)}else{if("value"in p)return p.value;var h=p.get;return h===void 0?void 0:h.call(f)}},m=a(6),v=y(m);function y(g){return g&&g.__esModule?g:{default:g}}function x(g,d){if(!(g instanceof d))throw new TypeError("Cannot call a class as a function")}function u(g,d){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:g}function s(g,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);g.prototype=Object.create(d&&d.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(g,d):g.__proto__=d)}var l=function(g){s(d,g);function d(){return x(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return o(d,null,[{key:"create",value:function(f){return f==="super"?document.createElement("sup"):f==="sub"?document.createElement("sub"):c(d.__proto__||Object.getPrototypeOf(d),"create",this).call(this,f)}},{key:"formats",value:function(f){if(f.tagName==="SUB")return"sub";if(f.tagName==="SUP")return"super"}}]),d}(v.default);l.blotName="script",l.tagName=["SUB","SUP"],i.default=l},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(6),c=m(o);function m(s){return s&&s.__esModule?s:{default:s}}function v(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function y(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function x(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var u=function(s){x(l,s);function l(){return v(this,l),y(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(c.default);u.blotName="strike",u.tagName="S",i.default=u},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=a(6),c=m(o);function m(s){return s&&s.__esModule?s:{default:s}}function v(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function y(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function x(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var u=function(s){x(l,s);function l(){return v(this,l),y(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return l}(c.default);u.blotName="underline",u.tagName="U",i.default=u},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function b(f,p){for(var j=0;j<p.length;j++){var h=p[j];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,p,j){return p&&b(f.prototype,p),j&&b(f,j),f}}(),c=function b(f,p,j){f===null&&(f=Function.prototype);var h=Object.getOwnPropertyDescriptor(f,p);if(h===void 0){var N=Object.getPrototypeOf(f);return N===null?void 0:b(N,p,j)}else{if("value"in h)return h.value;var A=h.get;return A===void 0?void 0:A.call(j)}},m=a(0),v=x(m),y=a(27);function x(b){return b&&b.__esModule?b:{default:b}}function u(b,f){if(!(b instanceof f))throw new TypeError("Cannot call a class as a function")}function s(b,f){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:b}function l(b,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}var g=["alt","height","width"],d=function(b){l(f,b);function f(){return u(this,f),s(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return o(f,[{key:"format",value:function(j,h){g.indexOf(j)>-1?h?this.domNode.setAttribute(j,h):this.domNode.removeAttribute(j):c(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,j,h)}}],[{key:"create",value:function(j){var h=c(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,j);return typeof j=="string"&&h.setAttribute("src",this.sanitize(j)),h}},{key:"formats",value:function(j){return g.reduce(function(h,N){return j.hasAttribute(N)&&(h[N]=j.getAttribute(N)),h},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,y.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),f}(v.default.Embed);d.blotName="image",d.tagName="IMG",i.default=d},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function b(f,p){for(var j=0;j<p.length;j++){var h=p[j];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,p,j){return p&&b(f.prototype,p),j&&b(f,j),f}}(),c=function b(f,p,j){f===null&&(f=Function.prototype);var h=Object.getOwnPropertyDescriptor(f,p);if(h===void 0){var N=Object.getPrototypeOf(f);return N===null?void 0:b(N,p,j)}else{if("value"in h)return h.value;var A=h.get;return A===void 0?void 0:A.call(j)}},m=a(4),v=a(27),y=x(v);function x(b){return b&&b.__esModule?b:{default:b}}function u(b,f){if(!(b instanceof f))throw new TypeError("Cannot call a class as a function")}function s(b,f){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:b}function l(b,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);b.prototype=Object.create(f&&f.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(b,f):b.__proto__=f)}var g=["height","width"],d=function(b){l(f,b);function f(){return u(this,f),s(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return o(f,[{key:"format",value:function(j,h){g.indexOf(j)>-1?h?this.domNode.setAttribute(j,h):this.domNode.removeAttribute(j):c(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,j,h)}}],[{key:"create",value:function(j){var h=c(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,j);return h.setAttribute("frameborder","0"),h.setAttribute("allowfullscreen",!0),h.setAttribute("src",this.sanitize(j)),h}},{key:"formats",value:function(j){return g.reduce(function(h,N){return j.hasAttribute(N)&&(h[N]=j.getAttribute(N)),h},{})}},{key:"sanitize",value:function(j){return y.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),f}(m.BlockEmbed);d.blotName="video",d.className="ql-video",d.tagName="IFRAME",i.default=d},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.FormulaBlot=void 0;var o=function(){function j(h,N){for(var A=0;A<N.length;A++){var O=N[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(h,O.key,O)}}return function(h,N,A){return N&&j(h.prototype,N),A&&j(h,A),h}}(),c=function j(h,N,A){h===null&&(h=Function.prototype);var O=Object.getOwnPropertyDescriptor(h,N);if(O===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:j(S,N,A)}else{if("value"in O)return O.value;var T=O.get;return T===void 0?void 0:T.call(A)}},m=a(35),v=l(m),y=a(5),x=l(y),u=a(9),s=l(u);function l(j){return j&&j.__esModule?j:{default:j}}function g(j,h){if(!(j instanceof h))throw new TypeError("Cannot call a class as a function")}function d(j,h){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:j}function b(j,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);j.prototype=Object.create(h&&h.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(j,h):j.__proto__=h)}var f=function(j){b(h,j);function h(){return g(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return o(h,null,[{key:"create",value:function(A){var O=c(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,A);return typeof A=="string"&&(window.katex.render(A,O,{throwOnError:!1,errorColor:"#f00"}),O.setAttribute("data-value",A)),O}},{key:"value",value:function(A){return A.getAttribute("data-value")}}]),h}(v.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var p=function(j){b(h,j),o(h,null,[{key:"register",value:function(){x.default.register(f,!0)}}]);function h(){g(this,h);var N=d(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return N}return h}(s.default);i.FormulaBlot=f,i.default=p},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.CodeToken=i.CodeBlock=void 0;var o=function(){function A(O,S){for(var T=0;T<S.length;T++){var k=S[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(O,k.key,k)}}return function(O,S,T){return S&&A(O.prototype,S),T&&A(O,T),O}}(),c=function A(O,S,T){O===null&&(O=Function.prototype);var k=Object.getOwnPropertyDescriptor(O,S);if(k===void 0){var _=Object.getPrototypeOf(O);return _===null?void 0:A(_,S,T)}else{if("value"in k)return k.value;var E=k.get;return E===void 0?void 0:E.call(T)}},m=a(0),v=d(m),y=a(5),x=d(y),u=a(9),s=d(u),l=a(13),g=d(l);function d(A){return A&&A.__esModule?A:{default:A}}function b(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}function f(A,O){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:A}function p(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);A.prototype=Object.create(O&&O.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(A,O):A.__proto__=O)}var j=function(A){p(O,A);function O(){return b(this,O),f(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return o(O,[{key:"replaceWith",value:function(T){this.domNode.textContent=this.domNode.textContent,this.attach(),c(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replaceWith",this).call(this,T)}},{key:"highlight",value:function(T){var k=this.domNode.textContent;this.cachedText!==k&&((k.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=T(k),this.domNode.normalize(),this.attach()),this.cachedText=k)}}]),O}(g.default);j.className="ql-syntax";var h=new v.default.Attributor.Class("token","hljs",{scope:v.default.Scope.INLINE}),N=function(A){p(O,A),o(O,null,[{key:"register",value:function(){x.default.register(h,!0),x.default.register(j,!0)}}]);function O(S,T){b(this,O);var k=f(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,S,T));if(typeof k.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var _=null;return k.quill.on(x.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(_),_=setTimeout(function(){k.highlight(),_=null},k.options.interval)}),k.highlight(),k}return o(O,[{key:"highlight",value:function(){var T=this;if(!this.quill.selection.composing){this.quill.update(x.default.sources.USER);var k=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(_){_.highlight(T.options.highlight)}),this.quill.update(x.default.sources.SILENT),k!=null&&this.quill.setSelection(k,x.default.sources.SILENT)}}}]),O}(s.default);N.DEFAULTS={highlight:function(){return window.hljs==null?null:function(A){var O=window.hljs.highlightAuto(A);return O.value}}(),interval:1e3},i.CodeBlock=j,i.CodeToken=h,i.default=N},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,i){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,i){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,i){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,i){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,i){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,i,a){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BubbleTooltip=void 0;var o=function O(S,T,k){S===null&&(S=Function.prototype);var _=Object.getOwnPropertyDescriptor(S,T);if(_===void 0){var E=Object.getPrototypeOf(S);return E===null?void 0:O(E,T,k)}else{if("value"in _)return _.value;var P=_.get;return P===void 0?void 0:P.call(k)}},c=function(){function O(S,T){for(var k=0;k<T.length;k++){var _=T[k];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}return function(S,T,k){return T&&O(S.prototype,T),k&&O(S,k),S}}(),m=a(3),v=b(m),y=a(8),x=b(y),u=a(43),s=b(u),l=a(15),g=a(41),d=b(g);function b(O){return O&&O.__esModule?O:{default:O}}function f(O,S){if(!(O instanceof S))throw new TypeError("Cannot call a class as a function")}function p(O,S){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:O}function j(O,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(O,S):O.__proto__=S)}var h=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],N=function(O){j(S,O);function S(T,k){f(this,S),k.modules.toolbar!=null&&k.modules.toolbar.container==null&&(k.modules.toolbar.container=h);var _=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,T,k));return _.quill.container.classList.add("ql-bubble"),_}return c(S,[{key:"extendToolbar",value:function(k){this.tooltip=new A(this.quill,this.options.bounds),this.tooltip.root.appendChild(k.container),this.buildButtons([].slice.call(k.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(k.container.querySelectorAll("select")),d.default)}}]),S}(s.default);N.DEFAULTS=(0,v.default)(!0,{},s.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var A=function(O){j(S,O);function S(T,k){f(this,S);var _=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,T,k));return _.quill.on(x.default.events.EDITOR_CHANGE,function(E,P,z,L){if(E===x.default.events.SELECTION_CHANGE)if(P!=null&&P.length>0&&L===x.default.sources.USER){_.show(),_.root.style.left="0px",_.root.style.width="",_.root.style.width=_.root.offsetWidth+"px";var U=_.quill.getLines(P.index,P.length);if(U.length===1)_.position(_.quill.getBounds(P));else{var G=U[U.length-1],Q=_.quill.getIndex(G),F=Math.min(G.length()-1,P.index+P.length-Q),D=_.quill.getBounds(new l.Range(Q,F));_.position(D)}}else document.activeElement!==_.textbox&&_.quill.hasFocus()&&_.hide()}),_}return c(S,[{key:"listen",value:function(){var k=this;o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){k.root.classList.remove("ql-editing")}),this.quill.on(x.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!k.root.classList.contains("ql-hidden")){var _=k.quill.getSelection();_!=null&&k.position(k.quill.getBounds(_))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(k){var _=o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,k),E=this.root.querySelector(".ql-tooltip-arrow");if(E.style.marginLeft="",_===0)return _;E.style.marginLeft=-1*_-E.offsetWidth/2+"px"}}]),S}(u.BaseTooltip);A.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),i.BubbleTooltip=A,i.default=N},function(t,i,a){t.exports=a(63)}]).default})})(Fa);var Ha=Fa.exports;const st=yn(Ha);var Ep=Ge&&Ge.__extends||function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)a.hasOwnProperty(o)&&(i[o]=a[o])},e(n,t)};return function(n,t){e(n,t);function i(){this.constructor=n}n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),gr=Ge&&Ge.__assign||function(){return gr=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gr.apply(this,arguments)},Sp=Ge&&Ge.__spreadArrays||function(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var i=Array(e),a=0,n=0;n<t;n++)for(var o=arguments[n],c=0,m=o.length;c<m;c++,a++)i[a]=o[c];return i},Mr=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ke=Mr(M),Op=Mr(es),zt=Mr(kp),mi=Mr(Ha),Cp=function(e){Ep(n,e);function n(t){var i=e.call(this,t)||this;i.dirtyProps=["modules","formats","bounds","theme","children"],i.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],i.state={generation:0},i.selection=null,i.onEditorChange=function(o,c,m,v){var y,x,u,s;o==="text-change"?(x=(y=i).onEditorChangeText)===null||x===void 0||x.call(y,i.editor.root.innerHTML,c,v,i.unprivilegedEditor):o==="selection-change"&&((s=(u=i).onEditorChangeSelection)===null||s===void 0||s.call(u,c,v,i.unprivilegedEditor))};var a=i.isControlled()?t.value:t.defaultValue;return i.value=a??"",i}return n.prototype.validateProps=function(t){var i;if(Ke.default.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Ke.default.Children.count(t.children)){var a=Ke.default.Children.only(t.children);if(((i=a)===null||i===void 0?void 0:i.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},n.prototype.shouldComponentUpdate=function(t,i){var a=this,o;if(this.validateProps(t),!this.editor||this.state.generation!==i.generation)return!0;if("value"in t){var c=this.getEditorContents(),m=(o=t.value,o??"");this.isEqualValue(m,c)||this.setEditorContents(this.editor,m)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),Sp(this.cleanProps,this.dirtyProps).some(function(v){return!zt.default(t[v],a.props[v])})},n.prototype.shouldComponentRegenerate=function(t){var i=this;return this.dirtyProps.some(function(a){return!zt.default(t[a],i.props[a])})},n.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},n.prototype.componentWillUnmount=function(){this.destroyEditor()},n.prototype.componentDidUpdate=function(t,i){var a=this;if(this.editor&&this.shouldComponentRegenerate(t)){var o=this.editor.getContents(),c=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:c},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==i.generation){var m=this.regenerationSnapshot,o=m.delta,v=m.selection;delete this.regenerationSnapshot,this.instantiateEditor();var y=this.editor;y.setContents(o),gi(function(){return a.setEditorSelection(y,v)})}},n.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},n.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},n.prototype.isControlled=function(){return"value"in this.props},n.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},n.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},n.prototype.createEditor=function(t,i){var a=new mi.default(t,i);return i.tabIndex!=null&&this.setEditorTabIndex(a,i.tabIndex),this.hookEditor(a),a},n.prototype.hookEditor=function(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)},n.prototype.unhookEditor=function(t){t.off("editor-change",this.onEditorChange)},n.prototype.getEditorContents=function(){return this.value},n.prototype.getEditorSelection=function(){return this.selection},n.prototype.isDelta=function(t){return t&&t.ops},n.prototype.isEqualValue=function(t,i){return this.isDelta(t)&&this.isDelta(i)?zt.default(t.ops,i.ops):zt.default(t,i)},n.prototype.setEditorContents=function(t,i){var a=this;this.value=i;var o=this.getEditorSelection();typeof i=="string"?t.setContents(t.clipboard.convert(i)):t.setContents(i),gi(function(){return a.setEditorSelection(t,o)})},n.prototype.setEditorSelection=function(t,i){if(this.selection=i,i){var a=t.getLength();i.index=Math.max(0,Math.min(i.index,a-1)),i.length=Math.max(0,Math.min(i.length,a-1-i.index)),t.setSelection(i)}},n.prototype.setEditorTabIndex=function(t,i){var a,o;!((o=(a=t)===null||a===void 0?void 0:a.scroll)===null||o===void 0)&&o.domNode&&(t.scroll.domNode.tabIndex=i)},n.prototype.setEditorReadOnly=function(t,i){i?t.disable():t.enable()},n.prototype.makeUnprivilegedEditor=function(t){var i=t;return{getHTML:function(){return i.root.innerHTML},getLength:i.getLength.bind(i),getText:i.getText.bind(i),getContents:i.getContents.bind(i),getSelection:i.getSelection.bind(i),getBounds:i.getBounds.bind(i)}},n.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var t=Op.default.findDOMNode(this.editingArea);if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t},n.prototype.renderEditingArea=function(){var t=this,i=this.props,a=i.children,o=i.preserveWhitespace,c=this.state.generation,m={key:c,ref:function(v){t.editingArea=v}};return Ke.default.Children.count(a)?Ke.default.cloneElement(Ke.default.Children.only(a),m):o?Ke.default.createElement("pre",gr({},m)):Ke.default.createElement("div",gr({},m))},n.prototype.render=function(){var t;return Ke.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(t=this.props.className,t??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},n.prototype.onEditorChangeText=function(t,i,a,o){var c,m;if(this.editor){var v=this.isDelta(this.value)?o.getContents():o.getHTML();v!==this.getEditorContents()&&(this.lastDeltaChangeSet=i,this.value=v,(m=(c=this.props).onChange)===null||m===void 0||m.call(c,t,i,a,o))}},n.prototype.onEditorChangeSelection=function(t,i,a){var o,c,m,v,y,x;if(this.editor){var u=this.getEditorSelection(),s=!u&&t,l=u&&!t;zt.default(t,u)||(this.selection=t,(c=(o=this.props).onChangeSelection)===null||c===void 0||c.call(o,t,i,a),s?(v=(m=this.props).onFocus)===null||v===void 0||v.call(m,t,i,a):l&&((x=(y=this.props).onBlur)===null||x===void 0||x.call(y,u,i,a)))}},n.prototype.focus=function(){this.editor&&this.editor.focus()},n.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},n.displayName="React Quill",n.Quill=mi.default,n.defaultProps={theme:"snow",modules:{},readOnly:!1},n}(Ke.default.Component);function gi(e){Promise.resolve().then(e)}var Bt=Cp;const Ap=yn(Bt);function vi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,i)}return t}function bi(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?vi(Object(t),!0).forEach(function(i){on(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vi(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function Ua(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function xi(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ga(e,n,t){return n&&xi(e.prototype,n),t&&xi(e,t),e}function on(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function vr(){return vr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vr.apply(this,arguments)}function zp(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&sn(e,n)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lt(e)}function sn(e,n){return sn=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},sn(e,n)}function Pp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ln(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tp(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ln(e)}function Ip(e){var n=Pp();return function(){var i=lt(e),a;if(n){var o=lt(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return Tp(this,a)}}function Mp(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=lt(e),e!==null););return e}function vt(){return typeof Reflect<"u"&&Reflect.get?vt=Reflect.get:vt=function(n,t,i){var a=Mp(n,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?n:i):o.value}},vt.apply(this,arguments)}function Lp(e,n){if(e){if(typeof e=="string")return yi(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yi(e,n)}}function yi(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function Rp(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Lp(e))||n&&e&&typeof e.length=="number"){t&&(e=t);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(v){throw v},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,c=!1,m;return{s:function(){t=t.call(e)},n:function(){var v=t.next();return o=v.done,v},e:function(v){c=!0,m=v},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(c)throw m}}}}var et={TAB:9,ENTER:13,ESCAPE:27,UP:38,DOWN:40};function $p(e,n,t){var i=e;return Object.keys(n).forEach(function(a){t.indexOf(a)>-1?i.dataset[a]=n[a]:delete i.dataset[a]}),i}function Dp(e,n,t,i){return n.reduce(function(a,o){var c;if(t&&i){var m=new RegExp("^".concat(o,"|\\s").concat(o),"g"),v=(e.match(m)||[]).pop();if(!v)return{mentionChar:a.mentionChar,mentionCharIndex:a.mentionCharIndex};c=v!==o?e.lastIndexOf(v)+v.length-o.length:0}else c=e.lastIndexOf(o);return c>a.mentionCharIndex?{mentionChar:o,mentionCharIndex:c}:{mentionChar:a.mentionChar,mentionCharIndex:a.mentionCharIndex}},{mentionChar:null,mentionCharIndex:-1})}function qp(e,n){return n.test(e)}function Bp(e,n,t,i){if(e===-1)return!1;if(!t)return!0;var a=e?n[e-1]:i;return!a||!!a.match(/\s/)}var Fp=st.import("blots/embed"),Lr=function(e){zp(t,e);var n=Ip(t);function t(i,a){var o;return Ua(this,t),o=n.call(this,i,a),on(ln(o),"hoverHandler",void 0),on(ln(o),"hoverHandler",void 0),o.clickHandler=null,o.hoverHandler=null,o.mounted=!1,o}return Ga(t,[{key:"attach",value:function(){vt(lt(t.prototype),"attach",this).call(this),this.mounted||(this.mounted=!0,this.clickHandler=this.getClickHandler(),this.hoverHandler=this.getHoverHandler(),this.domNode.addEventListener("click",this.clickHandler,!1),this.domNode.addEventListener("mouseenter",this.hoverHandler,!1))}},{key:"detach",value:function(){vt(lt(t.prototype),"detach",this).call(this),this.mounted=!1,this.clickHandler&&(this.domNode.removeEventListener("click",this.clickHandler),this.clickHandler=null)}},{key:"getClickHandler",value:function(){var a=this;return function(o){var c=a.buildEvent("mention-clicked",o);window.dispatchEvent(c),o.preventDefault()}}},{key:"getHoverHandler",value:function(){var a=this;return function(o){var c=a.buildEvent("mention-hovered",o);window.dispatchEvent(c),o.preventDefault()}}},{key:"buildEvent",value:function(a,o){var c=new Event(a,{bubbles:!0,cancelable:!0});return c.value=vr({},this.domNode.dataset),c.event=o,c}}],[{key:"create",value:function(a){var o=vt(lt(t),"create",this).call(this),c=document.createElement("span");return c.className="ql-mention-denotation-char",c.innerHTML=a.denotationChar,o.appendChild(c),o.innerHTML+=a.value,t.setDataValues(o,a)}},{key:"setDataValues",value:function(a,o){var c=a;return Object.keys(o).forEach(function(m){c.dataset[m]=o[m]}),c}},{key:"value",value:function(a){return a.dataset}}]),t}(Fp);Lr.blotName="mention";Lr.tagName="span";Lr.className="mention";st.register(Lr);var Hp=function(){function e(n,t){var i=this;Ua(this,e),this.isOpen=!1,this.itemIndex=0,this.mentionCharPos=null,this.cursorPos=null,this.values=[],this.suspendMouseEnter=!1,this.existingSourceExecutionToken=null,this.quill=n,this.options={source:null,renderItem:function(y){return"".concat(y.value)},renderLoading:function(){return null},onSelect:function(y,x){x(y)},mentionDenotationChars:["@"],showDenotationChar:!0,allowedChars:/^[a-zA-Z0-9_]*$/,minChars:0,maxChars:31,offsetTop:2,offsetLeft:0,isolateCharacter:!1,allowInlineMentionChar:!1,fixMentionsToQuill:!1,positioningStrategy:"normal",defaultMenuOrientation:"bottom",blotName:"mention",dataAttributes:["id","value","denotationChar","link","target","disabled"],linkTarget:"_blank",onOpen:function(){return!0},onBeforeClose:function(){return!0},onClose:function(){return!0},listItemClass:"ql-mention-list-item",mentionContainerClass:"ql-mention-list-container",mentionListClass:"ql-mention-list",spaceAfterInsert:!0,selectKeys:[et.ENTER]},vr(this.options,t,{dataAttributes:Array.isArray(t.dataAttributes)?this.options.dataAttributes.concat(t.dataAttributes):this.options.dataAttributes});for(var a in this.options)typeof this.options[a]=="function"&&(this.options[a]=this.options[a].bind(this));this.mentionContainer=document.createElement("div"),this.mentionContainer.className=this.options.mentionContainerClass?this.options.mentionContainerClass:"",this.mentionContainer.style.cssText="display: none; position: absolute;",this.mentionContainer.onmousemove=this.onContainerMouseMove.bind(this),this.options.fixMentionsToQuill&&(this.mentionContainer.style.width="auto"),this.mentionList=document.createElement("ul"),this.mentionList.id="quill-mention-list",n.root.setAttribute("aria-owns","quill-mention-list"),this.mentionList.className=this.options.mentionListClass?this.options.mentionListClass:"",this.mentionContainer.appendChild(this.mentionList),n.on("text-change",this.onTextChange.bind(this)),n.on("selection-change",this.onSelectionChange.bind(this)),n.container.addEventListener("paste",function(){setTimeout(function(){var v=n.getSelection();i.onSelectionChange(v)})}),n.keyboard.addBinding({key:et.TAB},this.selectHandler.bind(this)),n.keyboard.bindings[et.TAB].unshift(n.keyboard.bindings[et.TAB].pop());var o=Rp(this.options.selectKeys),c;try{for(o.s();!(c=o.n()).done;){var m=c.value;n.keyboard.addBinding({key:m},this.selectHandler.bind(this))}}catch(v){o.e(v)}finally{o.f()}n.keyboard.bindings[et.ENTER].unshift(n.keyboard.bindings[et.ENTER].pop()),n.keyboard.addBinding({key:et.ESCAPE},this.escapeHandler.bind(this)),n.keyboard.addBinding({key:et.UP},this.upHandler.bind(this)),n.keyboard.addBinding({key:et.DOWN},this.downHandler.bind(this))}return Ga(e,[{key:"selectHandler",value:function(){return this.isOpen&&!this.existingSourceExecutionToken?(this.selectItem(),!1):!0}},{key:"escapeHandler",value:function(){return this.isOpen?(this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList(),!1):!0}},{key:"upHandler",value:function(){return this.isOpen&&!this.existingSourceExecutionToken?(this.prevItem(),!1):!0}},{key:"downHandler",value:function(){return this.isOpen&&!this.existingSourceExecutionToken?(this.nextItem(),!1):!0}},{key:"showMentionList",value:function(){this.options.positioningStrategy==="fixed"?document.body.appendChild(this.mentionContainer):this.quill.container.appendChild(this.mentionContainer),this.mentionContainer.style.visibility="hidden",this.mentionContainer.style.display="",this.mentionContainer.scrollTop=0,this.setMentionContainerPosition(),this.setIsOpen(!0)}},{key:"hideMentionList",value:function(){this.options.onBeforeClose(),this.mentionContainer.style.display="none",this.mentionContainer.remove(),this.setIsOpen(!1),this.quill.root.removeAttribute("aria-activedescendant")}},{key:"highlightItem",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=0;i<this.mentionList.childNodes.length;i+=1)this.mentionList.childNodes[i].classList.remove("selected");if(!(this.itemIndex===-1||this.mentionList.childNodes[this.itemIndex].dataset.disabled==="true")&&(this.mentionList.childNodes[this.itemIndex].classList.add("selected"),this.quill.root.setAttribute("aria-activedescendant",this.mentionList.childNodes[this.itemIndex].id),t)){var a=this.mentionList.childNodes[this.itemIndex].offsetHeight,o=this.mentionList.childNodes[this.itemIndex].offsetTop,c=this.mentionContainer.scrollTop,m=c+this.mentionContainer.offsetHeight;o<c?this.mentionContainer.scrollTop=o:o>m-a&&(this.mentionContainer.scrollTop+=o-m+a)}}},{key:"getItemData",value:function(){var t=this.mentionList.childNodes[this.itemIndex].dataset.link,i=typeof t<"u",a=this.mentionList.childNodes[this.itemIndex].dataset.target;return i&&(this.mentionList.childNodes[this.itemIndex].dataset.value='<a href="'.concat(t,'" target=').concat(a||this.options.linkTarget,">").concat(this.mentionList.childNodes[this.itemIndex].dataset.value)),this.mentionList.childNodes[this.itemIndex].dataset}},{key:"onContainerMouseMove",value:function(){this.suspendMouseEnter=!1}},{key:"selectItem",value:function(){var t=this;if(this.itemIndex!==-1){var i=this.getItemData();i.disabled||(this.options.onSelect(i,function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.insertItem(a,o,c)}),this.hideMentionList())}}},{key:"insertItem",value:function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=t;if(o!==null){var c=bi(bi({},this.options),a);c.showDenotationChar||(o.denotationChar="");var m;i?m=this.cursorPos:(m=this.mentionCharPos,this.quill.deleteText(this.mentionCharPos,this.cursorPos-this.mentionCharPos,st.sources.USER));var v=this.quill.insertEmbed(m,c.blotName,o,st.sources.USER);return c.spaceAfterInsert?(this.quill.insertText(m+1," ",st.sources.USER),this.quill.setSelection(m+2,st.sources.USER)):this.quill.setSelection(m+1,st.sources.USER),this.hideMentionList(),v}}},{key:"onItemMouseEnter",value:function(t){if(!this.suspendMouseEnter){var i=Number(t.target.dataset.index);!Number.isNaN(i)&&i!==this.itemIndex&&(this.itemIndex=i,this.highlightItem(!1))}}},{key:"onDisabledItemMouseEnter",value:function(t){this.suspendMouseEnter||(this.itemIndex=-1,this.highlightItem(!1))}},{key:"onItemClick",value:function(t){t.button===0&&(t.preventDefault(),t.stopImmediatePropagation(),this.itemIndex=t.currentTarget.dataset.index,this.highlightItem(),this.selectItem())}},{key:"onItemMouseDown",value:function(t){t.preventDefault(),t.stopImmediatePropagation()}},{key:"renderLoading",value:function(){var t=this.options.renderLoading();if(t){if(this.mentionContainer.getElementsByClassName("ql-mention-loading").length>0){this.showMentionList();return}this.mentionList.innerHTML="";var i=document.createElement("div");i.className="ql-mention-loading",i.innerHTML=this.options.renderLoading(),this.mentionContainer.append(i),this.showMentionList()}}},{key:"removeLoading",value:function(){var t=this.mentionContainer.getElementsByClassName("ql-mention-loading");t.length>0&&t[0].remove()}},{key:"renderList",value:function(t,i,a){if(i&&i.length>0){this.removeLoading(),this.values=i,this.mentionList.innerHTML="";for(var o=-1,c=0;c<i.length;c+=1){var m=document.createElement("li");m.id="quill-mention-item-"+c,m.className=this.options.listItemClass?this.options.listItemClass:"",i[c].disabled?(m.className+=" disabled",m.setAttribute("aria-hidden","true")):o===-1&&(o=c),m.dataset.index=c,m.innerHTML=this.options.renderItem(i[c],a),i[c].disabled?m.onmouseenter=this.onDisabledItemMouseEnter.bind(this):(m.onmouseenter=this.onItemMouseEnter.bind(this),m.onmouseup=this.onItemClick.bind(this),m.onmousedown=this.onItemMouseDown.bind(this)),m.dataset.denotationChar=t,this.mentionList.appendChild($p(m,i[c],this.options.dataAttributes))}this.itemIndex=o,this.highlightItem(),this.showMentionList()}else this.hideMentionList()}},{key:"nextItem",value:function(){var t=0,i;do{t++,i=(this.itemIndex+t)%this.values.length;var a=this.mentionList.childNodes[i].dataset.disabled==="true";if(t===this.values.length+1){i=-1;break}}while(a);this.itemIndex=i,this.suspendMouseEnter=!0,this.highlightItem()}},{key:"prevItem",value:function(){var t=0,i;do{t++,i=(this.itemIndex+this.values.length-t)%this.values.length;var a=this.mentionList.childNodes[i].dataset.disabled==="true";if(t===this.values.length+1){i=-1;break}}while(a);this.itemIndex=i,this.suspendMouseEnter=!0,this.highlightItem()}},{key:"containerBottomIsNotVisible",value:function(t,i){var a=t+this.mentionContainer.offsetHeight+i.top;return a>window.pageYOffset+window.innerHeight}},{key:"containerRightIsNotVisible",value:function(t,i){if(this.options.fixMentionsToQuill)return!1;var a=t+this.mentionContainer.offsetWidth+i.left,o=window.pageXOffset+document.documentElement.clientWidth;return a>o}},{key:"setIsOpen",value:function(t){this.isOpen!==t&&(t?this.options.onOpen():this.options.onClose(),this.isOpen=t)}},{key:"setMentionContainerPosition",value:function(){this.options.positioningStrategy==="fixed"?this.setMentionContainerPosition_Fixed():this.setMentionContainerPosition_Normal()}},{key:"setMentionContainerPosition_Normal",value:function(){var t=this,i=this.quill.container.getBoundingClientRect(),a=this.quill.getBounds(this.mentionCharPos),o=this.mentionContainer.offsetHeight,c=this.options.offsetTop,m=this.options.offsetLeft;if(this.options.fixMentionsToQuill){var v=0;this.mentionContainer.style.right="".concat(v,"px")}else m+=a.left;if(this.containerRightIsNotVisible(m,i)){var y=this.mentionContainer.offsetWidth+this.options.offsetLeft,x=i.width;m=x-y}if(this.options.defaultMenuOrientation==="top"){if(this.options.fixMentionsToQuill?c=-1*(o+this.options.offsetTop):c=a.top-(o+this.options.offsetTop),c+i.top<=0){var u=this.options.offsetTop;this.options.fixMentionsToQuill?u+=i.height:u+=a.bottom,c=u}}else if(this.options.fixMentionsToQuill?c+=i.height:c+=a.bottom,this.containerBottomIsNotVisible(c,i)){var s=this.options.offsetTop*-1;this.options.fixMentionsToQuill||(s+=a.top),c=s-o}c>=0?this.options.mentionContainerClass.split(" ").forEach(function(l){t.mentionContainer.classList.add("".concat(l,"-bottom")),t.mentionContainer.classList.remove("".concat(l,"-top"))}):this.options.mentionContainerClass.split(" ").forEach(function(l){t.mentionContainer.classList.add("".concat(l,"-top")),t.mentionContainer.classList.remove("".concat(l,"-bottom"))}),this.mentionContainer.style.top="".concat(c,"px"),this.mentionContainer.style.left="".concat(m,"px"),this.mentionContainer.style.visibility="visible"}},{key:"setMentionContainerPosition_Fixed",value:function(){var t=this;this.mentionContainer.style.position="fixed",this.mentionContainer.style.height=null;var i=this.quill.container.getBoundingClientRect(),a=this.quill.getBounds(this.mentionCharPos),o={left:i.left+a.left,top:i.top+a.top,width:0,height:a.height},c=this.options.fixMentionsToQuill?i:o,m=this.options.offsetTop,v=this.options.offsetLeft;if(this.options.fixMentionsToQuill){var y=c.right;this.mentionContainer.style.right="".concat(y,"px")}else v+=c.left,v+this.mentionContainer.offsetWidth>document.documentElement.clientWidth&&(v-=v+this.mentionContainer.offsetWidth-document.documentElement.clientWidth);var x=c.top,u=document.documentElement.clientHeight-(c.top+c.height),s=this.mentionContainer.offsetHeight<=u,l=this.mentionContainer.offsetHeight<=x,g;this.options.defaultMenuOrientation==="top"&&l?g="top":this.options.defaultMenuOrientation==="bottom"&&s?g="bottom":g=u>x?"bottom":"top",g==="bottom"?(m=c.top+c.height,s||(this.mentionContainer.style.height=u-3+"px"),this.options.mentionContainerClass.split(" ").forEach(function(d){t.mentionContainer.classList.add("".concat(d,"-bottom")),t.mentionContainer.classList.remove("".concat(d,"-top"))})):(m=c.top-this.mentionContainer.offsetHeight,l||(this.mentionContainer.style.height=x-3+"px",m=3),this.options.mentionContainerClass.split(" ").forEach(function(d){t.mentionContainer.classList.add("".concat(d,"-top")),t.mentionContainer.classList.remove("".concat(d,"-bottom"))})),this.mentionContainer.style.top="".concat(m,"px"),this.mentionContainer.style.left="".concat(v,"px"),this.mentionContainer.style.visibility="visible"}},{key:"getTextBeforeCursor",value:function(){var t=Math.max(0,this.cursorPos-this.options.maxChars),i=this.quill.getText(t,this.cursorPos-t);return i}},{key:"onSomethingChange",value:function(){var t=this,i=this.quill.getSelection();if(i!=null){this.cursorPos=i.index;var a=this.getTextBeforeCursor(),o=Math.max(0,this.cursorPos-this.options.maxChars),c=o?this.quill.getText(o-1,o):"",m=Dp(a,this.options.mentionDenotationChars,this.options.isolateCharacter,this.options.allowInlineMentionChar),v=m.mentionChar,y=m.mentionCharIndex;if(Bp(y,a,this.options.isolateCharacter,c)){var x=this.cursorPos-(a.length-y);this.mentionCharPos=x;var u=a.substring(y+v.length);if(u.length>=this.options.minChars&&qp(u,this.getAllowedCharsRegex(v))){this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.renderLoading();var s={abandoned:!1};this.existingSourceExecutionToken=s,this.options.source(u,function(l,g){s.abandoned||(t.existingSourceExecutionToken=null,t.renderList(v,l,g))},v)}else this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList()}else this.existingSourceExecutionToken&&(this.existingSourceExecutionToken.abandoned=!0),this.hideMentionList()}}},{key:"getAllowedCharsRegex",value:function(t){return this.options.allowedChars instanceof RegExp?this.options.allowedChars:this.options.allowedChars(t)}},{key:"onTextChange",value:function(t,i,a){a==="user"&&this.onSomethingChange()}},{key:"onSelectionChange",value:function(t){t&&t.length===0?this.onSomethingChange():this.hideMentionList()}},{key:"openMenu",value:function(t){var i=this.quill.getSelection(!0);this.quill.insertText(i.index,t),this.quill.blur(),this.quill.focus()}}]),e}();st.register("modules/mention",Hp);function Va(e){var n,t,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=Va(e[n]))&&(i&&(i+=" "),i+=t);else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Up(){for(var e=0,n,t,i="";e<arguments.length;)(n=arguments[e++])&&(t=Va(n))&&(i&&(i+=" "),i+=t);return i}const Gp={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function Vp(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var Wp=Object.defineProperty,wi=Object.getOwnPropertySymbols,Kp=Object.prototype.hasOwnProperty,Zp=Object.prototype.propertyIsEnumerable,ji=(e,n,t)=>n in e?Wp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ni=(e,n)=>{for(var t in n||(n={}))Kp.call(n,t)&&ji(e,t,n[t]);if(wi)for(var t of wi(n))Zp.call(n,t)&&ji(e,t,n[t]);return e};function Yp(e){return n=>({WebkitTapHighlightColor:"transparent",[n||"&:focus"]:Ni({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[n?n.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:Ni({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function Ft(e){return n=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[n||e.colorScheme]}function _n(e){const n=Ft(e);return(t,i,a=!0,o=!0)=>{if(typeof t=="string"&&t.includes(".")){const[m,v]=t.split("."),y=parseInt(v,10);if(m in e.colors&&y>=0&&y<10)return e.colors[m][typeof i=="number"&&!o?i:y]}const c=typeof i=="number"?i:n();return t in e.colors?e.colors[t][c]:a?e.colors[e.primaryColor][c]:t}}function Wa(e){let n="";for(let t=1;t<e.length-1;t+=1)n+=`${e[t]} ${t/(e.length-1)*100}%, `;return`${e[0]} 0%, ${n}${e[e.length-1]} 100%`}function Qp(e,...n){return`linear-gradient(${e}deg, ${Wa(n)})`}function Xp(...e){return`radial-gradient(circle, ${Wa(e)})`}function Ka(e){const n=_n(e),t=Ft(e);return i=>{const a={from:(i==null?void 0:i.from)||e.defaultGradient.from,to:(i==null?void 0:i.to)||e.defaultGradient.to,deg:(i==null?void 0:i.deg)||e.defaultGradient.deg};return`linear-gradient(${a.deg}deg, ${n(a.from,t(),!1)} 0%, ${n(a.to,t(),!1)} 100%)`}}function kn(e){if(typeof e.size=="number")return e.size;const n=e.sizes[e.size];return n!==void 0?n:e.size||e.sizes.md}function Jp(e){return n=>`@media (min-width: ${kn({size:n,sizes:e.breakpoints})}px)`}function em(e){return n=>`@media (max-width: ${kn({size:n,sizes:e.breakpoints})-1}px)`}function tm(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function rm(e){let n=e.replace("#","");if(n.length===3){const c=n.split("");n=[c[0],c[0],c[1],c[1],c[2],c[2]].join("")}const t=parseInt(n,16),i=t>>16&255,a=t>>8&255,o=t&255;return{r:i,g:a,b:o,a:1}}function nm(e){const[n,t,i,a]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:n,g:t,b:i,a:a||1}}function En(e){return tm(e)?rm(e):e.startsWith("rgb")?nm(e):{r:0,g:0,b:0,a:1}}function gt(e,n){if(typeof e!="string"||n>1||n<0)return"rgba(0, 0, 0, 1)";const{r:t,g:i,b:a}=En(e);return`rgba(${t}, ${i}, ${a}, ${n})`}function im(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function am(e,n){const{r:t,g:i,b:a,a:o}=En(e),c=1-n,m=v=>Math.round(v*c);return`rgba(${m(t)}, ${m(i)}, ${m(a)}, ${o})`}function om(e,n){const{r:t,g:i,b:a,a:o}=En(e),c=m=>Math.round(m+(255-m)*n);return`rgba(${c(t)}, ${c(i)}, ${c(a)}, ${o})`}function sm(e){return n=>{if(typeof n=="number")return n;const t=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[n]||n||t}}function lm(e,n){if(typeof e=="string"&&e.includes(".")){const[t,i]=e.split("."),a=parseInt(i,10);if(t in n.colors&&a>=0&&a<10)return{isSplittedColor:!0,key:t,shade:a}}return{isSplittedColor:!1}}function cm(e){const n=_n(e),t=Ft(e),i=Ka(e);return({variant:a,color:o,gradient:c,primaryFallback:m})=>{const v=lm(o,e);switch(a){case"light":return{border:"transparent",background:gt(n(o,e.colorScheme==="dark"?8:0,m,!1),e.colorScheme==="dark"?.2:1),color:o==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:n(o,e.colorScheme==="dark"?2:t("light")),hover:gt(n(o,e.colorScheme==="dark"?7:1,m,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:o==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:n(o,e.colorScheme==="dark"?2:t("light")),hover:gt(n(o,e.colorScheme==="dark"?8:0,m,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:n(o,e.colorScheme==="dark"?5:t("light")),background:"transparent",color:n(o,e.colorScheme==="dark"?5:t("light")),hover:e.colorScheme==="dark"?gt(n(o,5,m,!1),.05):gt(n(o,0,m,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:n(o,t()),hover:null};case"transparent":return{border:"transparent",color:o==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:n(o,e.colorScheme==="dark"?2:t("light")),background:"transparent",hover:null};case"gradient":return{background:i(c),color:e.white,border:"transparent",hover:null};default:{const y=t(),x=v.isSplittedColor?v.shade:y,u=v.isSplittedColor?v.key:o;return{border:"transparent",background:n(u,x,m),color:e.white,hover:n(u,x===9?8:x+1)}}}}}function um(e){return n=>{const t=Ft(e)(n);return e.colors[e.primaryColor][t]}}function dm(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}function fm(e){return()=>({userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]})}const ze={fontStyles:Vp,themeColor:_n,focusStyles:Yp,linearGradient:Qp,radialGradient:Xp,smallerThan:em,largerThan:Jp,rgba:gt,size:kn,cover:im,darken:am,lighten:om,radius:sm,variant:cm,primaryShade:Ft,hover:dm,gradient:Ka,primaryColor:um,placeholderStyles:fm};var hm=Object.defineProperty,pm=Object.defineProperties,mm=Object.getOwnPropertyDescriptors,_i=Object.getOwnPropertySymbols,gm=Object.prototype.hasOwnProperty,vm=Object.prototype.propertyIsEnumerable,ki=(e,n,t)=>n in e?hm(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,bm=(e,n)=>{for(var t in n||(n={}))gm.call(n,t)&&ki(e,t,n[t]);if(_i)for(var t of _i(n))vm.call(n,t)&&ki(e,t,n[t]);return e},xm=(e,n)=>pm(e,mm(n));function ym(e){return xm(bm({},e),{fn:{fontStyles:ze.fontStyles(e),themeColor:ze.themeColor(e),focusStyles:ze.focusStyles(e),largerThan:ze.largerThan(e),smallerThan:ze.smallerThan(e),radialGradient:ze.radialGradient,linearGradient:ze.linearGradient,gradient:ze.gradient(e),rgba:ze.rgba,size:ze.size,cover:ze.cover,lighten:ze.lighten,darken:ze.darken,primaryShade:ze.primaryShade(e),radius:ze.radius(e),variant:ze.variant(e),hover:ze.hover,primaryColor:ze.primaryColor(e),placeholderStyles:ze.placeholderStyles(e)}})}const wm={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:Gp,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},Za=ym(wm);var jm=!1;function Nm(e){if(e.sheet)return e.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===e)return document.styleSheets[n]}function _m(e){var n=document.createElement("style");return n.setAttribute("data-emotion",e.key),e.nonce!==void 0&&n.setAttribute("nonce",e.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var km=function(){function e(t){var i=this;this._insertTag=function(a){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,o),i.tags.push(a)},this.isSpeedy=t.speedy===void 0?!jm:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var n=e.prototype;return n.hydrate=function(i){i.forEach(this._insertTag)},n.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(_m(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Nm(a);try{o.insertRule(i,o.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},n.flush=function(){this.tags.forEach(function(i){var a;return(a=i.parentNode)==null?void 0:a.removeChild(i)}),this.tags=[],this.ctr=0},e}(),$e="-ms-",br="-moz-",be="-webkit-",Ya="comm",Sn="rule",On="decl",Em="@import",Qa="@keyframes",Sm="@layer",Om=Math.abs,Rr=String.fromCharCode,Cm=Object.assign;function Am(e,n){return Le(e,0)^45?(((n<<2^Le(e,0))<<2^Le(e,1))<<2^Le(e,2))<<2^Le(e,3):0}function Xa(e){return e.trim()}function zm(e,n){return(e=n.exec(e))?e[0]:e}function xe(e,n,t){return e.replace(n,t)}function cn(e,n){return e.indexOf(n)}function Le(e,n){return e.charCodeAt(n)|0}function $t(e,n,t){return e.slice(n,t)}function Ze(e){return e.length}function Cn(e){return e.length}function Zt(e,n){return n.push(e),e}function Pm(e,n){return e.map(n).join("")}var $r=1,xt=1,Ja=0,He=0,Ce=0,St="";function Dr(e,n,t,i,a,o,c){return{value:e,root:n,parent:t,type:i,props:a,children:o,line:$r,column:xt,length:c,return:""}}function Pt(e,n){return Cm(Dr("",null,null,"",null,null,0),e,{length:-e.length},n)}function Tm(){return Ce}function Im(){return Ce=He>0?Le(St,--He):0,xt--,Ce===10&&(xt=1,$r--),Ce}function Ve(){return Ce=He<Ja?Le(St,He++):0,xt++,Ce===10&&(xt=1,$r++),Ce}function Xe(){return Le(St,He)}function rr(){return He}function Ht(e,n){return $t(St,e,n)}function Dt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eo(e){return $r=xt=1,Ja=Ze(St=e),He=0,[]}function to(e){return St="",e}function nr(e){return Xa(Ht(He-1,un(e===91?e+2:e===40?e+1:e)))}function Mm(e){for(;(Ce=Xe())&&Ce<33;)Ve();return Dt(e)>2||Dt(Ce)>3?"":" "}function Lm(e,n){for(;--n&&Ve()&&!(Ce<48||Ce>102||Ce>57&&Ce<65||Ce>70&&Ce<97););return Ht(e,rr()+(n<6&&Xe()==32&&Ve()==32))}function un(e){for(;Ve();)switch(Ce){case e:return He;case 34:case 39:e!==34&&e!==39&&un(Ce);break;case 40:e===41&&un(e);break;case 92:Ve();break}return He}function Rm(e,n){for(;Ve()&&e+Ce!==47+10;)if(e+Ce===42+42&&Xe()===47)break;return"/*"+Ht(n,He-1)+"*"+Rr(e===47?e:Ve())}function $m(e){for(;!Dt(Xe());)Ve();return Ht(e,He)}function Dm(e){return to(ir("",null,null,null,[""],e=eo(e),0,[0],e))}function ir(e,n,t,i,a,o,c,m,v){for(var y=0,x=0,u=c,s=0,l=0,g=0,d=1,b=1,f=1,p=0,j="",h=a,N=o,A=i,O=j;b;)switch(g=p,p=Ve()){case 40:if(g!=108&&Le(O,u-1)==58){cn(O+=xe(nr(p),"&","&\f"),"&\f")!=-1&&(f=-1);break}case 34:case 39:case 91:O+=nr(p);break;case 9:case 10:case 13:case 32:O+=Mm(g);break;case 92:O+=Lm(rr()-1,7);continue;case 47:switch(Xe()){case 42:case 47:Zt(qm(Rm(Ve(),rr()),n,t),v);break;default:O+="/"}break;case 123*d:m[y++]=Ze(O)*f;case 125*d:case 59:case 0:switch(p){case 0:case 125:b=0;case 59+x:f==-1&&(O=xe(O,/\f/g,"")),l>0&&Ze(O)-u&&Zt(l>32?Si(O+";",i,t,u-1):Si(xe(O," ","")+";",i,t,u-2),v);break;case 59:O+=";";default:if(Zt(A=Ei(O,n,t,y,x,a,m,j,h=[],N=[],u),o),p===123)if(x===0)ir(O,n,A,A,h,o,u,m,N);else switch(s===99&&Le(O,3)===110?100:s){case 100:case 108:case 109:case 115:ir(e,A,A,i&&Zt(Ei(e,A,A,0,0,a,m,j,a,h=[],u),N),a,N,u,m,i?h:N);break;default:ir(O,A,A,A,[""],N,0,m,N)}}y=x=l=0,d=f=1,j=O="",u=c;break;case 58:u=1+Ze(O),l=g;default:if(d<1){if(p==123)--d;else if(p==125&&d++==0&&Im()==125)continue}switch(O+=Rr(p),p*d){case 38:f=x>0?1:(O+="\f",-1);break;case 44:m[y++]=(Ze(O)-1)*f,f=1;break;case 64:Xe()===45&&(O+=nr(Ve())),s=Xe(),x=u=Ze(j=O+=$m(rr())),p++;break;case 45:g===45&&Ze(O)==2&&(d=0)}}return o}function Ei(e,n,t,i,a,o,c,m,v,y,x){for(var u=a-1,s=a===0?o:[""],l=Cn(s),g=0,d=0,b=0;g<i;++g)for(var f=0,p=$t(e,u+1,u=Om(d=c[g])),j=e;f<l;++f)(j=Xa(d>0?s[f]+" "+p:xe(p,/&\f/g,s[f])))&&(v[b++]=j);return Dr(e,n,t,a===0?Sn:m,v,y,x)}function qm(e,n,t){return Dr(e,n,t,Ya,Rr(Tm()),$t(e,2,-2),0)}function Si(e,n,t,i){return Dr(e,n,t,On,$t(e,0,i),$t(e,i+1,-1),i)}function bt(e,n){for(var t="",i=Cn(e),a=0;a<i;a++)t+=n(e[a],a,e,n)||"";return t}function Bm(e,n,t,i){switch(e.type){case Sm:if(e.children.length)break;case Em:case On:return e.return=e.return||e.value;case Ya:return"";case Qa:return e.return=e.value+"{"+bt(e.children,i)+"}";case Sn:e.value=e.props.join(",")}return Ze(t=bt(e.children,i))?e.return=e.value+"{"+t+"}":""}function Fm(e){var n=Cn(e);return function(t,i,a,o){for(var c="",m=0;m<n;m++)c+=e[m](t,i,a,o)||"";return c}}function Hm(e){return function(n){n.root||(n=n.return)&&e(n)}}function Um(e){var n=Object.create(null);return function(t){return n[t]===void 0&&(n[t]=e(t)),n[t]}}var Gm=function(n,t,i){for(var a=0,o=0;a=o,o=Xe(),a===38&&o===12&&(t[i]=1),!Dt(o);)Ve();return Ht(n,He)},Vm=function(n,t){var i=-1,a=44;do switch(Dt(a)){case 0:a===38&&Xe()===12&&(t[i]=1),n[i]+=Gm(He-1,t,i);break;case 2:n[i]+=nr(a);break;case 4:if(a===44){n[++i]=Xe()===58?"&\f":"",t[i]=n[i].length;break}default:n[i]+=Rr(a)}while(a=Ve());return n},Wm=function(n,t){return to(Vm(eo(n),t))},Oi=new WeakMap,Km=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var t=n.value,i=n.parent,a=n.column===i.column&&n.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(n.props.length===1&&t.charCodeAt(0)!==58&&!Oi.get(i))&&!a){Oi.set(n,!0);for(var o=[],c=Wm(t,o),m=i.props,v=0,y=0;v<c.length;v++)for(var x=0;x<m.length;x++,y++)n.props[y]=o[v]?c[v].replace(/&\f/g,m[x]):m[x]+" "+c[v]}}},Zm=function(n){if(n.type==="decl"){var t=n.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(n.return="",n.value="")}};function ro(e,n){switch(Am(e,n)){case 5103:return be+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return be+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return be+e+br+e+$e+e+e;case 6828:case 4268:return be+e+$e+e+e;case 6165:return be+e+$e+"flex-"+e+e;case 5187:return be+e+xe(e,/(\w+).+(:[^]+)/,be+"box-$1$2"+$e+"flex-$1$2")+e;case 5443:return be+e+$e+"flex-item-"+xe(e,/flex-|-self/,"")+e;case 4675:return be+e+$e+"flex-line-pack"+xe(e,/align-content|flex-|-self/,"")+e;case 5548:return be+e+$e+xe(e,"shrink","negative")+e;case 5292:return be+e+$e+xe(e,"basis","preferred-size")+e;case 6060:return be+"box-"+xe(e,"-grow","")+be+e+$e+xe(e,"grow","positive")+e;case 4554:return be+xe(e,/([^-])(transform)/g,"$1"+be+"$2")+e;case 6187:return xe(xe(xe(e,/(zoom-|grab)/,be+"$1"),/(image-set)/,be+"$1"),e,"")+e;case 5495:case 3959:return xe(e,/(image-set\([^]*)/,be+"$1$`$1");case 4968:return xe(xe(e,/(.+:)(flex-)?(.*)/,be+"box-pack:$3"+$e+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+be+e+e;case 4095:case 3583:case 4068:case 2532:return xe(e,/(.+)-inline(.+)/,be+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ze(e)-1-n>6)switch(Le(e,n+1)){case 109:if(Le(e,n+4)!==45)break;case 102:return xe(e,/(.+:)(.+)-([^]+)/,"$1"+be+"$2-$3$1"+br+(Le(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~cn(e,"stretch")?ro(xe(e,"stretch","fill-available"),n)+e:e}break;case 4949:if(Le(e,n+1)!==115)break;case 6444:switch(Le(e,Ze(e)-3-(~cn(e,"!important")&&10))){case 107:return xe(e,":",":"+be)+e;case 101:return xe(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+be+(Le(e,14)===45?"inline-":"")+"box$3$1"+be+"$2$3$1"+$e+"$2box$3")+e}break;case 5936:switch(Le(e,n+11)){case 114:return be+e+$e+xe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return be+e+$e+xe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return be+e+$e+xe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return be+e+$e+e+e}return e}var Ym=function(n,t,i,a){if(n.length>-1&&!n.return)switch(n.type){case On:n.return=ro(n.value,n.length);break;case Qa:return bt([Pt(n,{value:xe(n.value,"@","@"+be)})],a);case Sn:if(n.length)return Pm(n.props,function(o){switch(zm(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return bt([Pt(n,{props:[xe(o,/:(read-\w+)/,":"+br+"$1")]})],a);case"::placeholder":return bt([Pt(n,{props:[xe(o,/:(plac\w+)/,":"+be+"input-$1")]}),Pt(n,{props:[xe(o,/:(plac\w+)/,":"+br+"$1")]}),Pt(n,{props:[xe(o,/:(plac\w+)/,$e+"input-$1")]})],a)}return""})}},Qm=[Ym],Xm=function(n){var t=n.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(d){var b=d.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(d),d.setAttribute("data-s",""))})}var a=n.stylisPlugins||Qm,o={},c,m=[];c=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(d){for(var b=d.getAttribute("data-emotion").split(" "),f=1;f<b.length;f++)o[b[f]]=!0;m.push(d)});var v,y=[Km,Zm];{var x,u=[Bm,Hm(function(d){x.insert(d)})],s=Fm(y.concat(a,u)),l=function(b){return bt(Dm(b),s)};v=function(b,f,p,j){x=p,l(b?b+"{"+f.styles+"}":f.styles),j&&(g.inserted[f.name]=!0)}}var g={key:t,sheet:new km({key:t,container:c,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:o,registered:{},insert:v};return g.sheet.hydrate(m),g},Jm=!0;function eg(e,n,t){var i="";return t.split(" ").forEach(function(a){e[a]!==void 0?n.push(e[a]+";"):a&&(i+=a+" ")}),i}var tg=function(n,t,i){var a=n.key+"-"+t.name;(i===!1||Jm===!1)&&n.registered[a]===void 0&&(n.registered[a]=t.styles)},rg=function(n,t,i){tg(n,t,i);var a=n.key+"-"+t.name;if(n.inserted[t.name]===void 0){var o=t;do n.insert(t===o?"."+a:"",o,n.sheet,!0),o=o.next;while(o!==void 0)}};function ng(e){for(var n=0,t,i=0,a=e.length;a>=4;++i,a-=4)t=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,n=(t&65535)*1540483477+((t>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(a){case 3:n^=(e.charCodeAt(i+2)&255)<<16;case 2:n^=(e.charCodeAt(i+1)&255)<<8;case 1:n^=e.charCodeAt(i)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var ig={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ag=!1,og=/[A-Z]|^ms/g,sg=/_EMO_([^_]+?)_([^]*?)_EMO_/g,no=function(n){return n.charCodeAt(1)===45},Ci=function(n){return n!=null&&typeof n!="boolean"},Gr=Um(function(e){return no(e)?e:e.replace(og,"-$&").toLowerCase()}),Ai=function(n,t){switch(n){case"animation":case"animationName":if(typeof t=="string")return t.replace(sg,function(i,a,o){return Ye={name:a,styles:o,next:Ye},a})}return ig[n]!==1&&!no(n)&&typeof t=="number"&&t!==0?t+"px":t},lg="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function qt(e,n,t){if(t==null)return"";var i=t;if(i.__emotion_styles!==void 0)return i;switch(typeof t){case"boolean":return"";case"object":{var a=t;if(a.anim===1)return Ye={name:a.name,styles:a.styles,next:Ye},a.name;var o=t;if(o.styles!==void 0){var c=o.next;if(c!==void 0)for(;c!==void 0;)Ye={name:c.name,styles:c.styles,next:Ye},c=c.next;var m=o.styles+";";return m}return cg(e,n,t)}case"function":{if(e!==void 0){var v=Ye,y=t(e);return Ye=v,qt(e,n,y)}break}}var x=t;if(n==null)return x;var u=n[x];return u!==void 0?u:x}function cg(e,n,t){var i="";if(Array.isArray(t))for(var a=0;a<t.length;a++)i+=qt(e,n,t[a])+";";else for(var o in t){var c=t[o];if(typeof c!="object"){var m=c;n!=null&&n[m]!==void 0?i+=o+"{"+n[m]+"}":Ci(m)&&(i+=Gr(o)+":"+Ai(o,m)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&ag)throw new Error(lg);if(Array.isArray(c)&&typeof c[0]=="string"&&(n==null||n[c[0]]===void 0))for(var v=0;v<c.length;v++)Ci(c[v])&&(i+=Gr(o)+":"+Ai(o,c[v])+";");else{var y=qt(e,n,c);switch(o){case"animation":case"animationName":{i+=Gr(o)+":"+y+";";break}default:i+=o+"{"+y+"}"}}}}return i}var zi=/label:\s*([^\s;{]+)\s*(;|$)/g,Ye;function ug(e,n,t){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,a="";Ye=void 0;var o=e[0];if(o==null||o.raw===void 0)i=!1,a+=qt(t,n,o);else{var c=o;a+=c[0]}for(var m=1;m<e.length;m++)if(a+=qt(t,n,e[m]),i){var v=o;a+=v[m]}zi.lastIndex=0;for(var y="",x;(x=zi.exec(a))!==null;)y+="-"+x[1];var u=ng(a)+y;return{name:u,styles:a,next:Ye}}function io(e){return Object.keys(e).reduce((n,t)=>(e[t]!==void 0&&(n[t]=e[t]),n),{})}var dg=Object.defineProperty,Pi=Object.getOwnPropertySymbols,fg=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,Ti=(e,n,t)=>n in e?dg(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Vr=(e,n)=>{for(var t in n||(n={}))fg.call(n,t)&&Ti(e,t,n[t]);if(Pi)for(var t of Pi(n))hg.call(n,t)&&Ti(e,t,n[t]);return e};const ao=M.createContext({theme:Za});function Ut(){var e;return((e=M.useContext(ao))==null?void 0:e.theme)||Za}function pg(e){const n=Ut(),t=i=>{var a,o;return{styles:((a=n.components[i])==null?void 0:a.styles)||{},classNames:((o=n.components[i])==null?void 0:o.classNames)||{}}};return Array.isArray(e)?e.map(t):[t(e)]}function oo(){var e;return(e=M.useContext(ao))==null?void 0:e.emotionCache}function qr(e,n,t){var i;const a=Ut(),o=(i=a.components[e])==null?void 0:i.defaultProps,c=typeof o=="function"?o(a):o;return Vr(Vr(Vr({},n),c),io(t))}function mg(e,n){const t=M.useRef();return(!t.current||n.length!==t.current.prevDeps.length||t.current.prevDeps.map((i,a)=>i===n[a]).indexOf(!1)>=0)&&(t.current={v:e(),prevDeps:[...n]}),t.current.v}const gg=Xm({key:"mantine",prepend:!0});function vg(){return oo()||gg}var bg=Object.defineProperty,Ii=Object.getOwnPropertySymbols,xg=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,Mi=(e,n,t)=>n in e?bg(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,wg=(e,n)=>{for(var t in n||(n={}))xg.call(n,t)&&Mi(e,t,n[t]);if(Ii)for(var t of Ii(n))yg.call(n,t)&&Mi(e,t,n[t]);return e};const Wr="ref";function jg(e){let n;if(e.length!==1)return{args:e,ref:n};const[t]=e;if(!(t instanceof Object))return{args:e,ref:n};if(!(Wr in t))return{args:e,ref:n};n=t[Wr];const i=wg({},t);return delete i[Wr],{args:[i],ref:n}}const{cssFactory:Ng}=(()=>{function e(t,i,a){const o=[],c=eg(t,o,a);return o.length<2?a:c+i(o)}function n(t){const{cache:i}=t,a=(...c)=>{const{ref:m,args:v}=jg(c),y=ug(v,i.registered);return rg(i,y,!1),`${i.key}-${y.name}${m===void 0?"":` ${m}`}`};return{css:a,cx:(...c)=>e(i.registered,a,Up(c))}}return{cssFactory:n}})();function so(){const e=vg();return mg(()=>Ng({cache:e}),[e])}function _g({cx:e,classes:n,context:t,classNames:i,name:a,cache:o}){const c=t.reduce((m,v)=>(Object.keys(v.classNames).forEach(y=>{typeof m[y]!="string"?m[y]=`${v.classNames[y]}`:m[y]=`${m[y]} ${v.classNames[y]}`}),m),{});return Object.keys(n).reduce((m,v)=>(m[v]=e(n[v],c[v],i!=null&&i[v],Array.isArray(a)?a.filter(Boolean).map(y=>`${(o==null?void 0:o.key)||"mantine"}-${y}-${v}`).join(" "):a?`${(o==null?void 0:o.key)||"mantine"}-${a}-${v}`:null),m),{})}var kg=Object.defineProperty,Li=Object.getOwnPropertySymbols,Eg=Object.prototype.hasOwnProperty,Sg=Object.prototype.propertyIsEnumerable,Ri=(e,n,t)=>n in e?kg(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Kr=(e,n)=>{for(var t in n||(n={}))Eg.call(n,t)&&Ri(e,t,n[t]);if(Li)for(var t of Li(n))Sg.call(n,t)&&Ri(e,t,n[t]);return e};function Og(e){return`__mantine-ref-${e||""}`}function $i(e,n,t){const i=a=>typeof a=="function"?a(n,t||{}):a||{};return Array.isArray(e)?e.map(a=>i(a.styles)).reduce((a,o)=>(Object.keys(o).forEach(c=>{a[c]?a[c]=Kr(Kr({},a[c]),o[c]):a[c]=Kr({},o[c])}),a),{}):i(e)}function Gt(e){const n=typeof e=="function"?e:()=>e;function t(i,a){const o=Ut(),c=pg(a==null?void 0:a.name),m=oo(),{css:v,cx:y}=so(),x=n(o,i,Og),u=$i(a==null?void 0:a.styles,o,i),s=$i(c,o,i),l=Object.fromEntries(Object.keys(x).map(g=>{const d=y({[v(x[g])]:!(a!=null&&a.unstyled)},v(s[g]),v(u[g]));return[g,d]}));return{classes:_g({cx:y,classes:l,context:c,classNames:a==null?void 0:a.classNames,name:a==null?void 0:a.name,cache:m}),cx:y,theme:o}}return t}const Cg=typeof document<"u"?M.useLayoutEffect:M.useEffect,Ag=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,zg=he["useId".toString()]||(()=>{});function Pg(){const[e,n]=M.useState("");return Cg(()=>{n(Ag())},[]),e}function Tg(){const e=zg();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ig(e){return typeof e=="string"?e:Tg()||Pg()}function Mg(e,n){typeof e=="function"?e(n):typeof e=="object"&&e!==null&&"current"in e&&(e.current=n)}function Lg(...e){return n=>{e.forEach(t=>Mg(t,n))}}var Di=Object.getOwnPropertySymbols,Rg=Object.prototype.hasOwnProperty,$g=Object.prototype.propertyIsEnumerable,Dg=(e,n)=>{var t={};for(var i in e)Rg.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&Di)for(var i of Di(e))n.indexOf(i)<0&&$g.call(e,i)&&(t[i]=e[i]);return t};function qg(e){const n=e,{m:t,mx:i,my:a,mt:o,mb:c,ml:m,mr:v,p:y,px:x,py:u,pt:s,pb:l,pl:g,pr:d,bg:b,c:f,opacity:p,ff:j,fz:h,fw:N,lts:A,ta:O,lh:S,fs:T,tt:k,td:_,w:E,miw:P,maw:z,h:L,mih:U,mah:G,bgsz:Q,bgp:F,bgr:D,bga:C,pos:R,top:I,left:H,bottom:q,right:w,inset:$,display:B}=n,V=Dg(n,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:io({m:t,mx:i,my:a,mt:o,mb:c,ml:m,mr:v,p:y,px:x,py:u,pt:s,pb:l,pl:g,pr:d,bg:b,c:f,opacity:p,ff:j,fz:h,fw:N,lts:A,ta:O,lh:S,fs:T,tt:k,td:_,w:E,miw:P,maw:z,h:L,mih:U,mah:G,bgsz:Q,bgp:F,bgr:D,bga:C,pos:R,top:I,left:H,bottom:q,right:w,inset:$,display:B}),rest:V}}function Bg(e,n){const t=Object.keys(e).filter(i=>i!=="base").sort((i,a)=>n.fn.size({size:i,sizes:n.breakpoints})-n.fn.size({size:a,sizes:n.breakpoints}));return"base"in e?["base",...t]:t}function Fg({value:e,theme:n,getValue:t,property:i}){if(e==null)return;if(typeof e=="object")return Bg(e,n).reduce((c,m)=>{if(m==="base"&&e.base!==void 0){const y=t(e.base,n);return Array.isArray(i)?(i.forEach(x=>{c[x]=y}),c):(c[i]=y,c)}const v=t(e[m],n);return Array.isArray(i)?(c[n.fn.largerThan(m)]={},i.forEach(y=>{c[n.fn.largerThan(m)][y]=v}),c):(c[n.fn.largerThan(m)]={[i]:v},c)},{});const a=t(e,n);return Array.isArray(i)?i.reduce((o,c)=>(o[c]=a,o),{}):{[i]:a}}function Hg(e,n){return e==="dimmed"?n.colorScheme==="dark"?n.colors.dark[2]:n.colors.gray[6]:n.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function Ug(e){return e}function Gg(e,n){return n.fn.size({size:e,sizes:n.fontSizes})}const Vg=["-xs","-sm","-md","-lg","-xl"];function Wg(e,n){return Vg.includes(e)?n.fn.size({size:e.replace("-",""),sizes:n.spacing})*-1:n.fn.size({size:e,sizes:n.spacing})}const Kg={color:Hg,default:Ug,fontSize:Gg,spacing:Wg},Zg={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var Yg=Object.defineProperty,qi=Object.getOwnPropertySymbols,Qg=Object.prototype.hasOwnProperty,Xg=Object.prototype.propertyIsEnumerable,Bi=(e,n,t)=>n in e?Yg(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Fi=(e,n)=>{for(var t in n||(n={}))Qg.call(n,t)&&Bi(e,t,n[t]);if(qi)for(var t of qi(n))Xg.call(n,t)&&Bi(e,t,n[t]);return e};function Hi(e,n,t=Zg){return Object.keys(t).reduce((a,o)=>(o in e&&e[o]!==void 0&&a.push(Fg({value:e[o],getValue:Kg[t[o].type],property:t[o].property,theme:n})),a),[]).reduce((a,o)=>(Object.keys(o).forEach(c=>{typeof o[c]=="object"&&o[c]!==null&&c in a?a[c]=Fi(Fi({},a[c]),o[c]):a[c]=o[c]}),a),{})}function Ui(e,n){return typeof e=="function"?e(n):e}function Jg(e,n,t){const i=Ut(),{css:a,cx:o}=so();return Array.isArray(e)?o(t,a(Hi(n,i)),e.map(c=>a(Ui(c,i)))):o(t,a(Ui(e,i)),a(Hi(n,i)))}var e0=Object.defineProperty,xr=Object.getOwnPropertySymbols,lo=Object.prototype.hasOwnProperty,co=Object.prototype.propertyIsEnumerable,Gi=(e,n,t)=>n in e?e0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,t0=(e,n)=>{for(var t in n||(n={}))lo.call(n,t)&&Gi(e,t,n[t]);if(xr)for(var t of xr(n))co.call(n,t)&&Gi(e,t,n[t]);return e},r0=(e,n)=>{var t={};for(var i in e)lo.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&xr)for(var i of xr(e))n.indexOf(i)<0&&co.call(e,i)&&(t[i]=e[i]);return t};const uo=M.forwardRef((e,n)=>{var t=e,{className:i,component:a,style:o,sx:c}=t,m=r0(t,["className","component","style","sx"]);const{systemStyles:v,rest:y}=qg(m),x=a||"div";return he.createElement(x,t0({ref:n,className:Jg(c,v,i),style:o},y))});uo.displayName="@mantine/core/Box";const An=uo;var n0=Object.defineProperty,i0=Object.defineProperties,a0=Object.getOwnPropertyDescriptors,Vi=Object.getOwnPropertySymbols,o0=Object.prototype.hasOwnProperty,s0=Object.prototype.propertyIsEnumerable,Wi=(e,n,t)=>n in e?n0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ki=(e,n)=>{for(var t in n||(n={}))o0.call(n,t)&&Wi(e,t,n[t]);if(Vi)for(var t of Vi(n))s0.call(n,t)&&Wi(e,t,n[t]);return e},l0=(e,n)=>i0(e,a0(n)),c0=Gt(e=>({root:l0(Ki(Ki({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})}));const u0=c0;var d0=Object.defineProperty,yr=Object.getOwnPropertySymbols,fo=Object.prototype.hasOwnProperty,ho=Object.prototype.propertyIsEnumerable,Zi=(e,n,t)=>n in e?d0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,f0=(e,n)=>{for(var t in n||(n={}))fo.call(n,t)&&Zi(e,t,n[t]);if(yr)for(var t of yr(n))ho.call(n,t)&&Zi(e,t,n[t]);return e},h0=(e,n)=>{var t={};for(var i in e)fo.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&yr)for(var i of yr(e))n.indexOf(i)<0&&ho.call(e,i)&&(t[i]=e[i]);return t};const po=M.forwardRef((e,n)=>{const t=qr("UnstyledButton",{},e),{className:i,component:a="button",unstyled:o}=t,c=h0(t,["className","component","unstyled"]),{classes:m,cx:v}=u0(null,{name:"UnstyledButton",unstyled:o});return he.createElement(An,f0({component:a,ref:n,className:v(m.root,i),type:a==="button"?"button":void 0},c))});po.displayName="@mantine/core/UnstyledButton";const p0=po;var m0=Object.defineProperty,g0=Object.defineProperties,v0=Object.getOwnPropertyDescriptors,Yi=Object.getOwnPropertySymbols,b0=Object.prototype.hasOwnProperty,x0=Object.prototype.propertyIsEnumerable,Qi=(e,n,t)=>n in e?m0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,mo=(e,n)=>{for(var t in n||(n={}))b0.call(n,t)&&Qi(e,t,n[t]);if(Yi)for(var t of Yi(n))x0.call(n,t)&&Qi(e,t,n[t]);return e},y0=(e,n)=>g0(e,v0(n));const Lt={xs:18,sm:22,md:28,lg:34,xl:44};function w0({variant:e,theme:n,color:t,gradient:i}){const a=n.fn.variant({color:t,variant:e,gradient:i});return e==="gradient"?{border:0,backgroundImage:a.background,color:a.color,"&:hover":n.fn.hover({backgroundSize:"200%"})}:mo({border:`1px solid ${a.border}`,backgroundColor:a.background,color:a.color},n.fn.hover({backgroundColor:a.hover}))}var j0=Gt((e,{color:n,size:t,radius:i,variant:a,gradient:o})=>({root:y0(mo({},w0({variant:a,theme:e,color:n,gradient:o})),{position:"relative",height:e.fn.size({size:t,sizes:Lt}),minHeight:e.fn.size({size:t,sizes:Lt}),width:e.fn.size({size:t,sizes:Lt}),minWidth:e.fn.size({size:t,sizes:Lt}),borderRadius:e.fn.radius(i),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:a==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:a==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(i),cursor:"not-allowed"}}})}));const N0=j0;var _0=Object.defineProperty,wr=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,vo=Object.prototype.propertyIsEnumerable,Xi=(e,n,t)=>n in e?_0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,k0=(e,n)=>{for(var t in n||(n={}))go.call(n,t)&&Xi(e,t,n[t]);if(wr)for(var t of wr(n))vo.call(n,t)&&Xi(e,t,n[t]);return e},E0=(e,n)=>{var t={};for(var i in e)go.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&wr)for(var i of wr(e))n.indexOf(i)<0&&vo.call(e,i)&&(t[i]=e[i]);return t};function S0(e){var n=e,{size:t,color:i}=n,a=E0(n,["size","color"]);return he.createElement("svg",k0({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:i,width:`${t}px`},a),he.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},he.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),he.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),he.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},he.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),he.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),he.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},he.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),he.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),he.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},he.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),he.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),he.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},he.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),he.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var O0=Object.defineProperty,jr=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,Ji=(e,n,t)=>n in e?O0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,C0=(e,n)=>{for(var t in n||(n={}))bo.call(n,t)&&Ji(e,t,n[t]);if(jr)for(var t of jr(n))xo.call(n,t)&&Ji(e,t,n[t]);return e},A0=(e,n)=>{var t={};for(var i in e)bo.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&jr)for(var i of jr(e))n.indexOf(i)<0&&xo.call(e,i)&&(t[i]=e[i]);return t};function z0(e){var n=e,{size:t,color:i}=n,a=A0(n,["size","color"]);return he.createElement("svg",C0({width:`${t}px`,height:`${t}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:i},a),he.createElement("g",{fill:"none",fillRule:"evenodd"},he.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},he.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),he.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},he.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var P0=Object.defineProperty,Nr=Object.getOwnPropertySymbols,yo=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,ea=(e,n,t)=>n in e?P0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,T0=(e,n)=>{for(var t in n||(n={}))yo.call(n,t)&&ea(e,t,n[t]);if(Nr)for(var t of Nr(n))wo.call(n,t)&&ea(e,t,n[t]);return e},I0=(e,n)=>{var t={};for(var i in e)yo.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&Nr)for(var i of Nr(e))n.indexOf(i)<0&&wo.call(e,i)&&(t[i]=e[i]);return t};function M0(e){var n=e,{size:t,color:i}=n,a=I0(n,["size","color"]);return he.createElement("svg",T0({width:`${t}px`,height:`${t/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:i},a),he.createElement("circle",{cx:"15",cy:"15",r:"15"},he.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),he.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),he.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},he.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),he.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),he.createElement("circle",{cx:"105",cy:"15",r:"15"},he.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),he.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var L0=Object.defineProperty,_r=Object.getOwnPropertySymbols,jo=Object.prototype.hasOwnProperty,No=Object.prototype.propertyIsEnumerable,ta=(e,n,t)=>n in e?L0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,R0=(e,n)=>{for(var t in n||(n={}))jo.call(n,t)&&ta(e,t,n[t]);if(_r)for(var t of _r(n))No.call(n,t)&&ta(e,t,n[t]);return e},$0=(e,n)=>{var t={};for(var i in e)jo.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&_r)for(var i of _r(e))n.indexOf(i)<0&&No.call(e,i)&&(t[i]=e[i]);return t};const Zr={bars:S0,oval:z0,dots:M0},D0={xs:18,sm:22,md:36,lg:44,xl:58},q0={size:"md"};function _o(e){const n=qr("Loader",q0,e),{size:t,color:i,variant:a}=n,o=$0(n,["size","color","variant"]),c=Ut(),m=a in Zr?a:c.loader;return he.createElement(An,R0({role:"presentation",component:Zr[m]||Zr.bars,size:c.fn.size({size:t,sizes:D0}),color:c.fn.variant({variant:"filled",primaryFallback:!1,color:i||c.primaryColor}).background},o))}_o.displayName="@mantine/core/Loader";var B0=Object.defineProperty,kr=Object.getOwnPropertySymbols,ko=Object.prototype.hasOwnProperty,Eo=Object.prototype.propertyIsEnumerable,ra=(e,n,t)=>n in e?B0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,na=(e,n)=>{for(var t in n||(n={}))ko.call(n,t)&&ra(e,t,n[t]);if(kr)for(var t of kr(n))Eo.call(n,t)&&ra(e,t,n[t]);return e},F0=(e,n)=>{var t={};for(var i in e)ko.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&kr)for(var i of kr(e))n.indexOf(i)<0&&Eo.call(e,i)&&(t[i]=e[i]);return t};const H0={color:"gray",size:"md",variant:"subtle",loading:!1},So=M.forwardRef((e,n)=>{const t=qr("ActionIcon",H0,e),{className:i,color:a,children:o,radius:c,size:m,variant:v,gradient:y,disabled:x,loaderProps:u,loading:s,unstyled:l}=t,g=F0(t,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:d,cx:b,theme:f}=N0({size:m,radius:c,color:a,variant:v,gradient:y},{name:"ActionIcon",unstyled:l}),p=f.fn.variant({color:a,variant:v}),j=he.createElement(_o,na({color:p.color,size:f.fn.size({size:m,sizes:Lt})-12},u));return he.createElement(p0,na({className:b(d.root,i),ref:n,disabled:x,"data-disabled":x||void 0,"data-loading":s||void 0,unstyled:l},g),s?j:o)});So.displayName="@mantine/core/ActionIcon";const U0=So;var G0=Object.defineProperty,ia=Object.getOwnPropertySymbols,V0=Object.prototype.hasOwnProperty,W0=Object.prototype.propertyIsEnumerable,aa=(e,n,t)=>n in e?G0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,K0=(e,n)=>{for(var t in n||(n={}))V0.call(n,t)&&aa(e,t,n[t]);if(ia)for(var t of ia(n))W0.call(n,t)&&aa(e,t,n[t]);return e},Z0=Gt((e,{noActive:n})=>{const t=e.fn.variant({color:e.primaryColor,variant:"light"});return{control:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&.ql-active":n?{}:K0({backgroundColor:t.background,color:t.color},e.fn.hover({backgroundColor:t.hover}))}}});const Y0=Z0;var Q0=Object.defineProperty,Er=Object.getOwnPropertySymbols,Oo=Object.prototype.hasOwnProperty,Co=Object.prototype.propertyIsEnumerable,oa=(e,n,t)=>n in e?Q0(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,X0=(e,n)=>{for(var t in n||(n={}))Oo.call(n,t)&&oa(e,t,n[t]);if(Er)for(var t of Er(n))Co.call(n,t)&&oa(e,t,n[t]);return e},J0=(e,n)=>{var t={};for(var i in e)Oo.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&Er)for(var i of Er(e))n.indexOf(i)<0&&Co.call(e,i)&&(t[i]=e[i]);return t};function Ao(e){var n=e,{className:t,children:i,controls:a,value:o,noActive:c}=n,m=J0(n,["className","children","controls","value","noActive"]);const{classes:v,cx:y}=Y0({noActive:c},{name:"RichTextEditor"});return he.createElement(U0,X0({className:y(v.control,`ql-${a}`,t),value:o,radius:0},m),i)}Ao.displayName="@mantine/rte/ToolbarButton";function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_e.apply(this,arguments)}function Ee(e,n){if(e==null)return{};var t,i,a=function(c,m){if(c==null)return{};var v,y,x={},u=Object.keys(c);for(y=0;y<u.length;y++)v=u[y],m.indexOf(v)>=0||(x[v]=c[v]);return x}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var ev=["size","color","stroke"];function tv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,ev);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-align-center",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("line",{x1:4,y1:6,x2:20,y2:6}),M.createElement("line",{x1:8,y1:12,x2:16,y2:12}),M.createElement("line",{x1:6,y1:18,x2:18,y2:18}))}var rv=["size","color","stroke"];function nv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,rv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-align-left",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("line",{x1:4,y1:6,x2:20,y2:6}),M.createElement("line",{x1:4,y1:12,x2:14,y2:12}),M.createElement("line",{x1:4,y1:18,x2:18,y2:18}))}var iv=["size","color","stroke"];function av(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,iv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-align-right",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("line",{x1:4,y1:6,x2:20,y2:6}),M.createElement("line",{x1:10,y1:12,x2:20,y2:12}),M.createElement("line",{x1:6,y1:18,x2:20,y2:18}))}var ov=["size","color","stroke"];function sv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,ov);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-blockquote",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M6 15h15"}),M.createElement("path",{d:"M21 19h-15"}),M.createElement("path",{d:"M15 11h6"}),M.createElement("path",{d:"M21 7h-6"}),M.createElement("path",{d:"M9 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"}),M.createElement("path",{d:"M3 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"}))}var lv=["size","color","stroke"];function cv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,lv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-bold",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}),M.createElement("path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"}))}var uv=["size","color","stroke"];function dv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,uv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-youtube",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("rect",{x:3,y:5,width:18,height:14,rx:4}),M.createElement("path",{d:"M10 9l5 3l-5 3z"}))}var fv=["size","color","stroke"];function hv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,fv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-clear-formatting",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M17 15l4 4m0 -4l-4 4"}),M.createElement("path",{d:"M7 6v-1h11v1"}),M.createElement("line",{x1:7,y1:19,x2:11,y2:19}),M.createElement("line",{x1:13,y1:5,x2:9,y2:19}))}var pv=["size","color","stroke"];function sa(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,pv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-code",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("polyline",{points:"7 8 3 12 7 16"}),M.createElement("polyline",{points:"17 8 21 12 17 16"}),M.createElement("line",{x1:14,y1:4,x2:10,y2:20}))}var mv=["size","color","stroke"];function gv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,mv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-h-1",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M19 18v-8l-2 2"}),M.createElement("path",{d:"M4 6v12"}),M.createElement("path",{d:"M12 6v12"}),M.createElement("path",{d:"M11 18h2"}),M.createElement("path",{d:"M3 18h2"}),M.createElement("path",{d:"M4 12h8"}),M.createElement("path",{d:"M3 6h2"}),M.createElement("path",{d:"M11 6h2"}))}var vv=["size","color","stroke"];function bv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,vv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-h-2",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.417 1.318 -.816 1.858l-3.184 4.143l4 0"}),M.createElement("path",{d:"M4 6v12"}),M.createElement("path",{d:"M12 6v12"}),M.createElement("path",{d:"M11 18h2"}),M.createElement("path",{d:"M3 18h2"}),M.createElement("path",{d:"M4 12h8"}),M.createElement("path",{d:"M3 6h2"}),M.createElement("path",{d:"M11 6h2"}))}var xv=["size","color","stroke"];function yv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,xv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-h-3",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M19 14a2 2 0 1 0 -2 -2"}),M.createElement("path",{d:"M17 16a2 2 0 1 0 2 -2"}),M.createElement("path",{d:"M4 6v12"}),M.createElement("path",{d:"M12 6v12"}),M.createElement("path",{d:"M11 18h2"}),M.createElement("path",{d:"M3 18h2"}),M.createElement("path",{d:"M4 12h8"}),M.createElement("path",{d:"M3 6h2"}),M.createElement("path",{d:"M11 6h2"}))}var wv=["size","color","stroke"];function jv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,wv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-h-4",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M20 18v-8l-4 6h5"}),M.createElement("path",{d:"M4 6v12"}),M.createElement("path",{d:"M12 6v12"}),M.createElement("path",{d:"M11 18h2"}),M.createElement("path",{d:"M3 18h2"}),M.createElement("path",{d:"M4 12h8"}),M.createElement("path",{d:"M3 6h2"}),M.createElement("path",{d:"M11 6h2"}))}var Nv=["size","color","stroke"];function _v(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Nv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-h-5",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M17 18h2a2 2 0 1 0 0 -4h-2v-4h4"}),M.createElement("path",{d:"M4 6v12"}),M.createElement("path",{d:"M12 6v12"}),M.createElement("path",{d:"M11 18h2"}),M.createElement("path",{d:"M3 18h2"}),M.createElement("path",{d:"M4 12h8"}),M.createElement("path",{d:"M3 6h2"}),M.createElement("path",{d:"M11 6h2"}))}var kv=["size","color","stroke"];function Ev(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,kv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-h-6",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M19 14a2 2 0 1 0 0 4a2 2 0 0 0 0 -4z"}),M.createElement("path",{d:"M21 12a2 2 0 1 0 -4 0v4"}),M.createElement("path",{d:"M4 6v12"}),M.createElement("path",{d:"M12 6v12"}),M.createElement("path",{d:"M11 18h2"}),M.createElement("path",{d:"M3 18h2"}),M.createElement("path",{d:"M4 12h8"}),M.createElement("path",{d:"M3 6h2"}),M.createElement("path",{d:"M11 6h2"}))}var Sv=["size","color","stroke"];function Ov(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Sv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-italic",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("line",{x1:11,y1:5,x2:17,y2:5}),M.createElement("line",{x1:7,y1:19,x2:13,y2:19}),M.createElement("line",{x1:14,y1:5,x2:10,y2:19}))}var Cv=["size","color","stroke"];function Av(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Cv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-link",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"}),M.createElement("path",{d:"M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"}))}var zv=["size","color","stroke"];function Pv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,zv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-list-numbers",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M11 6h9"}),M.createElement("path",{d:"M11 12h9"}),M.createElement("path",{d:"M12 18h8"}),M.createElement("path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4"}),M.createElement("path",{d:"M6 10v-6l-2 2"}))}var Tv=["size","color","stroke"];function Iv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Tv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-list",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("line",{x1:9,y1:6,x2:20,y2:6}),M.createElement("line",{x1:9,y1:12,x2:20,y2:12}),M.createElement("line",{x1:9,y1:18,x2:20,y2:18}),M.createElement("line",{x1:5,y1:6,x2:5,y2:6.01}),M.createElement("line",{x1:5,y1:12,x2:5,y2:12.01}),M.createElement("line",{x1:5,y1:18,x2:5,y2:18.01}))}var Mv=["size","color","stroke"];function Lv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Mv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-photo",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("line",{x1:15,y1:8,x2:15.01,y2:8}),M.createElement("rect",{x:4,y:4,width:16,height:16,rx:3}),M.createElement("path",{d:"M4 15l4 -4a3 5 0 0 1 3 0l5 5"}),M.createElement("path",{d:"M14 14l1 -1a3 5 0 0 1 3 0l2 2"}))}var Rv=["size","color","stroke"];function $v(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Rv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-strikethrough",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("line",{x1:5,y1:12,x2:19,y2:12}),M.createElement("path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5"}))}var Dv=["size","color","stroke"];function qv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Dv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-subscript",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M5 7l8 10m-8 0l8 -10"}),M.createElement("path",{d:"M21 20h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"}))}var Bv=["size","color","stroke"];function Fv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Bv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-superscript",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M5 7l8 10m-8 0l8 -10"}),M.createElement("path",{d:"M21 11h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"}))}var Hv=["size","color","stroke"];function Uv(e){var n=e.size,t=n===void 0?24:n,i=e.color,a=i===void 0?"currentColor":i,o=e.stroke,c=o===void 0?2:o,m=Ee(e,Hv);return M.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-underline",width:t,height:t,viewBox:"0 0 24 24",strokeWidth:c,stroke:a,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},m),M.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.createElement("path",{d:"M7 5v5a5 5 0 0 0 10 0v-5"}),M.createElement("path",{d:"M5 19h14"}))}const Tt={code:{icon:sa,controls:"code"},codeBlock:{icon:sa,controls:"code-block"},bold:{icon:cv,controls:"bold"},italic:{icon:Ov,controls:"italic"},underline:{icon:Uv,controls:"underline"},strike:{icon:$v,controls:"strike"},unorderedList:{icon:Iv,controls:"list",value:"bullet"},orderedList:{icon:Pv,controls:"list",value:"ordered"},link:{icon:Av,controls:"link"},image:{icon:Lv,controls:"image"},clean:{icon:hv,controls:"clean"},alignCenter:{icon:tv,controls:"align",value:"center",noActive:!0},alignLeft:{icon:nv,controls:"align",value:"",noActive:!0},alignRight:{icon:av,controls:"align",value:"right",noActive:!0},video:{icon:dv,controls:"video"},h1:{icon:gv,controls:"header",value:"1"},h2:{icon:bv,controls:"header",value:"2"},h3:{icon:yv,controls:"header",value:"3"},h4:{icon:jv,controls:"header",value:"4"},h5:{icon:_v,controls:"header",value:"5"},h6:{icon:Ev,controls:"header",value:"6"},sup:{icon:Fv,controls:"script",value:"super"},sub:{icon:qv,controls:"script",value:"sub"},blockquote:{icon:sv,controls:"blockquote"}};var Gv=Gt((e,{sticky:n,stickyOffset:t})=>({toolbarGroup:{display:"flex",alignItems:"center",flexWrap:"wrap",margin:`calc(${e.spacing.md}px / 2)`},toolbar:{position:n?"sticky":"relative",zIndex:1,top:n?t:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[7]:e.colors.gray[4]}`,borderTopRightRadius:e.radius.sm,borderTopLeftRadius:e.radius.sm,padding:`${e.spacing.sm}px ${e.spacing.md}px`},toolbarInner:{display:"flex",flexWrap:"wrap",margin:`calc(${-e.spacing.md}px / 2)`},toolbarControl:{"& + &":{borderLeftWidth:0},"&:first-of-type":{borderTopLeftRadius:e.fn.radius(e.defaultRadius),borderBottomLeftRadius:e.fn.radius(e.defaultRadius)},"&:last-of-type":{borderTopRightRadius:e.fn.radius(e.defaultRadius),borderBottomRightRadius:e.fn.radius(e.defaultRadius)}}}));const Vv=Gv;var Wv=Object.defineProperty,Sr=Object.getOwnPropertySymbols,zo=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable,la=(e,n,t)=>n in e?Wv(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Kv=(e,n)=>{for(var t in n||(n={}))zo.call(n,t)&&la(e,t,n[t]);if(Sr)for(var t of Sr(n))Po.call(n,t)&&la(e,t,n[t]);return e},Zv=(e,n)=>{var t={};for(var i in e)zo.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&Sr)for(var i of Sr(e))n.indexOf(i)<0&&Po.call(e,i)&&(t[i]=e[i]);return t};function To(e){var n=e,{controls:t,labels:i,stickyOffset:a=0,sticky:o=!0,className:c,classNames:m,styles:v,id:y,unstyled:x}=n,u=Zv(n,["controls","labels","stickyOffset","sticky","className","classNames","styles","id","unstyled"]);const{classes:s,cx:l}=Vv({sticky:o,stickyOffset:a},{classNames:m,styles:v,unstyled:x,name:"RichTextEditor"}),g=t.map((d,b)=>{const f=d.filter(p=>Tt[p]).map(p=>{const j=Tt[p].icon;return he.createElement(Ao,{className:s.toolbarControl,controls:Tt[p].controls,value:Tt[p].value,key:p,title:i[p],noActive:Tt[p].noActive},he.createElement(j,{size:18,stroke:1.5}))});return he.createElement("div",{className:s.toolbarGroup,key:b},f)});return he.createElement("div",Kv({id:y,className:l(s.toolbar,c)},u),he.createElement("div",{className:s.toolbarInner},g))}To.displayName="@mantine/rte/Toolbar";const Yv=[["bold","italic","underline","strike","clean"],["h1","h2","h3","h4"],["unorderedList","orderedList"],["link","image","video","blockquote","codeBlock"],["alignLeft","alignCenter","alignRight"],["sup","sub"]];var Qv=Object.defineProperty,Xv=Object.defineProperties,Jv=Object.getOwnPropertyDescriptors,ca=Object.getOwnPropertySymbols,eb=Object.prototype.hasOwnProperty,tb=Object.prototype.propertyIsEnumerable,ua=(e,n,t)=>n in e?Qv(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Yt=(e,n)=>{for(var t in n||(n={}))eb.call(n,t)&&ua(e,t,n[t]);if(ca)for(var t of ca(n))tb.call(n,t)&&ua(e,t,n[t]);return e},Yr=(e,n)=>Xv(e,Jv(n)),rb=Gt((e,{saveLabel:n,removeLabel:t,editLabel:i,radius:a,readOnly:o})=>({toolbar:{display:o?"none":void 0},root:Yr(Yt({},e.fn.fontStyles()),{fontSize:e.fontSizes.sm,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,borderRadius:e.fn.radius(a),position:"relative",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"& .ql-toolbar":{borderTopRightRadius:e.fn.radius(a),borderTopLeftRadius:e.fn.radius(a)},"& .ql-container":{position:"relative",boxSizing:"border-box",height:"100%",margin:0,lineHeight:e.lineHeight},"& .ql-editor":{whiteSpace:"pre-wrap",outline:"none",padding:`${e.spacing.sm}px ${e.spacing.md}px`},"& .ql-container.ql-disabled .ql-tooltip":{display:"none"},"& .ql-tooltip":{position:"absolute",zIndex:1,backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.white,padding:`${e.spacing.xs}px ${e.spacing.md}px`,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`,boxShadow:e.shadows.sm,borderRadius:e.radius.sm,display:"flex",alignItems:"center"},"& .ql-action::before":{content:`"${i}"`,cursor:"pointer",display:"block",whiteSpace:"nowrap",height:32,lineHeight:"32px",backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white,borderRadius:e.fn.radius(e.defaultRadius),fontWeight:500,padding:`0 ${e.spacing.md}px`,marginRight:e.spacing.sm,fontSize:e.fontSizes.sm},"& .ql-remove::before":{content:`"${t}"`,cursor:"pointer",color:e.colors.red[e.colorScheme==="dark"?5:7],fontSize:e.fontSizes.sm,display:"block",height:32,lineHeight:"32px"},"& .ql-hidden":{display:"none"},"& .ql-preview":{display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:180,marginRight:e.spacing.md},"& .ql-editing .ql-preview":{display:"none"},"& .ql-editing .ql-remove":{display:"none"},"& .ql-editing .ql-action::before":{content:`"${n}"`,marginRight:0},"& .ql-tooltip.ql-editing input":{display:"block"},"& .ql-tooltip input":{display:"none",WebkitTapHighlightColor:"transparent",height:34,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fontSizes.sm,width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textAlign:"left",paddingLeft:e.spacing.sm,paddingRight:e.spacing.sm,borderRadius:e.fn.radius(e.defaultRadius),marginRight:e.spacing.md,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,"&::placeholder":Yt({opacity:1},e.fn.placeholderStyles()),"&:focus":{outline:"none",borderColor:e.colors[e.primaryColor][e.colorScheme==="dark"?8:5]}},"& .ql-clipboard":{left:"-100000px",height:"1px",overflowY:"hidden",position:"fixed",top:"50%"},"& .ql-align-center":{textAlign:"center"},"& .ql-align-right":{textAlign:"right"},"& .ql-mention-list-container":{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,borderRadius:e.radius.sm,overflow:"hidden","& .ql-mention-list":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],paddingLeft:0,marginTop:0,margin:0,listStyleType:"none","& .ql-mention-list-item":{padding:e.spacing.xs,textDecoration:"none",cursor:"pointer"},"& .selected":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[0],color:e.colorScheme==="dark"?e.white:e.black,textDecoration:"none"}}},"& .mention":{display:"inline-block",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors[e.primaryColor][0],padding:"3px 5px",marginRight:2,borderRadius:e.fn.radius(e.defaultRadius),userSelect:"all",pointerEvents:"none"},"& iframe.ql-video":{width:"100%",height:400,"@media (max-width: 755px)":{height:220}},"& a":{color:e.colors[e.primaryColor][e.colorScheme==="dark"?4:7],textDecoration:"none"},"& h1, & h2, & h3, & h4, & h5, & h6":{fontFamily:e.headings.fontFamily,fontWeight:e.headings.fontWeight,marginTop:0},"& ol, & ul":{marginTop:e.spacing.sm,paddingLeft:`calc(${e.spacing.md}px * 2)`,listStylePosition:"outside"},"& h1":{fontSize:e.headings.sizes.h1.fontSize,marginBottom:`calc(${e.spacing.sm}px * ${e.headings.sizes.h1.lineHeight})`},"& h2":{fontSize:e.headings.sizes.h2.fontSize,marginBottom:`calc(${e.spacing.sm}px * ${e.headings.sizes.h2.lineHeight})`},"& h3":{fontSize:e.headings.sizes.h3.fontSize,marginBottom:`calc(${e.spacing.sm}px * ${e.headings.sizes.h3.lineHeight})`},"& h4":{fontSize:e.headings.sizes.h4.fontSize,marginBottom:`calc(${e.spacing.sm}px * ${e.headings.sizes.h4.lineHeight})`},"& h5":{fontSize:e.headings.sizes.h5.fontSize,marginBottom:`calc(${e.spacing.sm}px * ${e.headings.sizes.h5.lineHeight})`},"& h6":{fontSize:e.headings.sizes.h6.fontSize,marginBottom:`calc(${e.spacing.sm}px * ${e.headings.sizes.h6.lineHeight})`},"& p":{marginTop:0,marginBottom:e.spacing.sm},"& pre":Yr(Yt({},e.fn.fontStyles()),{lineHeight:e.lineHeight,borderRadius:e.radius.sm,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.fn.rgba(e.fn.themeColor("gray",e.colorScheme==="dark"?8:0),e.colorScheme==="dark"?.35:1),fontFamily:e.fontFamilyMonospace,fontSize:e.fontSizes.xs,padding:e.spacing.xs,margin:0,overflowX:"auto"}),"& code":Yr(Yt({},e.fn.fontStyles()),{lineHeight:e.lineHeight,borderRadius:e.radius.sm,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.fn.rgba(e.fn.themeColor("gray",e.colorScheme==="dark"?8:0),e.colorScheme==="dark"?.35:1),fontFamily:e.fontFamilyMonospace,fontSize:e.fontSizes.xs,padding:`2px calc(${e.spacing.xs}px / 2)`}),"& blockquote":{marginTop:0,marginLeft:0,marginBottom:e.spacing.sm,paddingLeft:e.spacing.md,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],borderLeft:`4px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`},"& img":{display:"block",position:"relative",maxWidth:"100%",marginBottom:e.spacing.sm},"& .ql-image-uploading img":{filter:"blur(10px)"},"& .ql-blank":{"&::before":{content:"attr(data-placeholder)",position:"absolute",left:e.spacing.md,right:e.spacing.md,color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}})}));const nb=rb,ib={save:"Save",edit:"Edit",remove:"Remove",bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strikethrough",link:"Link",unorderedList:"Bullet list",orderedList:"Ordered list",clean:"Clean formatting",video:"Embed video",alignCenter:"Align text to center",alignLeft:"Align text to left",alignRight:"Align text to right",image:"Embed image",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",sup:"Super script",sub:"Sub script",code:"Code",codeBlock:"Code block",blockquote:"Block quote"};function ab(e){var n;return n=class extends e{static create(t){const i=super.create(t);if(typeof t=="boolean"&&t)return i;const a=document.createElement("img");return a.setAttribute("src",t),i.appendChild(a),i}static value(t){const{src:i,custom:a}=t.dataset;return{src:i,custom:a}}deleteAt(t,i){super.deleteAt(t,i),this.cache={}}},n.blotName="imageBlot",n.className="ql-image-uploading",n.tagName="span",n}class ob{constructor(n,t){this.quill=n,this.options=t,this.range=null,this.quill.getModule("toolbar").addHandler("image",this.selectLocalImage.bind(this)),this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.quill.root.addEventListener("drop",this.handleDrop,!1),this.quill.root.addEventListener("paste",this.handlePaste,!1)}selectLocalImage(){this.range=this.quill.getSelection(),this.range&&(this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=this.fileChanged.bind(this),document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(()=>{document.body.removeChild(this.fileHolder)}))}handleDrop(n){if(n.stopPropagation(),n.preventDefault(),n.dataTransfer&&n.dataTransfer.files&&n.dataTransfer.files.length){if(document.caretRangeFromPoint){const i=document.getSelection(),a=document.caretRangeFromPoint(n.clientX,n.clientY);i&&a&&i.setBaseAndExtent(a.startContainer,a.startOffset,a.startContainer,a.startOffset)}else{const i=document.getSelection(),a=document.caretPositionFromPoint(n.clientX,n.clientY);i&&a&&i.setBaseAndExtent(a.offsetNode,a.offset,a.offsetNode,a.offset)}this.range=this.quill.getSelection();const t=n.dataTransfer.files[0];setTimeout(()=>{this.range=this.quill.getSelection(),this.readAndUploadFile(t)},0)}}handlePaste(n){const t=n.clipboardData||window.clipboardData;if(t&&(t.items||t.files)){const i=t.items||t.files,a=/^image\/(jpe?g|gif|png|svg|webp)$/i;for(let o=0;o<i.length;o+=1)if(a.test(i[o].type)){const c=i[o].getAsFile?i[o].getAsFile():i[o];c&&(this.range=this.quill.getSelection(),n.preventDefault(),setTimeout(()=>{this.range=this.quill.getSelection(),this.readAndUploadFile(c)},1))}}}readAndUploadFile(n){let t=!1;const i=new FileReader;i.addEventListener("load",()=>{if(!t){const a=i.result;this.insertBase64Image(a)}},!1),n&&i.readAsDataURL(n),this.options.upload(n).then(a=>{this.insertToEditor(a)},()=>{t=!0,this.removeBase64Image()})}fileChanged(){const n=this.fileHolder.files[0];this.readAndUploadFile(n)}insertBase64Image(n){const{range:t}=this;this.quill.insertEmbed(t.index,"imageBlot",`${n}`,"user")}insertToEditor(n){const{range:t}=this;this.quill.deleteText(t.index,3,"user"),this.quill.insertEmbed(t.index,"image",`${n}`,"user"),t.index+=1,this.quill.setSelection(t,"user")}removeBase64Image(){const{range:n}=this;this.quill.deleteText(n.index,3,"user")}}const sb=["list","strike","underline","link","bold","italic","image","clean","align","video","header","script","blockquote","code","code-block"];function lb(e){sb.forEach(n=>{e[n]={}})}function cb(e){["1","2","3","4","5","6"].forEach(n=>{e.addBinding({key:n,shortKey:!0,altKey:!0},function(i,a){var o;((o=a.format)==null?void 0:o.header)===Number(n)?this.quill.removeFormat(i):this.quill.formatLine(i,"header",n)})})}var ub=Object.defineProperty,db=Object.defineProperties,fb=Object.getOwnPropertyDescriptors,Or=Object.getOwnPropertySymbols,Io=Object.prototype.hasOwnProperty,Mo=Object.prototype.propertyIsEnumerable,da=(e,n,t)=>n in e?ub(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Qr=(e,n)=>{for(var t in n||(n={}))Io.call(n,t)&&da(e,t,n[t]);if(Or)for(var t of Or(n))Mo.call(n,t)&&da(e,t,n[t]);return e},hb=(e,n)=>db(e,fb(n)),pb=(e,n)=>{var t={};for(var i in e)Io.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&Or)for(var i of Or(e))n.indexOf(i)<0&&Mo.call(e,i)&&(t[i]=e[i]);return t};const mb=Bt.Quill.import("blots/block"),gb=ab(mb);Bt.Quill.register({"formats/imageBlot":gb});Bt.Quill.register("modules/imageUploader",ob);const vb=Bt.Quill.import("ui/icons");lb(vb);function bb(e){return new Promise(n=>{const t=new FileReader;t.onloadend=()=>n(t.result),t.readAsDataURL(e)})}const xb={onImageUpload:bb,sticky:!0,stickyOffset:0,labels:ib,controls:Yv,readOnly:!1},Lo=M.forwardRef((e,n)=>{const t=qr("RichTextEditor",xb,e),{value:i,defaultValue:a,onChange:o,onImageUpload:c,sticky:m,stickyOffset:v,radius:y,labels:x,controls:u,id:s,className:l,classNames:g,styles:d,placeholder:b,mentions:f,readOnly:p,modules:j,unstyled:h,formats:N}=t,A=pb(t,["value","defaultValue","onChange","onImageUpload","sticky","stickyOffset","radius","labels","controls","id","className","classNames","styles","placeholder","mentions","readOnly","modules","unstyled","formats"]),O=Ig(s),S=M.useRef(),{classes:T,cx:k}=nb({saveLabel:x.save,editLabel:x.edit,removeLabel:x.remove,radius:y,readOnly:p},{classNames:g,styles:d,unstyled:h,name:"RichTextEditor"}),_=M.useMemo(()=>hb(Qr(Qr({},j),O?{toolbar:{container:`#${O}`}}:void 0),{mention:f,imageUploader:{upload:E=>c(E)}}),[O,f,j,c]);return M.useEffect(()=>{var E,P;S.current&&cb((P=(E=S==null?void 0:S.current)==null?void 0:E.editor)==null?void 0:P.keyboard)},[]),he.createElement(An,Qr({className:k(T.root,l)},A),he.createElement(To,{controls:u,labels:x,sticky:m,stickyOffset:v,classNames:g,styles:d,id:O,className:T.toolbar,unstyled:h}),he.createElement(Ap,{theme:"snow",modules:_,value:i,defaultValue:a,onChange:o,ref:Lg(S,n),placeholder:b,readOnly:p,scrollingContainer:"html",formats:N}))});Lo.displayName="@mantine/rte/RichTextEditor";var dn=function(e,n){return dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])},dn(e,n)};function yb(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");dn(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var Te=function(){return Te=Object.assign||function(n){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Te.apply(this,arguments)};var fa=!1,dt,fn,hn,ar,or,Ro,sr,pn,mn,gn,$o,vn,bn,Do,qo;function Fe(){if(!fa){fa=!0;var e=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),t=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(vn=/\b(iPhone|iP[ao]d)/.exec(e),bn=/\b(iP[ao]d)/.exec(e),gn=/Android/i.exec(e),Do=/FBAN\/\w+;/i.exec(e),qo=/Mobile/i.exec(e),$o=!!/Win64/.exec(e),n){dt=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,dt&&document&&document.documentMode&&(dt=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(e);Ro=i?parseFloat(i[1])+4:dt,fn=n[2]?parseFloat(n[2]):NaN,hn=n[3]?parseFloat(n[3]):NaN,ar=n[4]?parseFloat(n[4]):NaN,ar?(n=/(?:Chrome\/(\d+\.\d+))/.exec(e),or=n&&n[1]?parseFloat(n[1]):NaN):or=NaN}else dt=fn=hn=or=ar=NaN;if(t){if(t[1]){var a=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);sr=a?parseFloat(a[1].replace("_",".")):!0}else sr=!1;pn=!!t[2],mn=!!t[3]}else sr=pn=mn=!1}}var xn={ie:function(){return Fe()||dt},ieCompatibilityMode:function(){return Fe()||Ro>dt},ie64:function(){return xn.ie()&&$o},firefox:function(){return Fe()||fn},opera:function(){return Fe()||hn},webkit:function(){return Fe()||ar},safari:function(){return xn.webkit()},chrome:function(){return Fe()||or},windows:function(){return Fe()||pn},osx:function(){return Fe()||sr},linux:function(){return Fe()||mn},iphone:function(){return Fe()||vn},mobile:function(){return Fe()||vn||bn||gn||qo},nativeApp:function(){return Fe()||Do},android:function(){return Fe()||gn},ipad:function(){return Fe()||bn}},wb=xn,Qt=!!(typeof window<"u"&&window.document&&window.document.createElement),jb={canUseDOM:Qt,canUseWorkers:typeof Worker<"u",canUseEventListeners:Qt&&!!(window.addEventListener||window.attachEvent),canUseViewport:Qt&&!!window.screen,isInWorker:!Qt},Nb=jb,Bo=Nb,Fo;Bo.canUseDOM&&(Fo=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function _b(e,n){if(!Bo.canUseDOM||n&&!("addEventListener"in document))return!1;var t="on"+e,i=t in document;if(!i){var a=document.createElement("div");a.setAttribute(t,"return;"),i=typeof a[t]=="function"}return!i&&Fo&&e==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var kb=_b,Eb=wb,Sb=kb,ha=10,pa=40,ma=800;function Ho(e){var n=0,t=0,i=0,a=0;return"detail"in e&&(t=e.detail),"wheelDelta"in e&&(t=-e.wheelDelta/120),"wheelDeltaY"in e&&(t=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=t,t=0),i=n*ha,a=t*ha,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||a)&&e.deltaMode&&(e.deltaMode==1?(i*=pa,a*=pa):(i*=ma,a*=ma)),i&&!n&&(n=i<1?-1:1),a&&!t&&(t=a<1?-1:1),{spinX:n,spinY:t,pixelX:i,pixelY:a}}Ho.getEventType=function(){return Eb.firefox()?"DOMMouseScroll":Sb("wheel")?"wheel":"mousewheel"};var Ob=Ho,Cb=Ob;const Ab=yn(Cb);function zb(e,n,t,i,a,o){o===void 0&&(o=0);var c=yt(e,n,o),m=c.width,v=c.height,y=Math.min(m,t),x=Math.min(v,i);return y>x*a?{width:x*a,height:x}:{width:y,height:y/a}}function Pb(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function It(e,n,t,i,a){a===void 0&&(a=0);var o=yt(n.width,n.height,a),c=o.width,m=o.height;return{x:ga(e.x,c,t.width,i),y:ga(e.y,m,t.height,i)}}function ga(e,n,t,i){var a=n*i/2-t/2;return Br(e,-a,a)}function va(e,n){return Math.sqrt(Math.pow(e.y-n.y,2)+Math.pow(e.x-n.x,2))}function ba(e,n){return Math.atan2(n.y-e.y,n.x-e.x)*180/Math.PI}function Tb(e,n,t,i,a,o,c){o===void 0&&(o=0),c===void 0&&(c=!0);var m=c?Ib:Mb,v=yt(n.width,n.height,o),y=yt(n.naturalWidth,n.naturalHeight,o),x={x:m(100,((v.width-t.width/a)/2-e.x/a)/v.width*100),y:m(100,((v.height-t.height/a)/2-e.y/a)/v.height*100),width:m(100,t.width/v.width*100/a),height:m(100,t.height/v.height*100/a)},u=Math.round(m(y.width,x.width*y.width/100)),s=Math.round(m(y.height,x.height*y.height/100)),l=y.width>=y.height*i,g=l?{width:Math.round(s*i),height:s}:{width:u,height:Math.round(u/i)},d=Te(Te({},g),{x:Math.round(m(y.width-g.width,x.x*y.width/100)),y:Math.round(m(y.height-g.height,x.y*y.height/100))});return{croppedAreaPercentages:x,croppedAreaPixels:d}}function Ib(e,n){return Math.min(e,Math.max(0,n))}function Mb(e,n){return n}function Lb(e,n,t,i,a,o){var c=yt(n.width,n.height,t),m=Br(i.width/c.width*(100/e.width),a,o),v={x:m*c.width/2-i.width/2-c.width*m*(e.x/100),y:m*c.height/2-i.height/2-c.height*m*(e.y/100)};return{crop:v,zoom:m}}function Rb(e,n,t){var i=Pb(n);return t.height>t.width?t.height/(e.height*i):t.width/(e.width*i)}function $b(e,n,t,i,a,o){t===void 0&&(t=0);var c=yt(n.naturalWidth,n.naturalHeight,t),m=Br(Rb(e,n,i),a,o),v=i.height>i.width?i.height/e.height:i.width/e.width,y={x:((c.width-e.width)/2-e.x)*v,y:((c.height-e.height)/2-e.y)*v};return{crop:y,zoom:m}}function xa(e,n){return{x:(n.x+e.x)/2,y:(n.y+e.y)/2}}function Db(e){return e*Math.PI/180}function yt(e,n,t){var i=Db(t);return{width:Math.abs(Math.cos(i)*e)+Math.abs(Math.sin(i)*n),height:Math.abs(Math.sin(i)*e)+Math.abs(Math.cos(i)*n)}}function Br(e,n,t){return Math.min(Math.max(e,n),t)}function Xt(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.filter(function(t){return typeof t=="string"&&t.length>0}).join(" ").trim()}var qb=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Bb=1,Fb=3,Hb=1,Uo=function(e){yb(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.cropperRef=M.createRef(),t.imageRef=M.createRef(),t.videoRef=M.createRef(),t.containerPosition={x:0,y:0},t.containerRef=null,t.styleRef=null,t.containerRect=null,t.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},t.dragStartPosition={x:0,y:0},t.dragStartCrop={x:0,y:0},t.gestureZoomStart=0,t.gestureRotationStart=0,t.isTouching=!1,t.lastPinchDistance=0,t.lastPinchRotation=0,t.rafDragTimeout=null,t.rafPinchTimeout=null,t.wheelTimer=null,t.currentDoc=typeof document<"u"?document:null,t.currentWindow=typeof window<"u"?window:null,t.resizeObserver=null,t.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},t.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!t.containerRef)){var i=!0;t.resizeObserver=new window.ResizeObserver(function(a){if(i){i=!1;return}t.computeSizes()}),t.resizeObserver.observe(t.containerRef)}},t.preventZoomSafari=function(i){return i.preventDefault()},t.cleanEvents=function(){t.currentDoc&&(t.currentDoc.removeEventListener("mousemove",t.onMouseMove),t.currentDoc.removeEventListener("mouseup",t.onDragStopped),t.currentDoc.removeEventListener("touchmove",t.onTouchMove),t.currentDoc.removeEventListener("touchend",t.onDragStopped),t.currentDoc.removeEventListener("gesturechange",t.onGestureChange),t.currentDoc.removeEventListener("gestureend",t.onGestureEnd),t.currentDoc.removeEventListener("scroll",t.onScroll))},t.clearScrollEvent=function(){t.containerRef&&t.containerRef.removeEventListener("wheel",t.onWheel),t.wheelTimer&&clearTimeout(t.wheelTimer)},t.onMediaLoad=function(){var i=t.computeSizes();i&&(t.emitCropData(),t.setInitialCrop(i)),t.props.onMediaLoaded&&t.props.onMediaLoaded(t.mediaSize)},t.setInitialCrop=function(i){if(t.props.initialCroppedAreaPercentages){var a=Lb(t.props.initialCroppedAreaPercentages,t.mediaSize,t.props.rotation,i,t.props.minZoom,t.props.maxZoom),o=a.crop,c=a.zoom;t.props.onCropChange(o),t.props.onZoomChange&&t.props.onZoomChange(c)}else if(t.props.initialCroppedAreaPixels){var m=$b(t.props.initialCroppedAreaPixels,t.mediaSize,t.props.rotation,i,t.props.minZoom,t.props.maxZoom),o=m.crop,c=m.zoom;t.props.onCropChange(o),t.props.onZoomChange&&t.props.onZoomChange(c)}},t.computeSizes=function(){var i,a,o,c,m,v,y=t.imageRef.current||t.videoRef.current;if(y&&t.containerRef){t.containerRect=t.containerRef.getBoundingClientRect(),t.saveContainerPosition();var x=t.containerRect.width/t.containerRect.height,u=((i=t.imageRef.current)===null||i===void 0?void 0:i.naturalWidth)||((a=t.videoRef.current)===null||a===void 0?void 0:a.videoWidth)||0,s=((o=t.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((c=t.videoRef.current)===null||c===void 0?void 0:c.videoHeight)||0,l=y.offsetWidth<u||y.offsetHeight<s,g=u/s,d=void 0;if(l)switch(t.state.mediaObjectFit){default:case"contain":d=x>g?{width:t.containerRect.height*g,height:t.containerRect.height}:{width:t.containerRect.width,height:t.containerRect.width/g};break;case"horizontal-cover":d={width:t.containerRect.width,height:t.containerRect.width/g};break;case"vertical-cover":d={width:t.containerRect.height*g,height:t.containerRect.height};break}else d={width:y.offsetWidth,height:y.offsetHeight};t.mediaSize=Te(Te({},d),{naturalWidth:u,naturalHeight:s}),t.props.setMediaSize&&t.props.setMediaSize(t.mediaSize);var b=t.props.cropSize?t.props.cropSize:zb(t.mediaSize.width,t.mediaSize.height,t.containerRect.width,t.containerRect.height,t.props.aspect,t.props.rotation);return(((m=t.state.cropSize)===null||m===void 0?void 0:m.height)!==b.height||((v=t.state.cropSize)===null||v===void 0?void 0:v.width)!==b.width)&&t.props.onCropSizeChange&&t.props.onCropSizeChange(b),t.setState({cropSize:b},t.recomputeCropPosition),t.props.setCropSize&&t.props.setCropSize(b),b}},t.saveContainerPosition=function(){if(t.containerRef){var i=t.containerRef.getBoundingClientRect();t.containerPosition={x:i.left,y:i.top}}},t.onMouseDown=function(i){t.currentDoc&&(i.preventDefault(),t.currentDoc.addEventListener("mousemove",t.onMouseMove),t.currentDoc.addEventListener("mouseup",t.onDragStopped),t.saveContainerPosition(),t.onDragStart(n.getMousePoint(i)))},t.onMouseMove=function(i){return t.onDrag(n.getMousePoint(i))},t.onScroll=function(i){t.currentDoc&&(i.preventDefault(),t.saveContainerPosition())},t.onTouchStart=function(i){t.currentDoc&&(t.isTouching=!0,!(t.props.onTouchRequest&&!t.props.onTouchRequest(i))&&(t.currentDoc.addEventListener("touchmove",t.onTouchMove,{passive:!1}),t.currentDoc.addEventListener("touchend",t.onDragStopped),t.saveContainerPosition(),i.touches.length===2?t.onPinchStart(i):i.touches.length===1&&t.onDragStart(n.getTouchPoint(i.touches[0]))))},t.onTouchMove=function(i){i.preventDefault(),i.touches.length===2?t.onPinchMove(i):i.touches.length===1&&t.onDrag(n.getTouchPoint(i.touches[0]))},t.onGestureStart=function(i){t.currentDoc&&(i.preventDefault(),t.currentDoc.addEventListener("gesturechange",t.onGestureChange),t.currentDoc.addEventListener("gestureend",t.onGestureEnd),t.gestureZoomStart=t.props.zoom,t.gestureRotationStart=t.props.rotation)},t.onGestureChange=function(i){if(i.preventDefault(),!t.isTouching){var a=n.getMousePoint(i),o=t.gestureZoomStart-1+i.scale;if(t.setNewZoom(o,a,{shouldUpdatePosition:!0}),t.props.onRotationChange){var c=t.gestureRotationStart+i.rotation;t.props.onRotationChange(c)}}},t.onGestureEnd=function(i){t.cleanEvents()},t.onDragStart=function(i){var a,o,c=i.x,m=i.y;t.dragStartPosition={x:c,y:m},t.dragStartCrop=Te({},t.props.crop),(o=(a=t.props).onInteractionStart)===null||o===void 0||o.call(a)},t.onDrag=function(i){var a=i.x,o=i.y;t.currentWindow&&(t.rafDragTimeout&&t.currentWindow.cancelAnimationFrame(t.rafDragTimeout),t.rafDragTimeout=t.currentWindow.requestAnimationFrame(function(){if(t.state.cropSize&&!(a===void 0||o===void 0)){var c=a-t.dragStartPosition.x,m=o-t.dragStartPosition.y,v={x:t.dragStartCrop.x+c,y:t.dragStartCrop.y+m},y=t.props.restrictPosition?It(v,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):v;t.props.onCropChange(y)}}))},t.onDragStopped=function(){var i,a;t.isTouching=!1,t.cleanEvents(),t.emitCropData(),(a=(i=t.props).onInteractionEnd)===null||a===void 0||a.call(i)},t.onWheel=function(i){if(t.currentWindow&&!(t.props.onWheelRequest&&!t.props.onWheelRequest(i))){i.preventDefault();var a=n.getMousePoint(i),o=Ab(i).pixelY,c=t.props.zoom-o*t.props.zoomSpeed/200;t.setNewZoom(c,a,{shouldUpdatePosition:!0}),t.state.hasWheelJustStarted||t.setState({hasWheelJustStarted:!0},function(){var m,v;return(v=(m=t.props).onInteractionStart)===null||v===void 0?void 0:v.call(m)}),t.wheelTimer&&clearTimeout(t.wheelTimer),t.wheelTimer=t.currentWindow.setTimeout(function(){return t.setState({hasWheelJustStarted:!1},function(){var m,v;return(v=(m=t.props).onInteractionEnd)===null||v===void 0?void 0:v.call(m)})},250)}},t.getPointOnContainer=function(i,a){var o=i.x,c=i.y;if(!t.containerRect)throw new Error("The Cropper is not mounted");return{x:t.containerRect.width/2-(o-a.x),y:t.containerRect.height/2-(c-a.y)}},t.getPointOnMedia=function(i){var a=i.x,o=i.y,c=t.props,m=c.crop,v=c.zoom;return{x:(a+m.x)/v,y:(o+m.y)/v}},t.setNewZoom=function(i,a,o){var c=o===void 0?{}:o,m=c.shouldUpdatePosition,v=m===void 0?!0:m;if(!(!t.state.cropSize||!t.props.onZoomChange)){var y=Br(i,t.props.minZoom,t.props.maxZoom);if(v){var x=t.getPointOnContainer(a,t.containerPosition),u=t.getPointOnMedia(x),s={x:u.x*y-x.x,y:u.y*y-x.y},l=t.props.restrictPosition?It(s,t.mediaSize,t.state.cropSize,y,t.props.rotation):s;t.props.onCropChange(l)}t.props.onZoomChange(y)}},t.getCropData=function(){if(!t.state.cropSize)return null;var i=t.props.restrictPosition?It(t.props.crop,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):t.props.crop;return Tb(i,t.mediaSize,t.state.cropSize,t.getAspect(),t.props.zoom,t.props.rotation,t.props.restrictPosition)},t.emitCropData=function(){var i=t.getCropData();if(i){var a=i.croppedAreaPercentages,o=i.croppedAreaPixels;t.props.onCropComplete&&t.props.onCropComplete(a,o),t.props.onCropAreaChange&&t.props.onCropAreaChange(a,o)}},t.emitCropAreaChange=function(){var i=t.getCropData();if(i){var a=i.croppedAreaPercentages,o=i.croppedAreaPixels;t.props.onCropAreaChange&&t.props.onCropAreaChange(a,o)}},t.recomputeCropPosition=function(){if(t.state.cropSize){var i=t.props.restrictPosition?It(t.props.crop,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):t.props.crop;t.props.onCropChange(i),t.emitCropData()}},t.onKeyDown=function(i){var a,o,c=t.props,m=c.crop,v=c.onCropChange,y=c.keyboardStep,x=c.zoom,u=c.rotation,s=y;if(t.state.cropSize){i.shiftKey&&(s*=.2);var l=Te({},m);switch(i.key){case"ArrowUp":l.y-=s,i.preventDefault();break;case"ArrowDown":l.y+=s,i.preventDefault();break;case"ArrowLeft":l.x-=s,i.preventDefault();break;case"ArrowRight":l.x+=s,i.preventDefault();break;default:return}t.props.restrictPosition&&(l=It(l,t.mediaSize,t.state.cropSize,x,u)),i.repeat||(o=(a=t.props).onInteractionStart)===null||o===void 0||o.call(a),v(l)}},t.onKeyUp=function(i){var a,o;switch(i.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":i.preventDefault();break;default:return}t.emitCropData(),(o=(a=t.props).onInteractionEnd)===null||o===void 0||o.call(a)},t}return n.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=qb,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},n.prototype.componentWillUnmount=function(){var t,i;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((i=this.styleRef.parentNode)===null||i===void 0||i.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},n.prototype.componentDidUpdate=function(t){var i,a,o,c,m,v,y,x,u;t.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):t.aspect!==this.props.aspect?this.computeSizes():t.objectFit!==this.props.objectFit?this.computeSizes():t.zoom!==this.props.zoom?this.recomputeCropPosition():((i=t.cropSize)===null||i===void 0?void 0:i.height)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.height)||((o=t.cropSize)===null||o===void 0?void 0:o.width)!==((c=this.props.cropSize)===null||c===void 0?void 0:c.width)?this.computeSizes():(((m=t.crop)===null||m===void 0?void 0:m.x)!==((v=this.props.crop)===null||v===void 0?void 0:v.x)||((y=t.crop)===null||y===void 0?void 0:y.y)!==((x=this.props.crop)===null||x===void 0?void 0:x.y))&&this.emitCropAreaChange(),t.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),t.video!==this.props.video&&((u=this.videoRef.current)===null||u===void 0||u.load());var s=this.getObjectFit();s!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:s},this.computeSizes)},n.prototype.getAspect=function(){var t=this.props,i=t.cropSize,a=t.aspect;return i?i.width/i.height:a},n.prototype.getObjectFit=function(){var t,i,a,o;if(this.props.objectFit==="cover"){var c=this.imageRef.current||this.videoRef.current;if(c&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var m=this.containerRect.width/this.containerRect.height,v=((t=this.imageRef.current)===null||t===void 0?void 0:t.naturalWidth)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,y=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,x=v/y;return x<m?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},n.prototype.onPinchStart=function(t){var i=n.getTouchPoint(t.touches[0]),a=n.getTouchPoint(t.touches[1]);this.lastPinchDistance=va(i,a),this.lastPinchRotation=ba(i,a),this.onDragStart(xa(i,a))},n.prototype.onPinchMove=function(t){var i=this;if(!(!this.currentDoc||!this.currentWindow)){var a=n.getTouchPoint(t.touches[0]),o=n.getTouchPoint(t.touches[1]),c=xa(a,o);this.onDrag(c),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var m=va(a,o),v=i.props.zoom*(m/i.lastPinchDistance);i.setNewZoom(v,c,{shouldUpdatePosition:!1}),i.lastPinchDistance=m;var y=ba(a,o),x=i.props.rotation+(y-i.lastPinchRotation);i.props.onRotationChange&&i.props.onRotationChange(x),i.lastPinchRotation=y})}},n.prototype.render=function(){var t=this,i,a=this.props,o=a.image,c=a.video,m=a.mediaProps,v=a.cropperProps,y=a.transform,x=a.crop,u=x.x,s=x.y,l=a.rotation,g=a.zoom,d=a.cropShape,b=a.showGrid,f=a.roundCropAreaPixels,p=a.style,j=p.containerStyle,h=p.cropAreaStyle,N=p.mediaStyle,A=a.classes,O=A.containerClassName,S=A.cropAreaClassName,T=A.mediaClassName,k=(i=this.state.mediaObjectFit)!==null&&i!==void 0?i:this.getObjectFit();return M.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(E){return t.containerRef=E},"data-testid":"container",style:j,className:Xt("reactEasyCrop_Container",O)},o?M.createElement("img",Te({alt:"",className:Xt("reactEasyCrop_Image",k==="contain"&&"reactEasyCrop_Contain",k==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",k==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",T)},m,{src:o,ref:this.imageRef,style:Te(Te({},N),{transform:y||"translate(".concat(u,"px, ").concat(s,"px) rotate(").concat(l,"deg) scale(").concat(g,")")}),onLoad:this.onMediaLoad})):c&&M.createElement("video",Te({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Xt("reactEasyCrop_Video",k==="contain"&&"reactEasyCrop_Contain",k==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",k==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",T)},m,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Te(Te({},N),{transform:y||"translate(".concat(u,"px, ").concat(s,"px) rotate(").concat(l,"deg) scale(").concat(g,")")}),controls:!1}),(Array.isArray(c)?c:[{src:c}]).map(function(_){return M.createElement("source",Te({key:_.src},_))})),this.state.cropSize&&M.createElement("div",Te({ref:this.cropperRef,style:Te(Te({},h),{width:f?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:f?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Xt("reactEasyCrop_CropArea",d==="round"&&"reactEasyCrop_CropAreaRound",b&&"reactEasyCrop_CropAreaGrid",S)},v)))},n.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Fb,minZoom:Bb,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:Hb},n.getMousePoint=function(t){return{x:Number(t.clientX),y:Number(t.clientY)}},n.getTouchPoint=function(t){return{x:Number(t.clientX),y:Number(t.clientY)}},n}(M.Component);const Go=(e,n,t)=>new Promise((i,a)=>{const o=new Image;o.src=e,o.onload=()=>{const c=document.createElement("canvas");c.width=n.width,c.height=n.height,c.getContext("2d").drawImage(o,n.x,n.y,n.width,n.height,0,0,n.width,n.height),c.toBlob(v=>{if(!v){a(new Error("Canvas is empty"));return}const y=new File([v],t,{type:"image/jpeg"}),x=URL.createObjectURL(v);i({file:y,url:x})},"image/jpeg")},o.onerror=()=>a(new Error("Failed to load image"))});function Ub({fileInputRef:e,optionalImageRef:n,imagenPreview:t,imagenOpcionalPreview:i,onImageChange:a,onOptionalImageChange:o,onRemoveOptionalImage:c}){const m=!!e,v=m?"Imagen principal":"Imagen opcional",y=m?t:i,[x,u]=M.useState(!1),[s,l]=M.useState({x:0,y:0}),[g,d]=M.useState(1),[b,f]=M.useState(null),[p,j]=M.useState(null),h=()=>{const S=m?e==null?void 0:e.current:n==null?void 0:n.current;S&&S.click()},N=(S,T)=>{f(T)},A=async()=>{if(!p||!b)return;const{file:S,url:T}=await Go(p,b,"cropped.jpg");a({target:{files:[S]}}),j(null),u(!1)},O=S=>{var _;const T=(_=S.target.files)==null?void 0:_[0];if(!T)return;const k=URL.createObjectURL(T);m?(j(k),u(!0)):o(S)};return r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"mb-1 text-sm text-white font-semibold",children:v}),y?r.jsxs("div",{className:"relative w-full max-w-xs aspect-video border border-zinc-700 rounded overflow-hidden shadow-md",children:[r.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 z-10",children:[r.jsx("button",{type:"button",onClick:h,className:"bg-zinc-600 hover:bg-zinc-500 text-white px-3 py-1 text-xs rounded shadow",children:"Reemplazar"}),!m&&r.jsx("button",{type:"button",onClick:c,className:"bg-zinc-600 hover:bg-zinc-500 text-white px-3 py-1 text-xs rounded shadow",children:"Quitar"})]}),r.jsx("img",{src:y,alt:"preview",className:"w-full h-full object-contain bg-black"})]}):r.jsxs("button",{type:"button",onClick:h,className:"bg-zinc-700 hover:bg-zinc-600 text-white px-3 py-2 rounded shadow text-sm",children:["Subir ",v]}),r.jsx("input",{type:"file",accept:"image/*",ref:m?e:n,onChange:O,className:"hidden"}),x&&p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50",children:r.jsxs("div",{className:"bg-zinc-900 p-4 rounded shadow-lg max-w-lg w-full space-y-4",children:[r.jsx("div",{className:"relative w-full aspect-video bg-black",children:r.jsx(Uo,{image:p,crop:s,zoom:g,aspect:16/9,onCropChange:l,onZoomChange:d,onCropComplete:N})}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-zinc-700 text-white rounded",children:"Cancelar"}),r.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded",children:"Usar imagen"})]})]})})]})}const Me=[];for(let e=0;e<256;++e)Me.push((e+256).toString(16).slice(1));function Gb(e,n=0){return(Me[e[n+0]]+Me[e[n+1]]+Me[e[n+2]]+Me[e[n+3]]+"-"+Me[e[n+4]]+Me[e[n+5]]+"-"+Me[e[n+6]]+Me[e[n+7]]+"-"+Me[e[n+8]]+Me[e[n+9]]+"-"+Me[e[n+10]]+Me[e[n+11]]+Me[e[n+12]]+Me[e[n+13]]+Me[e[n+14]]+Me[e[n+15]]).toLowerCase()}let Xr;const Vb=new Uint8Array(16);function Wb(){if(!Xr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xr=crypto.getRandomValues.bind(crypto)}return Xr(Vb)}const Kb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ya={randomUUID:Kb};function Zb(e,n,t){var a;if(ya.randomUUID&&!n&&!e)return ya.randomUUID();e=e||{};const i=e.random??((a=e.rng)==null?void 0:a.call(e))??Wb();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,n){if(t=t||0,t<0||t+16>n.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let o=0;o<16;++o)n[t+o]=i[o];return n}return Gb(i)}function Yb({onDraftGenerated:e}){const[n,t]=M.useState(""),[i,a]=M.useState(!1),[o,c]=M.useState(""),m=async()=>{if(!n.trim()){c("Por favor ingresa una URL");return}a(!0),c("");try{const y=localStorage.getItem("token"),x=await fetch("/api/redactor-ia/generar-desde-url",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({url:n.trim()})}),u=await x.json();if(!x.ok)throw new Error(u.error||u.message||"Error al generar borrador");e({titulo:u.titulo||"",categoria:u.categoria||"",bajada:u.bajada||"",contenidoHtml:u.contenidoHtml||"",etiquetas:u.etiquetas||[]}),t(""),c("")}catch(y){console.error("Error generando borrador desde URL:",y),c(y.message||"Error al generar el borrador")}finally{a(!1)}},v=y=>{y.key==="Enter"&&!i&&(y.preventDefault(),m())};return r.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-700 rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"🔗 Generar desde URL (solo texto)"}),r.jsx("input",{type:"text",value:n,onChange:y=>t(y.target.value),onKeyDown:v,placeholder:"https://ejemplo.com/articulo",disabled:i,className:"w-full px-3 py-2 bg-zinc-950 border border-zinc-700 rounded text-white text-sm focus:outline-none focus:ring-2 focus:ring-red-500/50 disabled:opacity-50 disabled:cursor-not-allowed"})]}),r.jsx("button",{type:"button",onClick:m,disabled:i||!n.trim(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-zinc-700 disabled:cursor-not-allowed text-white text-sm font-medium rounded transition-colors duration-200 whitespace-nowrap mt-7",children:i?"Generando...":"Generar"})]}),o&&r.jsxs("div",{className:"mt-2 p-2 bg-red-900/20 border border-red-700/50 rounded text-red-400 text-xs",children:["❌ ",o]}),i&&r.jsx("div",{className:"mt-2 text-xs text-zinc-500",children:"⏳ Extrayendo contenido y generando borrador... Esto puede tardar 10-20 segundos"}),r.jsx("div",{className:"mt-2 text-xs text-zinc-600",children:"💡 Solo rellenará campos de texto (título, categoría, contenido). Las imágenes no se modificarán."})]})}function Qb({form:e,setForm:n,editId:t,autorVisible:i,fileInputRef:a,optionalImageRef:o,imagenOpcionalPreview:c,handleInputChange:m,handleImageChange:v,handleOptionalImageChange:y,handleRemoveOptionalImage:x,handleContentChange:u,handleSubmit:s,handleCancelEdit:l,isUploadingAIMain:g=!1,isUploadingAIOptional:d=!1}){const[b,f]=M.useState({imageSrc:null,crop:{x:0,y:0},zoom:1,croppedAreaPixels:null,cropping:!1}),p=()=>e.titulo!==""||e.contenido!==""||e.imagen!==null||e.imagenPreview!==null||c!==null||e.destacada,j=S=>{const T=S.target.files[0];if(T&&T.type.startsWith("image/")){const k=new FileReader;k.onloadend=()=>{f(_=>({..._,imageSrc:k.result,cropping:!0}))},k.readAsDataURL(T)}},h=(S,T)=>{f(k=>({...k,croppedAreaPixels:T}))},N=async()=>{const S=await Go(b.imageSrc,b.croppedAreaPixels,Zb()+".jpeg");n(T=>({...T,imagen:S.file,imagenPreview:S.url})),f({imageSrc:null,crop:{x:0,y:0},zoom:1,croppedAreaPixels:null,cropping:!1})},A=()=>{f({imageSrc:null,crop:{x:0,y:0},zoom:1,croppedAreaPixels:null,cropping:!1})},O=S=>{n(T=>({...T,titulo:S.titulo||T.titulo,categoria:S.categoria||T.categoria,contenido:S.contenidoHtml||T.contenido})),console.log("[NewsForm] Borrador desde URL aplicado:",S.titulo)};return r.jsxs(r.Fragment,{children:[b.cropping&&r.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center z-50",children:[r.jsx("div",{className:"relative w-80 h-80 bg-zinc-900 rounded border border-zinc-800 shadow",children:r.jsx(Uo,{image:b.imageSrc,crop:b.crop,zoom:b.zoom,aspect:16/9,onCropChange:S=>f(T=>({...T,crop:S})),onZoomChange:S=>f(T=>({...T,zoom:S})),onCropComplete:h})}),r.jsxs("div",{className:"mt-4 flex gap-4",children:[r.jsx("button",{onClick:N,className:"btn-primary",children:"Confirmar recorte"}),r.jsx("button",{onClick:A,className:"btn-ghost",children:"Cancelar"})]})]}),r.jsxs("form",{id:"form-news",onSubmit:s,className:"admin-card p-5 mb-10 space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",name:"titulo",value:e.titulo,onChange:m,placeholder:"Título",className:"admin-input",required:!0}),r.jsxs("select",{name:"categoria",value:e.categoria,onChange:m,className:"admin-select",children:[r.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Categorías"}),r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"Política",children:"Política"}),r.jsx("option",{value:"Economía",children:"Economía"}),r.jsx("option",{value:"Internacional",children:"Internacional"}),r.jsx("option",{value:"Socio político",children:"Socio político"}),r.jsx("option",{value:"Tecnología",children:"Tecnología"}),r.jsx("option",{value:"Tendencia",children:"Tendencia"})]})]}),r.jsxs("p",{className:"text-zinc-400 text-base",children:["Por: ",r.jsx("span",{className:"text-white",children:e.autor||i}),e.categoria&&r.jsxs("span",{className:"ml-2 text-white/50",children:["· Categoría: ",r.jsx("span",{className:`${e.categoria==="Socio político"?"text-red-600":e.categoria==="Tecnología"?"text-cyan-500":e.categoria==="Tendencia"?"text-orange-500":"text-white/80"}`,children:e.categoria})]})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",name:"destacada",checked:e.destacada,onChange:S=>n(T=>({...T,destacada:S.target.checked}))}),"Marcar como noticia destacada"]}),r.jsx(Yb,{onDraftGenerated:O}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("label",{className:"text-white",children:"Imagen principal (ajustar miniatura)"}),r.jsx("button",{type:"button",onClick:()=>{var S;return(S=a.current)==null?void 0:S.click()},className:"btn-ghost text-sm w-fit",children:"Subir imagen principal"}),r.jsx("input",{type:"file",accept:"image/*",ref:a,onChange:j,className:"hidden"}),e.imagenPreview&&r.jsx("img",{src:e.imagenPreview,alt:"Miniatura",className:"w-full max-w-xl max-h-64 object-cover rounded border border-zinc-700 shadow",style:{marginTop:"0.5rem"}})]}),r.jsx(Ub,{fileInputRef:null,optionalImageRef:o,imagenPreview:null,imagenOpcionalPreview:c,onImageChange:()=>{},onOptionalImageChange:y,onRemoveOptionalImage:x}),r.jsx(Lo,{value:e.contenido,onChange:u,className:"bg-zinc-900 text-white rounded border border-zinc-800"}),r.jsxs("div",{className:"grid gap-2 border-t border-zinc-800 pt-4",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-white/90",children:[r.jsx("input",{type:"checkbox",name:"programar",checked:!!e.programar,onChange:m,className:"accent-red-600"}),"Publicar más tarde"]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("input",{type:"datetime-local",name:"publicarEl",value:e.publicarEl||"",onChange:m,disabled:!e.programar,className:"admin-input disabled:opacity-50",style:{textAlign:"center"}})}),r.jsx("p",{className:"text-xs text-white/50 text-center",children:"La hora se toma según tu navegador (el backend guarda en UTC)."})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{type:"submit",disabled:!p()||g||d,className:"btn-primary text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:g||d?"Procesando imágenes IA...":t?"Actualizar":"Publicar"}),p()&&r.jsx("button",{type:"button",onClick:l,className:"btn-ghost text-sm",children:t?"Cancelar edición":"Cancelar publicación"})]})]})]})}function Xb({newsList:e,comments:n,expanded:t,onEdit:i,onDelete:a,onShare:o,onRescrape:c,onViewComments:m,onDeleteComment:v,countTotalComments:y,currentPage:x,totalPages:u,totalItems:s,uiTotalPages:l,setCurrentPage:g,filtros:d,setFiltros:b,onFilter:f,pageSize:p,setPageSize:j,counts:h,loadingList:N,loadingCounts:A}){const O=F=>F.publishedToFacebook===!0||F.facebook_status==="published",S=F=>{const{name:D,value:C}=F.target;b(R=>({...R,[D]:C}))},T=F=>{const D={...d,statusFilter:F};b(D),f({statusFilter:F,fbStatus:F==="fbPending"?"pending":"all",page:1})},k=()=>{f({...d,page:1})},_=F=>{F>=1&&F<=l&&!N&&(g(F),f({...d,page:F}))},E=(h==null?void 0:h.fbPending)??0,P=he.useMemo(()=>{let F=e||[];return(d==null?void 0:d.statusFilter)==="scheduled"?F=F.filter(D=>(D==null?void 0:D.status)==="scheduled"):(d==null?void 0:d.statusFilter)==="published"&&(F=F.filter(D=>(D==null?void 0:D.status)==="published")),F},[e,d==null?void 0:d.statusFilter]),z=he.useMemo(()=>{const F=P.reduce((D,C)=>{const R=C.categoria||"General";return D[R]||(D[R]=[]),D[R].push(C),D},{});return Object.keys(F).forEach(D=>{(d==null?void 0:d.statusFilter)==="scheduled"?F[D].sort((C,R)=>new Date(C.publishAt||0)-new Date(R.publishAt||0)):F[D].sort((C,R)=>new Date(R.createdAt)-new Date(C.createdAt))}),F},[P,d==null?void 0:d.statusFilter]),L=!N&&P.length===0,U=(d==null?void 0:d.statusFilter)==="published"?(h==null?void 0:h.published)??s:(d==null?void 0:d.statusFilter)==="scheduled"?(h==null?void 0:h.scheduled)??s:(d==null?void 0:d.statusFilter)==="fbPending"?(h==null?void 0:h.fbPending)??s:(h==null?void 0:h.all)??s,G=F=>{var C,R;if(O(F))return"green";const D=F.facebook_status||((R=(C=F.share)==null?void 0:C.fb)==null?void 0:R.status);return D==="sharing"?"yellow":D==="error"?"red":"gray"},Q=F=>{var R,I,H,q;const D=F.facebook_status||((I=(R=F.share)==null?void 0:R.fb)==null?void 0:I.status),C=F.facebook_last_error||((q=(H=F.share)==null?void 0:H.fb)==null?void 0:q.error);switch(D){case"published":case"posted":case"confirmed":return"✅ Compartido en Facebook";case"sharing":return"⏳ Publicando en Facebook...";case"error":return`❌ Error: ${C||"Error al compartir"}`;default:return"⚫ Pendiente de compartir en Facebook"}};return r.jsxs("div",{className:"mt-6 sm:mt-10",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-end justify-between gap-3 sm:gap-4 mb-4",children:[r.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2 md:grid-cols-4 flex-1 min-w-0",children:[r.jsx("input",{type:"text",name:"search",value:d.search,onChange:S,onKeyDown:F=>F.key==="Enter"&&k(),placeholder:"Buscar por título",className:"bg-zinc-900 border border-zinc-700 rounded px-3 py-2"}),r.jsxs("select",{name:"categoria",value:d.categoria,onChange:S,className:"bg-zinc-900 border border-zinc-700 rounded px-3 py-2",children:[r.jsx("option",{value:"",children:"Categorías"}),r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"Política",children:"Política"}),r.jsx("option",{value:"Economía",children:"Economía"}),r.jsx("option",{value:"Internacional",children:"Internacional"}),r.jsx("option",{value:"Socio político",children:"Socio político"}),r.jsx("option",{value:"Tecnología",children:"Tecnología"}),r.jsx("option",{value:"Tendencia",children:"Tendencia"})]}),r.jsx("input",{type:"date",name:"fechaDesde",value:d.fechaDesde,onChange:S,className:"bg-zinc-900 border border-zinc-700 rounded px-3 py-2"}),r.jsx("input",{type:"date",name:"fechaHasta",value:d.fechaHasta,onChange:S,className:"bg-zinc-900 border border-zinc-700 rounded px-3 py-2"})]}),r.jsx("button",{onClick:k,className:"h-11 px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white font-medium transition-colors w-full sm:w-auto",children:"Aplicar filtros"})]}),r.jsx("div",{className:"mb-4 sticky top-0 z-30 bg-zinc-950/95 backdrop-blur-sm py-3 -mx-3 sm:-mx-4 px-3 sm:px-4",children:r.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3",children:r.jsx("div",{className:"flex items-center gap-1 bg-zinc-900 p-1 rounded-lg border border-zinc-700 w-full sm:w-fit overflow-x-auto no-scrollbar",children:[{key:"all",label:"Todas"},{key:"published",label:"Publicadas"},{key:"scheduled",label:"Programadas"},{key:"fbPending",label:"FB pendientes"}].map(({key:F,label:D})=>r.jsx("button",{onClick:()=>T(F),className:`flex-shrink-0 px-4 py-2 text-sm rounded-md transition-all duration-200 ${(d==null?void 0:d.statusFilter)===F?"bg-red-600 text-white":"text-white/70 hover:text-white hover:bg-zinc-800"}`,role:"tab","aria-selected":(d==null?void 0:d.statusFilter)===F,"aria-current":(d==null?void 0:d.statusFilter)===F?"true":void 0,"aria-label":`${D} - ${h?A?"cargando":h[F]||0:""} noticias`,children:r.jsxs("span",{className:"whitespace-nowrap",children:[D,F==="fbPending"?E>0&&r.jsxs("span",{className:"ml-1.5 text-xs opacity-75",children:["(",E,")"]}):h&&r.jsxs("span",{className:"ml-1.5 text-xs opacity-75",children:["(",A?"…":h[F]||0,")"]})]})},F))})})}),r.jsxs("div",{className:"mb-4 text-white/80",children:["Total de noticias: ",r.jsx("span",{className:"font-semibold text-white",children:U})]}),N?r.jsx("div",{className:"space-y-4",children:Array.from({length:3},(F,D)=>r.jsx("div",{className:"border border-zinc-700 rounded-lg p-4 bg-zinc-900 animate-pulse",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-20 h-16 bg-zinc-700 rounded"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-zinc-700 rounded w-3/4"}),r.jsx("div",{className:"h-3 bg-zinc-700 rounded w-1/2"})]})]})},D))}):L?r.jsx("div",{className:"p-6 border border-zinc-800 rounded-lg bg-zinc-900 text-center text-white/70",children:(d==null?void 0:d.statusFilter)==="scheduled"?"No hay noticias programadas con los filtros aplicados.":(d==null?void 0:d.statusFilter)==="published"?"No hay noticias publicadas con los filtros aplicados.":(d==null?void 0:d.statusFilter)==="fbPending"?"No hay noticias pendientes de publicación en Facebook.":"No hay resultados para los filtros aplicados."}):Object.entries(z).map(([F,D])=>r.jsxs("div",{className:"mb-8",children:[r.jsxs("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:["Categoría: ",F]}),r.jsx("div",{className:"space-y-4",children:D.map(C=>{var q,w,$,B,V,W,X,ie,re,ce,Y,le,ue;const R=C.status==="scheduled",I=C.publishAt?new Date(C.publishAt).toLocaleString():"",H=C.publishedAt||C.createdAt?new Date(C.publishedAt||C.createdAt).toLocaleString():"";return r.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/60 backdrop-blur p-3 sm:p-4",children:[r.jsxs("div",{className:"grid grid-cols-[56px,1fr,auto] sm:grid-cols-[72px,1fr,auto] gap-3 items-start",children:[C.imagen&&r.jsx("div",{className:"w-14 h-14 sm:w-18 sm:h-18 flex-shrink-0",children:r.jsx("img",{src:C.imagen,alt:C.titulo,className:"w-full h-full object-cover rounded-lg border border-zinc-800"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[r.jsx("h4",{className:"flex-1 min-w-0 text-base sm:text-[15px] font-medium text-gray-50 line-clamp-2 leading-tight",title:C.titulo,children:C.titulo}),r.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[R&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-[11px] rounded-full border border-yellow-500/30 bg-yellow-500/10 text-yellow-300 whitespace-nowrap",children:"Programada"}),C.isFacebookCandidate&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-[11px] rounded-full border border-blue-500/40 bg-blue-500/10 text-blue-300 whitespace-nowrap",children:"FB pendiente"})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-xs sm:text-[13px] text-zinc-400",children:[R?r.jsxs("span",{children:["Programada: ",I]}):r.jsxs("span",{children:["Publicada: ",H]}),r.jsx("span",{children:"·"}),r.jsxs("span",{children:["Autor: ",C.autor||"Anónimo"]}),r.jsx("span",{children:"·"}),r.jsxs("span",{children:["(",C.categoria||"General",")"]})]})]}),r.jsx("div",{className:"flex flex-col gap-2 flex-shrink-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 sm:gap-2",children:[r.jsx("div",{title:Q(C),"aria-label":Q(C),children:r.jsx(js,{size:12,className:`fill-current transition-colors ${G(C)==="green"?"text-green-500":G(C)==="yellow"?"text-yellow-500 animate-pulse":G(C)==="red"?"text-red-500":"text-gray-500"}`})}),C.facebook_status==="error"||((w=(q=C.share)==null?void 0:q.fb)==null?void 0:w.status)==="error"?r.jsx("button",{onClick:()=>o&&o(C._id),title:"Reintentar publicación en Facebook","aria-label":"Reintentar publicación en Facebook",className:"h-10 w-10 grid place-items-center rounded-xl hover:bg-zinc-800/70 text-yellow-400 hover:text-yellow-300 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500",children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M1 4v6h6M23 20v-6h-6"}),r.jsx("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"})]})}):r.jsx("button",{onClick:()=>o&&o(C._id),title:C.status==="scheduled"?"No se puede compartir - noticia programada":C.facebook_status==="published"||((B=($=C.share)==null?void 0:$.fb)==null?void 0:B.status)==="posted"?"Ya compartido en Facebook":C.facebook_status==="sharing"?"Publicando en Facebook...":"Compartir en Facebook","aria-label":C.status==="scheduled"?"No se puede compartir - noticia programada":C.facebook_status==="published"||((W=(V=C.share)==null?void 0:V.fb)==null?void 0:W.status)==="posted"?"Ya compartido en Facebook":"Compartir en Facebook",disabled:C.status==="scheduled"||C.facebook_status==="sharing"||C.facebook_status==="published"||((ie=(X=C.share)==null?void 0:X.fb)==null?void 0:ie.status)==="posted",className:"h-10 w-10 grid place-items-center rounded-xl hover:bg-zinc-800/70 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-sky-500",children:r.jsx(Bs,{size:16,className:C.facebook_status==="published"||((ce=(re=C.share)==null?void 0:re.fb)==null?void 0:ce.status)==="posted"?"text-gray-400":"text-blue-500"})}),(C.facebook_permalink_url||((le=(Y=C.share)==null?void 0:Y.fb)==null?void 0:le.permalink))&&r.jsx("a",{href:C.facebook_permalink_url||C.share.fb.permalink,target:"_blank",rel:"noopener noreferrer",title:"Ver publicación en Facebook","aria-label":"Ver publicación en Facebook",className:"h-10 w-10 grid place-items-center rounded-xl hover:bg-zinc-800/70 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:r.jsx(ft,{size:16,className:"text-blue-400"})}),C.status==="published"&&r.jsx("button",{onClick:()=>c&&c(C._id),title:"Re-scrapear en Facebook (actualiza la miniatura)","aria-label":"Re-scrapear en Facebook",className:"h-10 w-10 grid place-items-center rounded-xl hover:bg-zinc-800/70 text-purple-400 hover:text-purple-300 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500",children:r.jsx(er,{size:16})}),r.jsx("button",{onClick:()=>i(C),title:"Editar","aria-label":"Editar noticia",className:"h-10 w-10 grid place-items-center rounded-xl hover:bg-zinc-800/70 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500",children:r.jsx(Vs,{size:16,className:"text-yellow-400"})}),r.jsx("button",{onClick:()=>a(C._id),title:"Eliminar","aria-label":"Eliminar noticia",className:"h-10 w-10 grid place-items-center rounded-xl hover:bg-zinc-800/70 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500",children:r.jsx(Je,{size:16,className:"text-red-500"})}),r.jsx("button",{onClick:()=>m(C._id),title:"Ver comentarios","aria-label":`Ver comentarios (${n[C._id]?y(n[C._id]):0})`,className:"h-10 min-w-[44px] px-2 grid place-items-center rounded-xl hover:bg-zinc-800/70 text-white/70 hover:text-blue-400 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(lr,{size:16}),n[C._id]&&r.jsx("span",{className:"text-xs font-semibold",children:y(n[C._id])})]})})]})})]}),n[C._id]&&r.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Comentarios: ",n[C._id].length]}),(t==null?void 0:t[C._id])&&((ue=n[C._id])==null?void 0:ue.length)>0&&r.jsx("div",{className:"mt-4 border-top border-white/10 pt-4"})]},C._id)})})]},F)),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-8 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[r.jsx("button",{onClick:()=>_(x-1),disabled:x<=1||N,className:"h-11 px-4 bg-zinc-800 rounded-lg hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-1 sm:flex-none","aria-label":"Página anterior",children:"Anterior"}),r.jsxs("span",{className:"text-white text-sm sm:text-base whitespace-nowrap",children:["Página ",Math.min(x,l)," de ",l]}),r.jsx("button",{onClick:()=>_(x+1),disabled:x>=l||N,className:"h-11 px-4 bg-zinc-800 rounded-lg hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-1 sm:flex-none","aria-label":"Página siguiente",children:"Siguiente"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-white/70 text-sm",children:"Por página:"}),r.jsxs("select",{className:"bg-zinc-900 border border-zinc-700 rounded px-2 py-1",value:p,onChange:F=>{const D=Number(F.target.value)||10;j(D),f({page:1})},children:[r.jsx("option",{value:5,children:"5"}),r.jsx("option",{value:10,children:"10"}),r.jsx("option",{value:20,children:"20"}),r.jsx("option",{value:50,children:"50"})]})]})]})]})}const tt={BASE_MAIN:1024,BASE_OPT:768,PREVIEW:512,MAX_ATTEMPTS_MAIN:1,MAX_ATTEMPTS_OPT:1,DAILY_LIMIT:40},Jt=(e,n,t,i)=>{const a=`${e}|${n}|${t}|${i}`;let o=0;for(let c=0;c<a.length;c++){const m=a.charCodeAt(c);o=(o<<5)-o+m,o=o&o}return`ai-img-${Math.abs(o)}`},Jb=async(e,n)=>{if(!e||!n||e===n)return!0;try{const t=new Image,i=new Image;t.crossOrigin="anonymous",i.crossOrigin="anonymous",await Promise.all([new Promise((g,d)=>{t.onload=g,t.onerror=d,t.src=e}),new Promise((g,d)=>{i.onload=g,i.onerror=d,i.src=n})]);const a=8,o=document.createElement("canvas"),c=document.createElement("canvas");o.width=o.height=a,c.width=c.height=a;const m=o.getContext("2d"),v=c.getContext("2d");m.drawImage(t,0,0,a,a),v.drawImage(i,0,0,a,a);const y=m.getImageData(0,0,a,a).data,x=v.getImageData(0,0,a,a).data;let u=0;for(let g=0;g<y.length;g+=4)u+=Math.abs(y[g]-x[g]),u+=Math.abs(y[g+1]-x[g+1]),u+=Math.abs(y[g+2]-x[g+2]);const s=a*a*3*255,l=1-u/s;return console.log(`[AI Similarity] Similitud: ${(l*100).toFixed(1)}%`),l>.85}catch(t){return console.error("[AI Similarity] Error comparando imágenes:",t),!1}};function ex({newsId:e,title:n,content:t,disabled:i=!1,onPickCover:a,onPickSecondary:o,onTempChange:c}){const[m,v]=M.useState("realista"),[y,x]=M.useState({main:null,secondary:null}),[u,s]=M.useState(!1),[l,g]=M.useState(!1),[d,b]=M.useState(!1),[f,p]=M.useState(!1),[j,h]=M.useState(!1),[N,A]=M.useState(null),[O,S]=M.useState(!1),[T,k]=M.useState(0),[_]=M.useState(()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"temp-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)),[E,P]=M.useState({coverUrl:null,secondaryUrl:null}),[z,L]=M.useState(()=>{try{const R=localStorage.getItem("ai-image-cache");return R?JSON.parse(R):{}}catch{return{}}}),U=(!!e||!!_)&&!d&&!f&&!j&&!O&&T<tt.DAILY_LIMIT;M.useEffect(()=>{try{localStorage.setItem("ai-image-cache",JSON.stringify(z))}catch(R){console.error("[AI Cache] Error guardando cache:",R)}},[z]),M.useEffect(()=>{const R=new Date().toDateString(),I=localStorage.getItem(`ai-daily-count-${R}`);k(I?parseInt(I):0),Object.keys(localStorage).forEach(H=>{H.startsWith("ai-daily-count-")&&!H.includes(R)&&localStorage.removeItem(H)})},[]),M.useEffect(()=>{if(!e&&_)try{const R=sessionStorage.getItem(`ai-temp-${_}`);if(R){const I=JSON.parse(R);P(I)}}catch(R){console.error("[AI] Error cargando datos temporales:",R)}},[_,e]),M.useEffect(()=>{!e&&c&&c({tempId:_,...E})},[E,_,e,c]);const G=()=>{const R=new Date().toDateString(),I=T+1;k(I),localStorage.setItem(`ai-daily-count-${R}`,I.toString())},Q=async()=>{var R,I,H,q,w,$;if(!(!U||!e&&!_)){A(null),b(!0),s(!1);try{const B=Jt(n,t,m,"main"),V=Jt(n,t,m,"optional");if(z[B]&&z[V]){console.log("[AI Cache] Usando imágenes desde cache"),x({main:z[B],secondary:z[V]}),s(!0);return}console.log("[AI Preview] Generando preview de portada...");const W=await fetch("/api/ai/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n||"",content:t||"",style:m,size:tt.PREVIEW,n:1,role:"main",...e?{newsId:e}:{tempId:_}})});if(!W.ok){const Y=await W.json().catch(()=>({}));throw(Y==null?void 0:Y.code)==="billing_hard_limit_reached"?(S(!0),new Error("Se alcanzó el límite de facturación. Por favor contacta soporte.")):(Y==null?void 0:Y.code)==="ORG_NOT_VERIFIED"||Y!=null&&Y.message&&Y.message.includes("must be verified")?new Error("Tu organización debe estar verificada para usar gpt-image-1. Verifica en OpenAI y reintenta."):new Error((Y==null?void 0:Y.message)||"Error al generar preview de portada")}const X=await W.json(),ie=(I=(R=X==null?void 0:X.images)==null?void 0:R[0])==null?void 0:I.url;if(!ie)throw new Error("No se pudo generar preview de portada");G(),console.log("[AI Preview] Generando preview secundaria...");let re=!1,ce=null;try{const Y=await fetch("/api/ai/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n||"",content:t||"",style:m,size:tt.PREVIEW,n:1,role:"optional",...e?{newsId:e}:{tempId:_}})});if(Y.ok){const le=await Y.json();ce=(q=(H=le==null?void 0:le.images)==null?void 0:H[0])==null?void 0:q.url,ce?G():re=!0}else{const le=await Y.json().catch(()=>({}));if((le==null?void 0:le.code)==="billing_hard_limit_reached")throw S(!0),new Error("Se alcanzó el límite de facturación.");console.error("[AI Preview] Error generando secundaria:",(le==null?void 0:le.message)||Y.status),re=!0}}catch(Y){console.error("[AI Preview] Error generando secundaria:",Y.message),re=!0}if(re){A("No se pudo generar la imagen secundaria. Puedes activar 'Usar la misma imagen para secundaria' o reintentar."),x({main:ie,secondary:null}),s(!0);return}if(ce&&ce!==ie&&await Jb(ie,ce)){console.log("[AI Preview] Imágenes detectadas como muy similares, regenerando secundaria...");try{const le=await fetch("/api/ai/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n||"",content:t||"",style:m,size:tt.PREVIEW,n:1,role:"optional",variation:Date.now(),...e?{newsId:e}:{tempId:_}})});if(le.ok){const ue=await le.json(),Z=($=(w=ue==null?void 0:ue.images)==null?void 0:w[0])==null?void 0:$.url;Z&&(console.log("[AI Preview] Secundaria regenerada exitosamente"),ce=Z,G())}}catch(le){console.error("[AI Preview] Error regenerando secundaria:",le)}}x({main:ie,secondary:ce||null}),s(!0)}catch(B){A(B.message)}finally{b(!1)}}},F=async()=>{var R,I,H,q;if(!(!y.main||!e&&!_)){if(!y.secondary&&!l){A("Debes tener una imagen secundaria o activar 'Usar la misma imagen para secundaria'");return}A(null);try{p(!0),console.log("[AI HQ] Generando portada en alta calidad...");const w=await fetch("/api/ai/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n||"",content:t||"",style:m,size:tt.BASE_MAIN,n:1,role:"main",square:!0,...e?{newsId:e}:{tempId:_}})});if(!w.ok){const W=await w.json().catch(()=>({}));throw(W==null?void 0:W.code)==="billing_hard_limit_reached"?(S(!0),new Error("Se alcanzó el límite de facturación.")):new Error((W==null?void 0:W.message)||"Error al generar portada HQ")}const $=await w.json(),B=(I=(R=$==null?void 0:$.images)==null?void 0:R[0])==null?void 0:I.url;if(!B)throw new Error("No se pudo generar portada HQ");const V=Jt(n,t,m,"main");if(L(W=>({...W,[V]:B})),a&&await a(B),p(!1),G(),!l&&y.secondary){h(!0),console.log("[AI HQ] Generando secundaria en alta calidad...");let W=!1,X=null;try{const ie=await fetch("/api/ai/images",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n||"",content:t||"",style:m,size:tt.BASE_OPT,n:1,role:"optional",...e?{newsId:e}:{tempId:_}})});if(ie.ok){const re=await ie.json();X=(q=(H=re==null?void 0:re.images)==null?void 0:H[0])==null?void 0:q.url,X||(W=!0)}else{const re=await ie.json().catch(()=>({}));if((re==null?void 0:re.code)==="billing_hard_limit_reached")throw S(!0),new Error("Se alcanzó el límite de facturación.");console.error("[AI HQ] Error generando secundaria HQ:",(re==null?void 0:re.message)||ie.status),W=!0}}catch(ie){console.error("[AI HQ] Error generando secundaria HQ:",ie.message),W=!0}if(h(!1),W)if(window.confirm("No se pudo generar la imagen secundaria en alta calidad. ¿Deseas usar la imagen principal también como secundaria?"))console.log("[AI HQ] Usuario eligió usar portada como secundaria"),o&&await o(B);else throw new Error("Generación de imagen secundaria cancelada por el usuario");else if(X){const ie=Jt(n,t,m,"optional");L(re=>({...re,[ie]:X})),o&&await o(X),G()}}else(l||!y.secondary)&&(console.log("[AI HQ] Usando misma imagen para secundaria (elección del usuario)"),o&&await o(B));s(!1),x({main:null,secondary:null}),alert("✅ Imágenes generadas y aplicadas correctamente")}catch(w){A(w.message)}finally{p(!1),h(!1)}}},D=()=>{s(!1),x({main:null,secondary:null})},C=d||f||j;return r.jsxs("fieldset",{className:"mt-6 border border-zinc-700 rounded-lg p-4",children:[r.jsx("legend",{className:"px-2 text-white/80",children:"Generar imágenes con IA"}),i&&r.jsx("div",{className:"mb-3 text-xs text-white/60",children:!n||!t?"Completa el título y contenido para generar imágenes con IA.":"Guarda la noticia para habilitar la generación con IA."}),O&&r.jsx("div",{className:"mb-3 p-2 bg-red-900/30 border border-red-700 rounded text-xs text-red-200",children:"⚠️ Se alcanzó el límite de facturación. Por favor contacta soporte."}),T>=tt.DAILY_LIMIT&&r.jsxs("div",{className:"mb-3 p-2 bg-yellow-900/30 border border-yellow-700 rounded text-xs text-yellow-200",children:["⚠️ Has alcanzado el límite diario de ",tt.DAILY_LIMIT," generaciones."]}),u?r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-700 rounded p-4",children:[r.jsx("h3",{className:"text-sm font-medium mb-3 text-white",children:"Vista previa de imágenes generadas"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Portada (se generará en 1024px)"}),r.jsx("img",{src:y.main,alt:"Preview portada",className:"w-full aspect-square object-cover rounded border border-zinc-700"})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs text-white/60 mb-1",children:["Secundaria ",l?"(usará la misma)":"(se generará en 768px)"]}),y.secondary||l?r.jsx("img",{src:l?y.main:y.secondary,alt:"Preview secundaria",className:"w-full aspect-square object-cover rounded border border-zinc-700"}):r.jsx("div",{className:"w-full aspect-square bg-zinc-800 rounded border border-zinc-700 flex items-center justify-center",children:r.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'No se pudo generar preview secundaria. Activa "Usar la misma imagen" o reintenta.'})})]})]}),r.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[r.jsx("button",{onClick:D,disabled:C,className:"px-3 py-1.5 bg-zinc-700 hover:bg-zinc-600 rounded text-white disabled:opacity-60",children:"Cancelar"}),r.jsx("button",{onClick:F,disabled:C,className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 rounded text-white disabled:opacity-60",children:f?"Generando portada HQ…":j?"Generando secundaria HQ…":"Confirmar y generar en alta calidad"})]})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[r.jsx("label",{className:"text-sm text-white/80",children:"Estilo:"}),r.jsxs("select",{className:"bg-zinc-900 border border-zinc-700 rounded px-3 py-2",value:m,onChange:R=>v(R.target.value),disabled:i||C,children:[r.jsx("option",{value:"realista",children:"Foto realista"}),r.jsx("option",{value:"ilustracion",children:"Ilustración"}),r.jsx("option",{value:"infografia",children:"Infografía"})]}),r.jsx("button",{onClick:Q,disabled:!U||!(n!=null&&n.trim())||!(t!=null&&t.trim()),className:"ml-auto px-3 py-1.5 bg-red-600 hover:bg-red-700 rounded text-white disabled:opacity-60",children:d?"Generando previews…":"Generar 2 (Portada + Opcional)"})]}),r.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"useSameForSecondary",checked:l,onChange:R=>g(R.target.checked),className:"rounded border-zinc-600"}),r.jsx("label",{htmlFor:"useSameForSecondary",className:"text-sm text-white/70",children:"Usar la misma imagen para secundaria (ahorra créditos)"})]})]}),N&&r.jsxs("div",{className:"mt-3 text-sm text-red-400",children:[N,N.includes("verificada")&&r.jsx("div",{className:"mt-1",children:r.jsx("a",{href:"https://platform.openai.com/settings/organization/general",target:"_blank",rel:"noreferrer",className:"underline",children:"Abrir verificación de organización"})})]}),C&&r.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-white/60",children:[r.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white/20 border-t-white rounded-full"}),r.jsx("span",{children:d?"Generando vistas previas...":f?"Generando portada en alta calidad...":j?"Generando imagen secundaria...":"Procesando..."})]}),r.jsxs("div",{className:"mt-4 text-xs text-white/40",children:[r.jsx("p",{children:"• Las imágenes se generan primero en baja resolución (512px) para preview"}),r.jsx("p",{children:"• Al confirmar, se generan en alta calidad: portada (1024px) y secundaria (768px)"}),r.jsx("p",{children:"• La variante 16:9 de la portada se deriva automáticamente sin costo adicional"}),r.jsxs("p",{children:["• Generaciones hoy: ",T," / ",tt.DAILY_LIMIT]})]})]})}function tx({newsId:e,newsTitle:n,onClose:t}){const[i,a]=M.useState([]),[o,c]=M.useState(0),[m,v]=M.useState(!0),[y,x]=M.useState(null),[u,s]=M.useState(null);M.useEffect(()=>{e&&l()},[e]);const l=async()=>{v(!0),x(null);try{const f=localStorage.getItem("token"),p=await fetch(`/api/admin/news/${e}/comments`,{headers:{Authorization:`Bearer ${f}`}});if(!p.ok)throw new Error("Error al cargar comentarios");const j=await p.json();a(j.comentarios||[]),c(j.total||0)}catch(f){x(f.message)}finally{v(!1)}},g=async(f,p=!1)=>{const j=p?"¿Eliminar permanentemente este comentario y todas sus respuestas?":"¿Marcar este comentario como eliminado?";if(window.confirm(j)){s(f);try{const h=localStorage.getItem("token"),N=p?`/api/admin/comments/${f}/hard`:`/api/admin/comments/${f}`;if(!(await fetch(N,{method:"DELETE",headers:{Authorization:`Bearer ${h}`}})).ok)throw new Error("Error al eliminar");await l()}catch(h){alert(`Error: ${h.message}`)}finally{s(null)}}},d=f=>{const p=Math.floor((new Date-new Date(f))/1e3);return p<60?"hace unos segundos":p<3600?`hace ${Math.floor(p/60)} min`:p<86400?`hace ${Math.floor(p/3600)} h`:`hace ${Math.floor(p/86400)} días`},b=({comment:f,level:p=0})=>{var h,N,A,O,S;const j=f.deletedAt||((h=f.contenido)==null?void 0:h.includes("[Comentario eliminado"))||((N=f.texto)==null?void 0:N.includes("[Comentario eliminado"));return r.jsx("div",{className:`${p>0?"ml-8 mt-2":"mt-3"}`,children:r.jsxs("div",{className:`bg-zinc-800 rounded-lg p-4 border ${j?"border-red-900 bg-red-950/20":"border-zinc-700"}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ka,{className:"w-4 h-4 text-zinc-400"}),r.jsx("span",{className:"text-sm font-medium text-white",children:f.usuario||((A=f.userId)==null?void 0:A.name)||"Anónimo"}),r.jsxs("span",{className:"text-xs text-zinc-500",children:["· ",d(f.createdAt)]}),p>0&&r.jsx("span",{className:"text-xs text-blue-400",children:"Respuesta"})]}),r.jsx("p",{className:`text-sm ${j?"text-red-400 italic":"text-zinc-300"}`,children:f.contenido||f.texto||f.mensaje}),((O=f.userId)==null?void 0:O.email)&&r.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:f.userId.email})]}),r.jsx("div",{className:"flex gap-2",children:!j&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>g(f._id,!1),disabled:u===f._id,className:"p-2 bg-yellow-500/10 hover:bg-yellow-500/20 text-yellow-400 rounded transition disabled:opacity-50",title:"Soft delete",children:r.jsx(Je,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>g(f._id,!0),disabled:u===f._id,className:"p-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded transition disabled:opacity-50",title:"Eliminar permanentemente",children:r.jsx(Qe,{className:"w-4 h-4"})})]})})]}),((S=f.respuestas)==null?void 0:S.length)>0&&r.jsx("div",{className:"mt-3 space-y-2",children:f.respuestas.map(T=>r.jsx(b,{comment:T,level:p+1},T._id))})]})})};return r.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-zinc-900 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-zinc-700",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-zinc-700",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(lr,{className:"w-6 h-6 text-blue-400"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Gestión de Comentarios"}),r.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:n})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-zinc-800 rounded-lg transition",children:r.jsx(Qe,{className:"w-5 h-5 text-zinc-400"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:m?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):y?r.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[r.jsx(it,{className:"w-5 h-5"}),r.jsxs("span",{children:["Error: ",y]})]})}):i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(lr,{className:"w-12 h-12 text-zinc-600 mx-auto mb-3"}),r.jsx("p",{className:"text-zinc-400",children:"No hay comentarios en esta noticia"})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4 text-sm text-zinc-400",children:["Total: ",o," comentario",o!==1?"s":""]}),r.jsx("div",{className:"space-y-3",children:i.map(f=>r.jsx(b,{comment:f},f._id))})]})}),r.jsxs("div",{className:"p-4 border-t border-zinc-700 flex justify-between items-center",children:[r.jsxs("div",{className:"text-xs text-zinc-500",children:[r.jsxs("span",{className:"inline-flex items-center gap-1 mr-4",children:[r.jsx(Je,{className:"w-3 h-3 text-yellow-400"}),"Soft delete"]}),r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx(Qe,{className:"w-3 h-3 text-red-400"}),"Hard delete"]})]}),r.jsx("button",{onClick:t,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg transition",children:"Cerrar"})]})]})})}function rx({newsId:e,onClose:n}){const[t,i]=M.useState([]),[a,o]=M.useState(!0),[c,m]=M.useState({});M.useEffect(()=>{v()},[e]);const v=async()=>{o(!0);try{const g=await fetch(`/api/comments/${e}`);if(g.ok){const d=await g.json();i(d);const b={};d==null||d.forEach(f=>{f.respuestas&&f.respuestas.length>0&&(b[f._id]=!0)}),m(b)}}catch(g){console.error("Error al cargar comentarios:",g)}finally{o(!1)}},y=async g=>{if(!window.confirm("¿Estás seguro de que quieres eliminar este comentario?"))return;const d=localStorage.getItem("token");try{(await fetch(`/api/comments/${g}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`}})).ok&&await v()}catch(b){console.error("Error al eliminar comentario:",b)}},x=g=>{m(d=>({...d,[g]:!d[g]}))},u=g=>new Date(g).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),s=g=>{g.target===g.currentTarget&&n()},l=(g,d=0)=>{var b;return r.jsxs("div",{className:"relative",children:[d>0&&r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 bg-blue-500/30",style:{marginLeft:`${(d-1)*1.5+.75}rem`}}),r.jsxs("div",{className:`
          bg-zinc-800/80 border border-zinc-700/50 rounded-lg mb-3 p-4 
          hover:bg-zinc-800 transition-all duration-200
          ${d>0?"ml-6 border-l-2 border-l-blue-500/50":""}
        `,style:{marginLeft:d>0?`${d*1.5}rem`:"0"},children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("div",{className:"flex items-center gap-2 flex-1",children:r.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/60",children:[r.jsx(ka,{size:12}),r.jsx("span",{className:"font-medium text-white/80",children:((b=g.usuario)==null?void 0:b.name)||"Usuario anónimo"}),r.jsx("span",{children:"•"}),r.jsx(Rt,{size:12}),r.jsx("span",{children:u(g.createdAt)}),d>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsx(lr,{size:12}),r.jsx("span",{className:"text-blue-400",children:"Respuesta"})]})]})}),r.jsx("button",{onClick:()=>y(g._id),className:"flex items-center justify-center w-8 h-8 rounded-full bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 transition-all duration-200 group",title:"Eliminar comentario",children:r.jsx(Je,{size:14,className:"group-hover:scale-110 transition-transform"})})]}),r.jsx("div",{className:"mb-3",children:r.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:g.texto})}),g.respuestas&&g.respuestas.length>0&&r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>x(g._id),className:"flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 transition-colors bg-blue-500/10 hover:bg-blue-500/20 px-2 py-1 rounded-full",children:c[g._id]?r.jsxs(r.Fragment,{children:[r.jsx(Mt,{size:12}),"Ocultar ",g.respuestas.length," respuesta",g.respuestas.length>1?"s":""]}):r.jsxs(r.Fragment,{children:[r.jsx(Ea,{size:12}),"Ver ",g.respuestas.length," respuesta",g.respuestas.length>1?"s":""]})})})]}),g.respuestas&&g.respuestas.length>0&&c[g._id]&&r.jsx("div",{className:"relative",children:g.respuestas.map(f=>l(f,d+1))})]},g._id)};return r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s,children:r.jsxs("div",{className:"bg-zinc-900 border border-zinc-700/50 rounded-lg w-full max-w-4xl max-h-[85vh] flex flex-col shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-700/50",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Comentarios"}),r.jsx("button",{onClick:n,className:"flex items-center justify-center w-8 h-8 rounded-full bg-zinc-800 hover:bg-zinc-700 text-white/70 hover:text-white transition-all duration-200",children:r.jsx(Qe,{size:18})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-white/60",children:"Cargando comentarios..."})}):t.length===0?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"text-white/60",children:"No hay comentarios aún"})}):r.jsx("div",{children:t.map(g=>l(g,0))})})]})})}async function wa(e,n){try{const t=await fetch(e,{mode:"cors",headers:{Accept:"image/*"}});if(!t.ok)throw new Error(`Error al obtener imagen: ${t.status} ${t.statusText}`);const i=await t.blob();if(!i.type.startsWith("image/"))throw new Error(`El archivo no es una imagen válida. Tipo: ${i.type}`);return new File([i],n,{type:i.type||"image/jpeg",lastModified:Date.now()})}catch(t){throw t.name==="TypeError"&&t.message.includes("cors")?new Error("Error de CORS: La imagen debe servirse desde el mismo origen o con headers CORS correctos"):t.name==="TypeError"&&t.message.includes("fetch")?new Error("Error de red: No se pudo conectar al servidor de imágenes"):t}}function ja(e="cover"){const n=Date.now();return`${e==="cover"?"portada-ai":"secundaria-ai"}-${n}.jpg`}function nx(){const[e,n]=M.useState([]),[t,i]=M.useState({}),[a,o]=M.useState({}),c=M.useRef(),m=M.useRef(),[v,y]=M.useState(null),[x,u]=M.useState(""),[s,l]=M.useState({open:!1,id:null,title:""}),g=(te,se)=>l({open:!0,id:te,title:se}),d=()=>l({open:!1,id:null,title:""}),[b,f]=M.useState(!1),[p,j]=M.useState(null),[h,N]=M.useState(1),[A,O]=M.useState(1),[S,T]=M.useState(0),[k,_]=M.useState(10),[E,P]=M.useState(1),[z,L]=M.useState(!1),[U,G]=M.useState(!1),[Q,F]=M.useState(!1),[D,C]=M.useState(!1),[R,I]=M.useState({all:0,published:0,scheduled:0}),H=M.useRef(0),[q,w]=M.useState({categoria:"",search:"",fechaDesde:"",fechaHasta:"",statusFilter:"all",fbStatus:"all"}),[$,B]=M.useState({titulo:"",contenido:"",imagen:null,imagenPreview:null,imagenes:[],imagenesPreview:[],autor:"",categoria:"",destacada:!1,imagenOpcional:null,programar:!1,publicarEl:""}),[V,W]=M.useState(null);M.useEffect(()=>{Y(),X()},[]),M.useEffect(()=>{ce()},[q.categoria,q.search,q.fechaDesde,q.fechaHasta]),M.useEffect(()=>{const te=q.statusFilter==="published"?R.published:q.statusFilter==="scheduled"?R.scheduled:q.statusFilter==="fbPending"?R.fbPending:R.all,se=Math.max(1,Math.ceil(te/k));P(se)},[R,q.statusFilter,k]),M.useEffect(()=>{if(!v)return;const te=Object.keys(sessionStorage).filter(ye=>ye.startsWith("ai-temp-"));if(!te.length)return;const se=JSON.parse(sessionStorage.getItem(te[0])||"{}"),{tempId:ve,coverUrl:me,secondaryUrl:ge}=se;!ve||!me&&!ge||(async()=>{try{console.log(`[AI attach] Adjuntando ${ve} a noticia ${v}`);const ye=await fetch("/api/ai/images/attach",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newsId:v,tempId:ve,coverUrl:me,secondaryUrl:ge})});if(ye.ok){const we=await ye.json();we.coverUrl&&B(Ue=>({...Ue,imagenPreview:we.coverUrl,imagen:null})),we.secondaryUrl&&typeof W=="function"&&W(we.secondaryUrl),sessionStorage.removeItem(te[0]),console.log("[AI attach] ✅ Imágenes adjuntadas exitosamente")}else{const we=await ye.json().catch(()=>({}));console.error("[AI attach] Error:",we.error||"Error desconocido")}}catch(ye){console.error("[AI attach] Error:",ye.message)}})()},[v,W]);const X=async()=>{var se;const te=localStorage.getItem("token");try{const me=await(await fetch("/api/users/profile",{headers:{Authorization:`Bearer ${te}`}})).json(),ge=(se=me.nickname)!=null&&se.trim()?me.nickname:`${me.firstName||""} ${me.lastName||""}`.trim();u(ge||"Anónimo"),B(ye=>({...ye,autor:ge||"Anónimo"}))}catch(ve){console.error("❌ Error al cargar perfil",ve)}},ie=(te={})=>{const se={...q.categoria&&{categoria:q.categoria},...q.search&&{search:q.search,titulo:q.search},...q.fechaDesde&&{fechaDesde:q.fechaDesde},...q.fechaHasta&&{fechaHasta:q.fechaHasta},...q.fbStatus&&q.fbStatus!=="all"&&{fbStatus:q.fbStatus},...te};return new URLSearchParams(se).toString()},re=async te=>{const se=ie({...te,limit:1e3}),ve=await fetch(`/api/news?${se}`);if(!ve.ok)return[];const me=await ve.json();return Array.isArray(me==null?void 0:me.noticias)?me.noticias:[]},ce=async()=>{G(!0);try{const te=ie({limit:1}),se=await fetch(`/api/news?${te}`);if(se.ok){const je=await se.json();if(je.totalsByStatus){I(je.totalsByStatus),G(!1);return}}const me=(await re({status:"published"})).filter(je=>(je==null?void 0:je.status)==="published").length,ye=(await re({status:"scheduled",includeScheduled:"true"})).filter(je=>(je==null?void 0:je.status)==="scheduled").length,Ue=(await re({fbStatus:"pending"})).length;I({published:me,scheduled:ye,all:me+ye,fbPending:Ue})}catch(te){console.error("❌ Error al refrescar contadores",te)}finally{G(!1)}},Y=async({page:te=1,limit:se=k,categoria:ve="",search:me="",fechaDesde:ge="",fechaHasta:ye="",statusFilter:we=q.statusFilter,fbStatus:Ue=q.fbStatus}={})=>{const je=++H.current;L(!0);try{const Ae=new URLSearchParams({page:te,limit:se,...ve&&{categoria:ve},...me&&{search:me,titulo:me},...ge&&{fechaDesde:ge},...ye&&{fechaHasta:ye}});we==="fbPending"||Ue==="pending"?Ae.set("fbStatus","pending"):we==="published"?Ae.set("status","published"):we==="scheduled"?(Ae.set("status","scheduled"),Ae.set("includeScheduled","true")):we==="all"&&Ae.set("includeScheduled","true");const Re=async Oe=>{const Ct=await fetch(`/api/news?${Oe.toString()}`);if(!Ct.ok)throw new Error("Error al obtener noticias");return Ct.json()};let Be=await Re(Ae);if(we==="scheduled"&&(!(Be!=null&&Be.noticias)||Be.noticias.length===0)){const Oe=new URLSearchParams(Ae.toString());Oe.delete("status"),Oe.set("includeScheduled","true"),Be=await Re(Oe)}let Ie=Array.isArray(Be==null?void 0:Be.noticias)?Be.noticias:[];const Pn=String(me||"").trim().toLowerCase();Pn&&(Ie=Ie.filter(Oe=>String((Oe==null?void 0:Oe.titulo)||"").toLowerCase().includes(Pn))),we==="scheduled"?Ie=Ie.filter(Oe=>(Oe==null?void 0:Oe.status)==="scheduled"):we==="published"&&(Ie=Ie.filter(Oe=>(Oe==null?void 0:Oe.status)==="published"));const Vt=+Be.totalItems||+Be.total||NaN,Tn=+Be.totalPages||NaN;let pt,Ot;if(Number.isFinite(Tn)?(pt=Math.max(1,Tn),Ot=Number.isFinite(Vt)?Vt:(pt-1)*se+Ie.length):Number.isFinite(Vt)?(Ot=Math.max(0,Vt),pt=Math.max(1,Math.ceil(Ot/se))):(pt=Ie.length===se?te+1:te,Ot=(pt-1)*se+Ie.length),je!==H.current)return;const Yo=we==="published"?R.published:we==="scheduled"?R.scheduled:we==="fbPending"?R.fbPending:R.all,Wt=Math.max(1,Math.ceil(Yo/se));if(n(Ie),O(pt),T(Ot),P(Wt),te>Wt)return N(Wt),Y({page:Wt,limit:se,categoria:ve,search:me,fechaDesde:ge,fechaHasta:ye,statusFilter:we,fbStatus:Ue});if(N(te),Ie.length>0)for(const Oe of Ie)try{const Ct=await fetch(`/api/comments/${Oe._id}`);if(!Ct.ok)continue;const Qo=await Ct.json();i(Xo=>({...Xo,[Oe._id]:Qo}))}catch{}}catch(Ae){console.error("❌ Error al obtener noticias",Ae)}finally{je===H.current&&L(!1)}},le=te=>{const{name:se,type:ve,value:me,checked:ge}=te.target;B(ye=>({...ye,[se]:ve==="checkbox"?ge:me}))},ue=async te=>{te&&B(se=>({...se,imagen:te,imagenPreview:URL.createObjectURL(te)}))},Z=async te=>{te&&(B(se=>({...se,imagenOpcional:te})),W(URL.createObjectURL(te)))},K=te=>{const se=te.target.files[0];ue(se)},ae=te=>{const se=te.target.files[0];Z(se)},oe=()=>{B(te=>({...te,imagenOpcional:""})),W(null),setTimeout(()=>{const te=document.getElementById("form-news");te&&te.requestSubmit()},100)},J=te=>{B(se=>({...se,contenido:te}))},ne=async te=>{if(!(!te||Q)){F(!0);try{const se=ja("cover"),ve=await wa(te,se);if(await ue(ve),c.current){const me=new DataTransfer;me.items.add(ve),c.current.files=me.files;const ge=new Event("change",{bubbles:!0});c.current.dispatchEvent(ge)}console.log("✅ Imagen de IA procesada como principal:",se)}catch(se){console.error("❌ Error al procesar imagen de IA como principal:",se),alert(`Error al usar imagen de IA: ${se.message}`)}finally{F(!1)}}},de=async te=>{if(!(!te||D)){C(!0);try{const se=ja("secondary"),ve=await wa(te,se);await Z(ve),console.log("✅ Imagen de IA procesada como opcional:",se)}catch(se){console.error("❌ Error al procesar imagen de IA como opcional:",se),alert(`Error al usar imagen de IA: ${se.message}`)}finally{C(!1)}}},pe=async te=>{var ye;te.preventDefault();const se=localStorage.getItem("token");if(Q||D){alert("⏳ Por favor espera a que terminen de procesarse las imágenes de IA.");return}const ve=$.titulo.trim(),me=$.contenido.trim();if(!ve){alert("⚠️ El título no puede estar vacío.");return}if(!me){alert("⚠️ El contenido no puede estar vacío.");return}if(!$.imagen&&!$.imagenPreview&&!v){alert("⚠️ Debes agregar una imagen principal.");return}const ge=new FormData;ge.append("titulo",ve),ge.append("contenido",me),ge.append("categoria",$.categoria),ge.append("destacada",$.destacada?"true":"false"),ge.append("autor",($.autor||x||"Anónimo").trim()),$.programar&&$.publicarEl?(ge.append("status","scheduled"),ge.append("publishAt",new Date($.publicarEl).toISOString())):ge.append("status","published"),$.imagen&&ge.append("imagen",$.imagen),$.imagenOpcional instanceof File?ge.append("imagenOpcional",$.imagenOpcional):$.imagenOpcional===""&&ge.append("imagenOpcional","");try{const we=await fetch(v?`/api/news/${v}`:"/api/news",{method:v?"PUT":"POST",headers:{Authorization:`Bearer ${se}`},body:ge});if(!we.ok){const Ae=await we.json().catch(()=>({}));throw console.error("❌ Backend error:",Ae),new Error("Error al guardar noticia")}await Y({page:1,limit:k,...q}),await ce();const Ue=(ye=te.nativeEvent)==null?void 0:ye.submitter;(Ue==null?void 0:Ue.tagName)==="BUTTON"&&zn(),window.scrollTo({top:0,behavior:"smooth"})}catch(we){console.error("❌ Error al enviar noticia",we)}},Pe=async te=>{if(window.confirm("¿Estás seguro de eliminar esta noticia?"))try{const se=localStorage.getItem("token");await fetch(`/api/news/${te}`,{method:"DELETE",headers:{Authorization:`Bearer ${se}`}}),await Y({page:h,limit:k,...q}),await ce()}catch(se){console.error("Error al eliminar",se)}},qe=te=>{B({titulo:te.titulo,contenido:te.contenido,imagen:null,imagenPreview:te.imagen||null,imagenes:[],imagenesPreview:[],autor:te.autor,categoria:te.categoria,destacada:te.destacada,imagenOpcional:null,programar:te.status==="scheduled",publicarEl:te.publishAt?new Date(te.publishAt).toISOString().slice(0,16):""}),W(te.imagenOpcional||null),y(te._id),window.scrollTo({top:0,behavior:"smooth"})},fe=async te=>{const se=e.find(me=>me._id===te);if(!se)return;if(se.status!=="published"){alert("⚠️ Solo se pueden compartir noticias publicadas.");return}const ve=localStorage.getItem("token");try{n(Ae=>Ae.map(Re=>Re._id===te?{...Re,facebook_status:"sharing"}:Re));const me=se.contenido.replace(/<[^>]*>/g,"").substring(0,180).trim(),ge=["#LevantateCuba","#NoticiasCuba","#Cuba"],ye=`${se.titulo}

${me}...

🔗 Lee más en nuestra web

${ge.join(" ")}`,we=`${window.location.origin}/noticias/${se._id}`,Ue=await fetch("/api/social/facebook/share",{method:"POST",headers:{Authorization:`Bearer ${ve}`,"Content-Type":"application/json"},body:JSON.stringify({postId:se._id,message:ye,link:we})}),je=await Ue.json();if(Ue.ok&&je.status==="ok")n(Ae=>Ae.map(Re=>Re._id===te?{...Re,facebook_status:"published",facebook_post_id:je.fbPostId,facebook_permalink_url:je.permalink,share:{...Re.share,fb:{status:"posted",postId:je.fbPostId,permalink:je.permalink}}}:Re)),alert(`✅ Publicado en Facebook exitosamente

Puedes ver la publicación en:
${je.permalink}`);else{const Ae=je.message||"Error desconocido";n(Be=>Be.map(Ie=>Ie._id===te?{...Ie,facebook_status:"error",facebook_last_error:Ae,share:{...Ie.share,fb:{status:"error",error:Ae}}}:Ie));let Re=Ae;je.code==="INVALID_TOKEN"?Re="❌ El token de Facebook ha expirado. Por favor, contacta al administrador para renovarlo.":je.code==="PERMISSION_ERROR"?Re="❌ Sin permisos para publicar. Verifica la configuración en Meta Business Suite.":je.code==="RATE_LIMIT"&&(Re="❌ Límite de publicaciones alcanzado. Intenta más tarde."),alert(Re)}}catch(me){console.error("❌ Error al compartir:",me),n(ge=>ge.map(ye=>ye._id===te?{...ye,facebook_status:"error",facebook_last_error:me.message}:ye)),alert(`❌ Error de conexión: ${me.message}`)}},ct=async te=>{const se=localStorage.getItem("token");if(se)try{const ve=`${window.location.origin}/noticias/${te}`,me=await fetch(`/api/social/facebook/rescrape?url=${encodeURIComponent(ve)}`,{method:"GET",headers:{Authorization:`Bearer ${se}`}}),ge=await me.json();me.ok&&ge.success?alert(`✅ Re-scrape exitoso

Título detectado: ${ge.title}
Imagen: ${ge.image?"Sí":"No"}

Facebook ha actualizado su caché.`):alert(`❌ Error al re-scrapear: ${ge.message||"Error desconocido"}`)}catch(ve){console.error("Error al re-scrapear:",ve),alert("❌ Error al conectar con el servidor")}},Se=fe,We=te=>{if(!te||!Array.isArray(te))return 0;let se=te.length;return te.forEach(ve=>{ve.respuestas&&ve.respuestas.length>0&&(se+=We(ve.respuestas))}),se},Vo=te=>{j(te),f(!0)},Wo=()=>{f(!1),j(null)},Ko=async(te,se)=>{const ve=localStorage.getItem("token");await fetch(`/api/comments/${te}`,{method:"DELETE",headers:{Authorization:`Bearer ${ve}`}});const ge=await(await fetch(`/api/comments/${se}`)).json();i(ye=>({...ye,[se]:ge}))},Zo=()=>{zn(),window.scrollTo({top:0,behavior:"smooth"})},zn=()=>{B({titulo:"",contenido:"",imagen:null,imagenPreview:null,imagenes:[],imagenesPreview:[],autor:x||"",categoria:"",destacada:!1,imagenOpcional:null,programar:!1,publicarEl:""}),W(null),y(null)};return r.jsxs("div",{className:"p-4 sm:p-6 text-white text-sm md:text-base min-h-screen",children:[r.jsx("div",{className:"flex items-end justify-between gap-4 mb-4 flex-wrap",children:r.jsx("h2",{className:"text-xl font-semibold text-white",children:v?"Editando noticia":"Crear nueva noticia"})}),r.jsx(Qb,{form:$,setForm:B,editId:v,autorVisible:x,fileInputRef:c,optionalImageRef:m,imagenOpcionalPreview:V,handleInputChange:le,handleImageChange:K,handleOptionalImageChange:ae,handleRemoveOptionalImage:oe,handleContentChange:J,handleSubmit:pe,handleCancelEdit:Zo,isUploadingAIMain:Q,isUploadingAIOptional:D}),r.jsx(ex,{newsId:v,title:$.titulo,content:$.contenido,disabled:!1,onPickCover:ne,onPickSecondary:de,onTempChange:te=>{console.log("[AI] Cambio temporal:",te)}}),r.jsx(Xb,{newsList:e,comments:t,expanded:a,onEdit:qe,onDelete:Pe,onShare:Se,onRescrape:ct,onViewComments:Vo,onDeleteComment:Ko,onManageComments:g,countTotalComments:We,filtros:q,setFiltros:w,onFilter:te=>Y({page:1,limit:k,...q,...te}),currentPage:h,totalPages:A,totalItems:S,uiTotalPages:E,setCurrentPage:N,pageSize:k,setPageSize:_,counts:R,loadingList:z,loadingCounts:U}),s.open&&r.jsx(tx,{newsId:s.id,newsTitle:s.title,onClose:d}),b&&p&&r.jsx(rx,{newsId:p,onClose:Wo})]})}function Na({visible:e,onCancel:n,onConfirm:t,mensaje:i}){return e?r.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white text-gray-800 px-4 py-6 rounded-lg shadow-xl w-[90%] max-w-sm animate-fade-in",children:[r.jsx("h2",{className:"text-md font-semibold mb-4 text-center",children:i||"¿Estás seguro de eliminar?"}),r.jsxs("div",{className:"flex justify-center gap-3",children:[r.jsx("button",{onClick:n,className:"px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded",children:"Cancelar"}),r.jsx("button",{onClick:t,className:"px-3 py-1 text-sm bg-red-600 hover:bg-red-700 text-white rounded",children:"Eliminar"})]})]})}):null}const mt={}.VITE_API_BASE_URL||"/api";function ix(){ts();const[e,n]=M.useState([]),[t,i]=M.useState({}),[a,o]=M.useState({visible:!1,onConfirm:null}),[c,m]=M.useState({}),[v,y]=M.useState(1),[x,u]=M.useState(1),[s,l]=M.useState({total:0,pendientes:0,aprobadas:0,destacadas:0}),[g,d]=M.useState({estado:"todos",buscar:"",fechaDesde:"",fechaHasta:""}),[b,f]=M.useState(!1),[p,j]=M.useState(!1),[h,N]=M.useState(null),[A,O]=M.useState({visible:!1,onConfirm:null,message:""}),S=async(I=1)=>{var w;j(!0);const H=localStorage.getItem("token"),q=new URLSearchParams({page:I.toString(),limit:"10",...g.estado!=="todos"&&{estado:g.estado},...g.buscar&&{buscar:g.buscar},...g.fechaDesde&&{fechaDesde:g.fechaDesde},...g.fechaHasta&&{fechaHasta:g.fechaHasta}});try{const $=await fetch(`${mt}/reports/admin?${q}`,{headers:{Authorization:`Bearer ${H}`}});if(!$.ok)throw new Error("Error al obtener denuncias");const B=await $.json();n(B.denuncias||[]),u(((w=B.pagination)==null?void 0:w.totalPages)||1),l(B.stats||{total:0,pendientes:0,aprobadas:0,destacadas:0})}catch($){console.error("Error al cargar denuncias:",$),alert("❌ No se pudieron cargar las denuncias del servidor.")}finally{j(!1)}};M.useEffect(()=>{S(v)},[v,g]);const T=I=>{I>=1&&I<=x&&(y(I),window.scrollTo({top:0,behavior:"smooth"}))},k=I=>{i(H=>({...H,[I]:!H[I]}))},_=I=>{m(H=>({...H,[I]:!H[I]}))},E=async I=>{const H=localStorage.getItem("token");try{if(!(await fetch(`${mt}/reports/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${H}`}})).ok)throw new Error("Error al eliminar");S(v),o({visible:!1,onConfirm:null})}catch(q){console.error(q),alert("❌ No se pudo eliminar la denuncia."),o({visible:!1,onConfirm:null})}},P=async(I,H,q)=>{const w=localStorage.getItem("token");try{if(!(await fetch(`${mt}/reports/${I}/attachments/${H}`,{method:"DELETE",headers:{Authorization:`Bearer ${w}`}})).ok)throw new Error("Error al eliminar adjunto");S(v),O({visible:!1,onConfirm:null,message:""})}catch($){console.error($),alert("❌ No se pudo eliminar el adjunto."),O({visible:!1,onConfirm:null,message:""})}},z=()=>o({visible:!1,onConfirm:null}),L=()=>O({visible:!1,onConfirm:null,message:""}),U=async I=>{const H=localStorage.getItem("token");try{if(!(await fetch(`${mt}/reports/aprobar/${I}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`}})).ok)throw new Error("Error al aprobar");S(v)}catch(q){console.error(q),alert("❌ No se pudo aprobar la denuncia.")}},G=async I=>{const H=localStorage.getItem("token");try{if(!(await fetch(`${mt}/reports/destacar/${I}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`}})).ok)throw new Error("Error al destacar");S(v)}catch(q){console.error(q),alert("❌ No se pudo marcar como destacada.")}},Q=async(I,H)=>{const q=localStorage.getItem("token");try{if(!(await fetch(`${mt}/reports/${I}/comentarios/${H}`,{method:"DELETE",headers:{Authorization:`Bearer ${q}`}})).ok)throw new Error("Error al eliminar comentario");S(v)}catch(w){console.error("Error al eliminar comentario:",w)}},F=(I,H=0,q)=>!I||I.length===0?null:r.jsx("div",{className:H>0?"ml-4 mt-2 space-y-1":"space-y-2",children:I.map(w=>{var $;return r.jsxs("div",{className:`rounded-lg border ${H===0?"border-zinc-800 bg-zinc-900/50":"border-zinc-800/50 bg-zinc-900/30"} p-3`,children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-white text-sm",children:w.usuario||"Anónimo"}),r.jsx("span",{className:"text-xs text-zinc-500",children:new Date(w.fecha).toLocaleDateString()})]}),r.jsx("p",{className:"mt-1 text-sm text-zinc-300",children:w.mensaje})]}),r.jsx("button",{className:"ml-2 text-red-400 hover:text-red-300 transition p-1",onClick:()=>Q(q,w._id),title:"Eliminar",children:r.jsx(Qe,{className:"w-4 h-4"})})]}),(($=w.respuestas)==null?void 0:$.length)>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("button",{onClick:()=>k(w._id),className:"text-xs text-blue-400 hover:text-blue-300",children:t[w._id]?`Ocultar ${w.respuestas.length} respuestas`:`Ver ${w.respuestas.length} respuestas`}),t[w._id]&&F(w.respuestas,H+1,q)]})]},w._id)})}),D=I=>{const H=Math.floor((new Date-new Date(I))/1e3),q={año:31536e3,mes:2592e3,día:86400,hora:3600,minuto:60};for(const[w,$]of Object.entries(q)){const B=Math.floor(H/$);if(B>=1)return`hace ${B} ${w}${B>1?w==="mes"?"es":"s":""}`}return"justo ahora"},C=async(I,H)=>{try{const w=await(await fetch(I)).blob(),$=URL.createObjectURL(w),B=document.createElement("a");B.href=$,B.download=H||"archivo",document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL($)}catch(q){console.error("Error descargando archivo:",q),alert("❌ No se pudo descargar el archivo")}},R=I=>{const H=[];if(I.attachments&&I.attachments.length>0&&I.attachments.forEach((q,w)=>{H.push({...q,index:w,isNew:!0})}),I.media&&(!I.attachments||I.attachments.length===0)){const q=/\.(mp4|mov|webm)$/i.test(I.media);H.push({url:I.media,type:q?"video":"image",originalName:"Archivo multimedia",isLegacy:!0})}return H.length===0?null:r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[r.jsx(Ln,{className:"w-4 h-4"}),r.jsxs("span",{children:["Adjuntos (",H.length,")"]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:H.map((q,w)=>r.jsxs("div",{className:"relative group rounded-lg overflow-hidden bg-zinc-800 border border-zinc-700",children:[q.type==="image"?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:q.url,alt:q.originalName,className:"w-full h-32 object-cover cursor-pointer",onClick:()=>N(q.url)}),r.jsx("div",{className:"absolute top-2 left-2",children:r.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-black/70 backdrop-blur text-white text-xs rounded",children:[r.jsx(ur,{className:"w-3 h-3"}),"Imagen"]})})]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"relative h-32 bg-zinc-900 flex items-center justify-center",children:[r.jsx("video",{src:q.url,className:"w-full h-full",controls:!0,muted:!0}),r.jsx("div",{className:"absolute top-2 left-2 pointer-events-none",children:r.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-black/70 backdrop-blur text-white text-xs rounded",children:[r.jsx(Ss,{className:"w-3 h-3"}),"Video"]})})]})}),r.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[q.type==="image"&&r.jsx("button",{onClick:()=>N(q.url),className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg text-white transition",title:"Ver imagen completa",children:r.jsx(zs,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>C(q.url,q.originalName),className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg text-white transition",title:"Descargar",children:r.jsx(_s,{className:"w-4 h-4"})}),q.isNew&&r.jsx("button",{onClick:()=>{O({visible:!0,onConfirm:()=>P(I._id,q.index,q.originalName),message:`¿Estás seguro de eliminar el archivo "${q.originalName}"?`})},className:"p-2 bg-red-500/20 hover:bg-red-500/30 rounded-lg text-red-400 transition",title:"Eliminar adjunto",children:r.jsx(Je,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2",children:[r.jsx("p",{className:"text-xs text-white truncate",title:q.originalName,children:q.originalName}),q.size&&r.jsxs("p",{className:"text-xs text-zinc-400",children:[(q.size/(1024*1024)).toFixed(2)," MB"]})]})]},w))})]})};return r.jsxs("main",{className:"min-h-screen bg-zinc-950 text-white",children:[r.jsx("div",{className:"border-b border-zinc-800 bg-black/95 backdrop-blur sticky top-0 z-10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"py-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Panel de Denuncias"}),r.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Gestiona y modera las denuncias ciudadanas"})]}),r.jsxs("button",{onClick:()=>f(!b),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition ${b?"border-red-500 bg-red-500/10 text-red-400":"border-zinc-800 bg-zinc-900 hover:bg-zinc-800"}`,children:[r.jsx(Sa,{className:"w-4 h-4"}),"Filtros"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[r.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-zinc-500",children:"Total"}),r.jsx("p",{className:"text-xl font-bold mt-1",children:s.total})]}),r.jsx(cr,{className:"w-5 h-5 text-zinc-600"})]})}),r.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-yellow-400/80",children:"Pendientes"}),r.jsx("p",{className:"text-xl font-bold text-yellow-400 mt-1",children:s.pendientes})]}),r.jsx(De,{className:"w-5 h-5 text-yellow-500"})]})}),r.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-green-400/80",children:"Aprobadas"}),r.jsx("p",{className:"text-xl font-bold text-green-400 mt-1",children:s.aprobadas})]}),r.jsx($n,{className:"w-5 h-5 text-green-500"})]})}),r.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-purple-400/80",children:"Destacadas"}),r.jsx("p",{className:"text-xl font-bold text-purple-400 mt-1",children:s.destacadas})]}),r.jsx(Mn,{className:"w-5 h-5 text-purple-500"})]})})]})]})})}),b&&r.jsx("div",{className:"border-b border-zinc-800 bg-zinc-900/50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-1",children:"Estado"}),r.jsxs("select",{value:g.estado,onChange:I=>{d({...g,estado:I.target.value}),y(1)},className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white text-sm focus:border-red-500 focus:outline-none",children:[r.jsx("option",{value:"todos",children:"Todos"}),r.jsx("option",{value:"pendientes",children:"Pendientes"}),r.jsx("option",{value:"aprobadas",children:"Aprobadas"}),r.jsx("option",{value:"destacadas",children:"Destacadas"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-1",children:"Buscar"}),r.jsxs("div",{className:"relative",children:[r.jsx(Jr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),r.jsx("input",{type:"text",value:g.buscar,onChange:I=>{d({...g,buscar:I.target.value}),y(1)},placeholder:"Nombre o contenido...",className:"w-full pl-9 pr-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white text-sm placeholder-zinc-500 focus:border-red-500 focus:outline-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-1",children:"Desde"}),r.jsx("input",{type:"date",value:g.fechaDesde,onChange:I=>{d({...g,fechaDesde:I.target.value}),y(1)},className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white text-sm focus:border-red-500 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-1",children:"Hasta"}),r.jsx("input",{type:"date",value:g.fechaHasta,onChange:I=>{d({...g,fechaHasta:I.target.value}),y(1)},className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white text-sm focus:border-red-500 focus:outline-none"})]})]}),(g.estado!=="todos"||g.buscar||g.fechaDesde||g.fechaHasta)&&r.jsx("button",{onClick:()=>{d({estado:"todos",buscar:"",fechaDesde:"",fechaHasta:""}),y(1)},className:"mt-3 text-xs text-zinc-400 hover:text-white transition",children:"Limpiar filtros"})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[p?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-red-500"})}):e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(it,{className:"w-12 h-12 text-zinc-600 mx-auto mb-4"}),r.jsx("p",{className:"text-zinc-400",children:"No hay denuncias que mostrar"}),r.jsx("p",{className:"text-sm text-zinc-500 mt-2",children:"Ajusta los filtros o espera nuevas denuncias"})]}):r.jsx("div",{className:"space-y-4",children:e.map(I=>{var $,B,V,W,X;const H=c[I._id],q=280,w=(I.contenido||"").length>q;return r.jsxs("article",{className:`border rounded-xl transition-all hover:border-zinc-700 ${I.destacada?"border-purple-500/30 bg-purple-500/5":I.aprobada?"border-zinc-800 bg-zinc-900/30":"border-yellow-500/20 bg-yellow-500/5"}`,children:[r.jsx("div",{className:"px-4 py-3 border-b border-zinc-800/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${I.destacada?"bg-purple-500 text-black":I.aprobada?"bg-green-500 text-black":"bg-yellow-500 text-black"}`,children:(($=I.nombre)==null?void 0:$.charAt(0).toUpperCase())||"A"}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-white",children:I.nombre||"Anónimo"}),I.destacada&&r.jsx("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-400 text-xs rounded-full",children:"Destacada"}),!I.aprobada&&r.jsx("span",{className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:"Pendiente"})]}),r.jsx("p",{className:"text-xs text-zinc-500",children:D(I.createdAt)})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[(((B=I.attachments)==null?void 0:B.length)>0||I.media)&&r.jsxs("span",{className:"flex items-center gap-1 text-xs text-zinc-500",children:[r.jsx(Ln,{className:"w-3 h-3"}),((V=I.attachments)==null?void 0:V.length)||1]}),r.jsxs("span",{className:"flex items-center gap-1 text-xs text-zinc-500",children:[r.jsx(fs,{className:"w-3 h-3"}),I.likes||0]}),r.jsxs("span",{className:"flex items-center gap-1 text-xs text-zinc-500",children:[r.jsx(fr,{className:"w-3 h-3"}),((W=I.comentarios)==null?void 0:W.length)||0]})]})]})}),r.jsxs("div",{className:"px-4 py-3",children:[r.jsxs("div",{className:"text-white text-sm leading-relaxed",children:[H||!w?I.contenido:`${I.contenido.slice(0,q)}...`,w&&r.jsx("button",{onClick:()=>_(I._id),className:"ml-2 text-blue-400 hover:text-blue-300 text-xs",children:H?"Ver menos":"Ver más"})]}),R(I),((X=I.comentarios)==null?void 0:X.length)>0&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("button",{onClick:()=>k(I._id),className:"flex items-center gap-2 text-sm text-zinc-400 hover:text-white transition",children:[r.jsx(fr,{className:"w-4 h-4"}),t[I._id]?`Ocultar ${I.comentarios.length} comentarios`:`Ver ${I.comentarios.length} comentarios`]}),t[I._id]&&r.jsx("div",{className:"mt-3",children:F(I.comentarios,0,I._id)})]})]}),r.jsxs("div",{className:"px-4 py-3 border-t border-zinc-800/50 flex flex-wrap gap-2",children:[!I.aprobada&&r.jsxs("button",{onClick:()=>U(I._id),className:"flex items-center gap-2 px-3 py-1.5 bg-green-500 hover:bg-green-600 text-black text-sm font-medium rounded-lg transition",children:[r.jsx($n,{className:"w-4 h-4"}),"Aprobar"]}),r.jsx("button",{onClick:()=>G(I._id),className:`flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-lg transition ${I.destacada?"bg-purple-500 hover:bg-purple-600 text-black":"bg-zinc-800 hover:bg-zinc-700 text-white"}`,children:I.destacada?r.jsxs(r.Fragment,{children:[r.jsx(Mn,{className:"w-4 h-4 fill-current"}),"Destacada"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ks,{className:"w-4 h-4"}),"Destacar"]})}),r.jsxs("button",{onClick:()=>o({visible:!0,onConfirm:()=>E(I._id)}),className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-800 hover:bg-red-500/20 text-red-400 hover:text-red-300 text-sm font-medium rounded-lg transition",children:[r.jsx(Je,{className:"w-4 h-4"}),"Eliminar"]})]})]},I._id)})}),x>1&&r.jsxs("div",{className:"flex items-center justify-center gap-3 mt-8",children:[r.jsxs("button",{onClick:()=>T(v-1),disabled:v===1,className:"flex items-center gap-2 px-4 py-2 bg-zinc-900 border border-zinc-800 rounded-lg text-sm hover:bg-zinc-800 disabled:opacity-50 disabled:cursor-not-allowed transition",children:[r.jsx(vs,{className:"w-4 h-4"}),"Anterior"]}),r.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:Math.min(5,x)},(I,H)=>{let q;return x<=5||v<=3?q=H+1:v>=x-2?q=x-4+H:q=v-2+H,r.jsx("button",{onClick:()=>T(q),className:`w-8 h-8 rounded-lg text-sm font-medium transition ${q===v?"bg-red-500 text-black":"bg-zinc-900 border border-zinc-800 hover:bg-zinc-800 text-white"}`,children:q},H)})}),r.jsxs("button",{onClick:()=>T(v+1),disabled:v===x,className:"flex items-center gap-2 px-4 py-2 bg-zinc-900 border border-zinc-800 rounded-lg text-sm hover:bg-zinc-800 disabled:opacity-50 disabled:cursor-not-allowed transition",children:["Siguiente",r.jsx(Ea,{className:"w-4 h-4"})]})]})]}),h&&r.jsxs("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:()=>N(null),children:[r.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-red-400 transition p-2 bg-white/10 hover:bg-white/20 rounded-lg",onClick:()=>N(null),children:r.jsx(Qe,{className:"w-6 h-6"})}),r.jsx("img",{src:h,alt:"Vista ampliada",className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onClick:I=>I.stopPropagation()})]}),a.visible&&r.jsx(Na,{visible:a.visible,mensaje:"¿Estás seguro de que deseas eliminar esta denuncia? Esta acción eliminará también todos los archivos adjuntos y no se puede deshacer.",onConfirm:a.onConfirm,onCancel:z}),A.visible&&r.jsx(Na,{visible:A.visible,mensaje:A.message,onConfirm:A.onConfirm,onCancel:L})]})}function ax(){const[e,n]=M.useState([]),[t,i]=M.useState("team"),[a,o]=M.useState(""),[c,m]=M.useState(!1),[v,y]=M.useState("create"),[x,u]=M.useState(null),s={}.VITE_API_BASE_URL||"/api",l=localStorage.getItem("token");M.useEffect(()=>{g()},[]);async function g(){try{const N=await fetch(`${s}/users`,{headers:{Authorization:`Bearer ${l}`}});if(!N.ok){const A=await N.json().catch(()=>({}));o(A.message||"Error al obtener usuarios.");return}n(await N.json())}catch(N){console.error("❌ Error al cargar usuarios:",N),o("Error al conectar con el servidor.")}}const d=M.useMemo(()=>e.filter(N=>N.role==="admin"||N.role==="editor"),[e]),b=M.useMemo(()=>e.filter(N=>N.role==="user"),[e]),f=t==="team"?d:b;function p(){y("create"),u(null),m(!0)}function j(N){y("edit"),u(N),m(!0)}async function h(N){const A=e.filter(S=>S.role==="admin"),O=e.find(S=>S._id===N);if((O==null?void 0:O.role)==="admin"&&A.length<=1){alert("No puedes eliminar al último administrador.");return}if(confirm("¿Seguro que deseas eliminar este usuario?"))try{if(!(await fetch(`${s}/users/${N}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}})).ok)throw new Error("Error al eliminar");await g()}catch(S){console.error(S),alert("No se pudo eliminar el usuario.")}}return r.jsxs("div",{className:"text-white",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2 text-white",children:"👥 Usuarios"}),r.jsx("p",{className:"text-white/60",children:"Administra miembros del equipo y usuarios externos"})]}),r.jsxs("div",{className:"mb-6 flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>i("team"),className:`flex items-center gap-2 rounded-xl px-4 py-2 transition ${t==="team"?"bg-red-600 text-white":"bg-white/10 hover:bg-white/15 text-white/80"}`,"aria-pressed":t==="team",children:[r.jsx(rs,{})," Equipo",r.jsx("span",{className:"ml-1 rounded bg-black/30 px-2 py-0.5 text-xs",children:d.length})]}),r.jsxs("button",{onClick:()=>i("extern"),className:`flex items-center gap-2 rounded-xl px-4 py-2 transition ${t==="extern"?"bg-red-600 text-white":"bg-white/10 hover:bg-white/15 text-white/80"}`,"aria-pressed":t==="extern",children:[r.jsx(ns,{})," Usuarios externos",r.jsx("span",{className:"ml-1 rounded bg-black/30 px-2 py-0.5 text-xs",children:b.length})]})]}),t==="team"&&r.jsxs("button",{onClick:p,className:"btn-primary",children:[r.jsx(is,{}),"Agregar miembro del equipo"]})]}),a&&r.jsx("div",{className:"mb-6 rounded-lg bg-red-900/40 border border-red-800/40 p-4 text-center text-red-200",children:a}),r.jsxs("section",{children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:t==="team"?"👥 Miembros del equipo":"🌐 Usuarios externos"}),r.jsxs("span",{className:"text-sm text-white/60",children:[f.length," ",f.length===1?"registro":"registros"]})]}),f.length===0?r.jsx("p",{className:"text-white/60",children:t==="team"?"No hay miembros del equipo aún.":"No hay usuarios externos registrados."}):r.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map(N=>r.jsx(ox,{user:N,onEdit:()=>j(N),onDelete:()=>h(N._id)},N._id))})]}),c&&r.jsx(sx,{mode:v,user:x,onClose:()=>m(!1),onSaved:async()=>{m(!1),await g()}})]})}function ox({user:e,onEdit:n,onDelete:t}){return r.jsx("div",{className:"admin-card",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-xl font-semibold",children:e.name}),r.jsx("p",{className:"text-sm text-white/70",children:e.email}),r.jsxs("p",{className:"text-sm italic text-gray-400",children:["Rol: ",e.role]})]}),r.jsxs("div",{className:"flex gap-4 text-lg",children:[r.jsx("button",{onClick:n,className:"text-blue-400 hover:text-blue-600",title:"Editar",children:r.jsx(as,{})}),r.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700",title:"Eliminar",children:r.jsx(os,{})})]})]})})}function sx({mode:e,user:n,onClose:t,onSaved:i}){const a=e==="edit",o={}.VITE_API_BASE_URL||"/api",c=localStorage.getItem("token"),[m,v]=M.useState({name:(n==null?void 0:n.name)||"",email:(n==null?void 0:n.email)||"",role:(n==null?void 0:n.role)||"editor",password:""}),[y,x]=M.useState(!1),[u,s]=M.useState("");function l(d){const{name:b,value:f}=d.target;v(p=>({...p,[b]:f}))}async function g(d){d.preventDefault(),x(!0),s("");try{const b=a?`${o}/users/${n._id}`:`${o}/users`,f=a?"PUT":"POST",p={name:m.name,email:m.email,role:m.role,...m.password?{password:m.password}:{}},j=await fetch(b,{method:f,headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(p)}),h=await j.json().catch(()=>({}));if(!j.ok){s(h.error||"No se pudo guardar"),x(!1);return}await i()}catch(b){console.error(b),s("Error de red"),x(!1)}}return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:r.jsxs("div",{className:"w-full max-w-lg admin-panel",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-semibold",children:a?"Editar usuario":"Agregar miembro del equipo"}),r.jsx("button",{onClick:t,className:"text-white/70 hover:text-white",children:r.jsx(ss,{})})]}),u&&r.jsx("div",{className:"mb-4 rounded-lg bg-red-900/40 border border-red-800/40 px-3 py-2 text-sm text-red-200",children:u}),r.jsxs("form",{className:"space-y-4",onSubmit:g,children:[r.jsx("input",{type:"text",name:"name",value:m.name,onChange:l,placeholder:"Nombre completo",className:"admin-input",required:!0}),r.jsx("input",{type:"email",name:"email",value:m.email,onChange:l,placeholder:"Correo electrónico",className:"admin-input",required:!0}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("select",{name:"role",value:m.role,onChange:l,className:"admin-select",children:[r.jsx("option",{value:"user",children:"Usuario externo"}),r.jsx("option",{value:"editor",children:"Editor"}),r.jsx("option",{value:"admin",children:"Administrador"})]}),r.jsx("input",{type:"password",name:"password",value:m.password,onChange:l,placeholder:a?"Nueva contraseña (opcional)":"Contraseña",className:"admin-input",required:!a})]}),r.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:t,className:"btn-ghost",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:y,className:"btn-primary",children:y?"Guardando...":a?"Guardar cambios":"Crear usuario"})]})]})]})})}function lx(){return r.jsx("div",{className:"min-h-[80vh] flex flex-col items-center justify-center",children:r.jsxs("div",{className:"admin-panel max-w-4xl w-full mx-auto text-center animate-fade-in",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-red-500/20 rounded-full blur-2xl animate-pulse"}),r.jsx(In,{size:64,className:"relative text-red-500 drop-shadow-2xl"})]})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-red-500 via-red-400 to-red-500 bg-clip-text text-transparent",children:"Panel de Administración"}),r.jsxs("p",{className:"text-lg text-white/70 mb-8 max-w-2xl mx-auto",children:["Gestiona todas las secciones de la plataforma ",r.jsx("span",{className:"font-semibold text-white",children:"LevántateCuba"}),": noticias, denuncias, usuarios y más."]}),r.jsx("div",{className:"admin-divider"}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-8",children:[r.jsxs(rt,{to:"/admin/news",className:"admin-card hover:scale-[1.02] transition-transform group",children:[r.jsx(ls,{className:"text-red-500 text-3xl mb-3 mx-auto group-hover:scale-110 transition-transform"}),r.jsx("h3",{className:"font-semibold text-white mb-2",children:"Noticias"}),r.jsx("p",{className:"text-sm text-white/60",children:"Publica y edita artículos"})]}),r.jsxs(rt,{to:"/admin/reports",className:"admin-card hover:scale-[1.02] transition-transform group",children:[r.jsx(cs,{className:"text-red-500 text-3xl mb-3 mx-auto group-hover:scale-110 transition-transform"}),r.jsx("h3",{className:"font-semibold text-white mb-2",children:"Denuncias"}),r.jsx("p",{className:"text-sm text-white/60",children:"Revisa y modera reportes"})]}),r.jsxs(rt,{to:"/admin/users",className:"admin-card hover:scale-[1.02] transition-transform group",children:[r.jsx(In,{className:"text-red-500 text-3xl mb-3 mx-auto group-hover:scale-110 transition-transform"}),r.jsx("h3",{className:"font-semibold text-white mb-2",children:"Usuarios"}),r.jsx("p",{className:"text-sm text-white/60",children:"Administra permisos y roles"})]})]})]})})}function cx(){const[e,n]=M.useState([]),[t,i]=M.useState(null),[a,o]=M.useState("");M.useEffect(()=>{(async()=>{const x=localStorage.getItem("token");try{const u=await fetch("/api/password/all",{headers:{Authorization:`Bearer ${x}`}});if(!u.ok){(u.status===401||u.status===403)&&(localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("user"),window.dispatchEvent(new Event("auth:changed")),window.location.href="/admin/login");return}const s=await u.json();n(s)}catch(u){console.error("❌ Error al obtener solicitudes:",u)}})()},[]);const c=async y=>{const x=localStorage.getItem("token");try{(await fetch("/api/password/delete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({email:y})})).ok?n(s=>s.filter(l=>l.email!==y)):console.error("❌ No se pudo eliminar la solicitud")}catch(u){console.error("❌ Error al eliminar solicitud:",u)}},m=y=>{i(y),o("")},v=async()=>{if(!a.trim())return;const y=localStorage.getItem("token");try{const x=await fetch("/api/password/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({email:t,newPassword:a})});if(x.ok)n(u=>u.filter(s=>s.email!==t)),i(null),alert(`✅ Contraseña actualizada para ${t}`);else{const u=await x.json();alert("❌ "+(u.error||"Error al cambiar contraseña."))}}catch(x){console.error("❌ Error al cambiar contraseña:",x)}};return e.length===0?r.jsx("div",{className:"p-10",children:r.jsx("div",{className:"admin-card p-6 text-center text-white/70",children:"No hay solicitudes pendientes. 🙌"})}):r.jsxs("div",{className:"text-white p-6 md:p-10",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2 text-white text-center",children:"🛠 Solicitudes de Recuperación"}),r.jsx("ul",{className:"space-y-6 max-w-2xl mx-auto",children:e.map(y=>r.jsxs("li",{className:"admin-card p-5 flex justify-between items-center",children:[r.jsx("span",{className:"text-white text-sm",children:y.email}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>m(y.email),className:"btn-primary text-sm",children:"Cambiar contraseña"}),r.jsx("button",{onClick:()=>c(y.email),className:"btn-danger text-sm",children:"Eliminar"})]})]},y._id))}),t&&r.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:r.jsxs("div",{className:"admin-panel p-8 w-full max-w-md space-y-5",children:[r.jsx("h3",{className:"text-xl font-bold",children:"🔐 Nueva contraseña para:"}),r.jsx("p",{className:"text-red-400",children:t}),r.jsx("input",{type:"password",value:a,onChange:y=>o(y.target.value),placeholder:"Escribe la nueva contraseña",className:"admin-input"}),r.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx("button",{onClick:()=>i(null),className:"btn-ghost",children:"Cancelar"}),r.jsx("button",{onClick:v,className:"btn-primary",children:"Confirmar cambio"})]})]})})]})}function ux(){const[e,n]=M.useState({firstName:"",lastName:"",nickname:"",role:"",email:"",profileImage:""}),[t,i]=M.useState(""),[a,o]=M.useState(null),[c,m]=M.useState(null),v=localStorage.getItem("token");M.useEffect(()=>{if(!v)return;(async()=>{try{const l=await fetch("/api/users/profile",{headers:{Authorization:`Bearer ${v}`}});if(!l.ok)throw new Error("❌ Error al obtener perfil");const g=await l.json();n({firstName:g.firstName||"",lastName:g.lastName||"",nickname:g.nickname||"",role:g.role||"",email:g.email||"",profileImage:g.profileImage||""}),m(g.profileImage||null)}catch(l){console.error("❌ Error al cargar perfil",l)}})()},[v]);const y=s=>{const{name:l,value:g}=s.target;n(d=>({...d,[l]:g}))},x=s=>{const l=s.target.files[0];l&&(o(l),m(URL.createObjectURL(l)))},u=async()=>{try{const s=new FormData;Object.entries(e).forEach(([d,b])=>{b&&s.append(d,b)}),a&&s.append("profileImage",a);const l=await fetch("/api/users/profile",{method:"PUT",headers:{Authorization:`Bearer ${v}`},body:s}),g=await l.json();if(!l.ok)throw console.error("❌ Backend response:",g),new Error("Error al actualizar perfil");i("✅ Perfil actualizado correctamente."),setTimeout(()=>i(""),3e3)}catch(s){console.error(s),i("❌ Hubo un error al guardar.")}};return r.jsxs("div",{className:"p-4 sm:p-6 text-white text-base min-h-screen",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6 text-red-500",children:"👤 Mi Perfil"}),r.jsxs("div",{className:"admin-card p-6 max-w-2xl mx-auto space-y-4 text-center",children:[r.jsx("div",{className:"w-28 h-28 mx-auto rounded-full border border-zinc-700 overflow-hidden bg-zinc-900",children:r.jsx("img",{src:c||"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"Avatar",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm text-gray-300",children:"✍️ Tus publicaciones serán firmadas como:"}),r.jsx("p",{className:"text-xl font-semibold text-white",children:e.nickname?`"${e.nickname}"`:`${e.firstName} ${e.lastName}`.trim()||"Tu nombre"}),e.nickname&&r.jsx("p",{className:"text-sm text-gray-400",children:"(Sobrenombre activado)"}),r.jsxs("p",{className:"text-sm text-gray-400",children:["📧 ",e.email]}),r.jsxs("p",{className:"text-sm text-gray-400",children:["🔐 ",r.jsx("strong",{className:"text-yellow-400",children:e.role})]})]})]}),r.jsxs("div",{className:"admin-card p-6 space-y-5 max-w-2xl mx-auto mt-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"📷 Foto de perfil (opcional):"}),r.jsxs("label",{className:"inline-block btn-ghost cursor-pointer",children:["📁 Seleccionar foto",r.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 font-semibold mb-1",children:"Nombre:"}),r.jsx("input",{type:"text",name:"firstName",value:e.firstName,onChange:y,className:"admin-input",placeholder:"Tu nombre real"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 font-semibold mb-1",children:"Apellidos:"}),r.jsx("input",{type:"text",name:"lastName",value:e.lastName,onChange:y,className:"admin-input",placeholder:"Tus apellidos"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 font-semibold mb-1",children:"Sobrenombre (opcional):"}),r.jsx("input",{type:"text",name:"nickname",value:e.nickname,onChange:y,className:"admin-input",placeholder:"Alias público"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Si lo llenas, verás este nombre en lugar del real en tus publicaciones."})]}),r.jsx("button",{onClick:u,className:"btn-primary w-full",children:"Guardar Cambios"}),t&&r.jsx("p",{className:"mt-4 text-sm font-semibold text-center",children:t})]})]})}function dx(){const[e,n]=M.useState([]),[t,i]=M.useState(!0),[a,o]=M.useState(!1),[c,m]=M.useState(!1),[v,y]=M.useState(new Set),[x,u]=M.useState(!1),[s,l]=M.useState({}),[g,d]=M.useState({minImpact:0,confianza:"",categoria:""}),b=(k,_)=>{l(E=>({...E,[k]:_}))};M.useEffect(()=>{f(),p()},[g]),M.useEffect(()=>()=>{m(!1),o(!1),l({})},[]);const f=async()=>{try{const k=new URLSearchParams({status:"pending",...g}),P=(await(await fetch(`/api/redactor-ia/topics?${k}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json()).topics||[];return n(P),P.length}catch(k){return console.error("Error fetching topics:",k),ee.error("Error al cargar temas"),0}finally{i(!1)}},p=async()=>{try{const _=await(await fetch("/api/redactor-ia/scan/status",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();o(_.isScanning)}catch(k){console.error("Error checking scan status:",k)}},j=async()=>{if(a)return;o(!0),ee.loading("Iniciando escaneo...",{id:"scan"});let k=null;const _=12e4,E=2e3;let P=!1;const z=e.length;try{const L=await fetch("/api/redactor-ia/scan",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),U=await L.json();if(!L.ok){U.code==="SCAN_IN_PROGRESS"?ee.error("⏳ Ya hay un escaneo en curso. Espera a que termine.",{id:"scan",duration:3e3}):ee.error(U.message||U.error||"Error al iniciar escaneo",{id:"scan"});return}const Q=U.mode==="cuba_estricto";ee.success(Q?"Escaneo Cuba estricto en progreso (CiberCuba, ElToque, Martí Noticias)...":"Escaneo en progreso...",{id:"scan"}),P=!0;const F=Date.now();await new Promise((R,I)=>{const H=async()=>{try{if(Date.now()-F>_){clearInterval(k),I(new Error("Timeout: El escaneo tomó demasiado tiempo"));return}(await(await fetch("/api/redactor-ia/scan/status",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json()).isScanning||(clearInterval(k),R())}catch(q){clearInterval(k),I(q)}};H(),k=setInterval(H,E)});const D=await f(),C=Math.max(0,D-z);C>0?ee.success(`Escaneo completado: ${C} tema${C>1?"s":""} nuevo${C>1?"s":""}`,{id:"scan",duration:4e3}):ee.success("Escaneo completado: sin temas nuevos",{id:"scan",duration:3e3}),window.dispatchEvent(new CustomEvent("redactor-ia:stats-changed"))}catch(L){console.error("Error en escaneo:",L),ee.error(L.message||"Error durante el escaneo",{id:"scan"}),P&&(await f(),window.dispatchEvent(new CustomEvent("redactor-ia:stats-changed")))}finally{k&&clearInterval(k),o(!1)}},h=async(k="factual")=>{if(v.size===0){ee.error("Selecciona al menos un tema");return}if(c){ee.error("Ya hay una generación en curso. Espera a que termine.");return}const _=v.size,E=Array.from(v),P=k==="factual"?"factual":"opinión";m(!0),E.forEach(z=>b(z,"loading")),ee.loading(`🧠 Generando ${_} borrador${_>1?"es":""} en modo ${P}...`,{id:"generate"});try{const z=await fetch("/api/redactor-ia/generate",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({topicIds:E,mode:k})}),L=await z.json();z.ok?(E.forEach(U=>b(U,"done")),await new Promise(U=>setTimeout(U,800)),n(U=>U.filter(G=>!v.has(G.idTema))),y(new Set),E.forEach(U=>b(U,"idle")),window.dispatchEvent(new CustomEvent("redactor-ia:stats-changed")),ee.custom(U=>r.jsx("div",{className:`${U.visible?"animate-enter":"animate-leave"} pointer-events-auto max-w-md w-full rounded-lg border p-4 shadow-lg bg-zinc-900 text-zinc-100 ${k==="factual"?"border-sky-600/50":"border-violet-600/50"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`h-2 w-2 mt-2 rounded-full shrink-0 ${k==="factual"?"bg-sky-400":"bg-violet-400"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:"text-sm font-medium",children:["✅ ",_," borrador",_>1?"es":""," de"," ",k==="factual"?"Factual":"Opinión"," generado",_>1?"s":""," y eliminado",_>1?"s":""," de la cola."]}),r.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:'Revisa la pestaña "Borradores IA".'})]})]})}),{id:"generate",duration:4e3})):(E.forEach(U=>b(U,"error")),L.code==="GENERATION_IN_PROGRESS"?ee.error("⏳ Ya hay una generación en curso. Espera a que termine.",{id:"generate",duration:3e3}):ee.error(L.message||L.error||"❌ Error al generar borradores.",{id:"generate",duration:4e3}),setTimeout(()=>{E.forEach(U=>b(U,"idle"))},2e3))}catch{E.forEach(L=>b(L,"error")),ee.error("❌ Error de conexión. Intenta nuevamente.",{id:"generate",duration:4e3}),setTimeout(()=>{E.forEach(L=>b(L,"idle"))},2e3)}finally{m(!1)}},N=k=>{const _=new Set(v);_.has(k)?_.delete(k):_.add(k),y(_)},A=k=>{switch(k){case"Alta":return"bg-green-500/20 text-green-400 border-green-500/30";case"Media":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"Baja":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-zinc-500/20 text-zinc-400 border-zinc-500/30"}},O=async()=>{if(window.confirm("Se archivarán todos los temas visibles en la cola. Esta acción no borra permanentemente y puede revertirse desde la base de datos si es necesario. ¿Continuar?")){u(!0),ee.loading("Archivando cola...",{id:"clear-queue"});try{const E=await(await fetch("/api/redactor-ia/topics/queue",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();if(!E.ok)throw new Error(E.error||"Error al limpiar la cola");ee.success(`Archivados: ${E.modified} tema(s)`,{id:"clear-queue"}),y(new Set),await f()}catch(_){ee.error(_.message,{id:"clear-queue"})}finally{u(!1)}}},S=async()=>{if(v.size===0){ee.error("No hay temas seleccionados");return}if(window.confirm(`Se archivarán ${v.size} tema(s) seleccionado(s). ¿Confirmas?`)){u(!0),ee.loading("Archivando seleccionados...",{id:"delete-selected"});try{const E=await(await fetch("/api/redactor-ia/topics",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({ids:Array.from(v)})})).json();if(!E.ok)throw new Error(E.error||"Error al archivar seleccionados");ee.success(`Archivados: ${E.modified} tema(s)`,{id:"delete-selected"}),y(new Set),await f()}catch(_){ee.error(_.message,{id:"delete-selected"})}finally{u(!1)}}},T=()=>{v.size===e.length&&e.length>0?y(new Set):y(new Set(e.map(k=>k.idTema)))};return r.jsxs("div",{children:[r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-3 sm:p-4 lg:p-5 mb-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-12 gap-2 lg:gap-3",children:[r.jsx("button",{onClick:j,disabled:a||x,"aria-label":a?"Escaneando":"Escanear ahora",className:"h-11 xl:h-12 min-w-[44px] lg:col-span-2 flex items-center justify-center gap-2 px-4 lg:px-5 bg-cyan-600 hover:bg-cyan-700 disabled:bg-zinc-600 disabled:cursor-not-allowed rounded-xl font-medium transition-colors text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:a?r.jsxs(r.Fragment,{children:[r.jsx(er,{size:16,className:"animate-spin"}),r.jsx("span",{className:"hidden sm:inline",children:"Escaneando..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Jr,{size:16}),r.jsx("span",{children:"Escanear"})]})}),r.jsxs("button",{onClick:O,disabled:x||t||e.length===0,"aria-label":"Archivar todos los temas de la cola",className:"h-11 xl:h-12 min-w-[44px] lg:col-span-2 flex items-center justify-center gap-2 px-4 lg:px-5 bg-zinc-800 hover:bg-zinc-700 disabled:bg-zinc-800 disabled:opacity-50 disabled:cursor-not-allowed text-zinc-100 border border-zinc-700 rounded-xl font-medium transition-colors text-sm focus:outline-none focus:ring-2 focus:ring-zinc-600",children:[r.jsx(Je,{size:16}),r.jsx("span",{className:"hidden md:inline",children:"Limpiar"})]}),r.jsxs("button",{onClick:S,disabled:x||v.size===0,"aria-label":`Eliminar ${v.size} temas seleccionados`,className:"h-11 xl:h-12 min-w-[44px] lg:col-span-2 flex items-center justify-center gap-2 px-4 lg:px-5 bg-rose-700 hover:bg-rose-800 disabled:bg-rose-900 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-medium transition-colors text-sm focus:outline-none focus:ring-2 focus:ring-rose-600",children:[r.jsx(Je,{size:16}),r.jsxs("span",{className:"hidden sm:inline",children:["Eliminar (",v.size,")"]}),r.jsxs("span",{className:"sm:hidden",children:["(",v.size,")"]})]}),r.jsx("button",{onClick:()=>h("factual"),disabled:v.size===0||x||c,"aria-label":c?"Generando...":"Generar borradores factuales",className:"h-11 xl:h-12 min-w-[44px] lg:col-span-3 xl:col-span-2 flex items-center justify-center gap-2 px-4 lg:px-5 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-700 disabled:cursor-not-allowed rounded-xl font-medium transition-colors text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:c?r.jsxs(r.Fragment,{children:[r.jsx(er,{size:16,className:"animate-spin"}),r.jsx("span",{className:"hidden sm:inline",children:"Generando..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Bn,{size:16}),r.jsx("span",{children:"Factual"})]})}),r.jsx("button",{onClick:()=>h("opinion"),disabled:v.size===0||x||c,"aria-label":c?"Generando...":"Generar borradores de opinión",className:"h-11 xl:h-12 min-w-[44px] lg:col-span-3 xl:col-span-2 flex items-center justify-center gap-2 px-4 lg:px-5 bg-purple-600 hover:bg-purple-700 disabled:bg-zinc-700 disabled:cursor-not-allowed rounded-xl font-medium transition-colors text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",children:c?r.jsxs(r.Fragment,{children:[r.jsx(er,{size:16,className:"animate-spin"}),r.jsx("span",{className:"hidden sm:inline",children:"Generando..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Bn,{size:16}),r.jsx("span",{children:"Opinión"})]})})]}),v.size>0&&r.jsx("div",{className:"mt-3 pt-3 border-t border-zinc-700",children:r.jsxs("p",{className:"text-sm text-zinc-400",children:[r.jsx("span",{className:"font-medium text-white",children:v.size})," tema(s) seleccionado(s)"]})})]}),r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-3 sm:p-4 lg:p-5 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 lg:mb-4",children:[r.jsx(Sa,{size:16,className:"text-zinc-400"}),r.jsx("span",{className:"font-medium text-sm lg:text-base text-white",children:"Filtros"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 lg:gap-4",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs lg:text-sm text-zinc-400 mb-2",children:"Impacto mínimo"}),r.jsx("input",{type:"range",min:"0",max:"100",value:g.minImpact,onChange:k=>d({...g,minImpact:k.target.value}),"aria-label":"Impacto mínimo",className:"w-full h-2 min-w-0"}),r.jsxs("span",{className:"text-xs text-zinc-500 break-words",children:[g.minImpact,"%"]})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs lg:text-sm text-zinc-400 mb-2",children:"Confianza"}),r.jsxs("select",{value:g.confianza,onChange:k=>d({...g,confianza:k.target.value}),"aria-label":"Filtro de confianza",className:"w-full h-11 xl:h-12 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx("option",{value:"",children:"Todas"}),r.jsx("option",{value:"Alta",children:"Alta"}),r.jsx("option",{value:"Media",children:"Media"}),r.jsx("option",{value:"Baja",children:"Baja"})]})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2 lg:col-span-1 xl:col-span-2",children:[r.jsx("label",{className:"block text-xs lg:text-sm text-zinc-400 mb-2",children:"Categoría"}),r.jsxs("select",{value:g.categoria,onChange:k=>d({...g,categoria:k.target.value}),"aria-label":"Filtro de categoría",className:"w-full h-11 xl:h-12 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx("option",{value:"",children:"Todas"}),r.jsx("option",{value:"Política",children:"Política"}),r.jsx("option",{value:"Economía",children:"Economía"}),r.jsx("option",{value:"Internacional",children:"Internacional"}),r.jsx("option",{value:"Socio político",children:"Socio político"}),r.jsx("option",{value:"General",children:"General"})]})]})]})]}),t?r.jsx("div",{className:"text-center py-12 text-zinc-400",children:"Cargando temas..."}):e.length===0?r.jsxs("div",{className:"text-center py-12 bg-zinc-800/30 border border-zinc-700 rounded-xl",children:[r.jsx(Jr,{size:48,className:"mx-auto mb-4 text-zinc-600"}),r.jsx("p",{className:"text-zinc-400",children:"No hay temas pendientes"}),r.jsx("p",{className:"text-sm text-zinc-500 mt-2",children:'Haz clic en "Escanear Ahora" para buscar nuevas noticias'})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-zinc-800/30 border border-zinc-700 rounded-lg p-3 mb-4",children:r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v.size===e.length&&e.length>0,onChange:T,className:"w-5 h-5 shrink-0 accent-cyan-500 cursor-pointer"}),r.jsxs("span",{className:"text-sm text-zinc-300 font-medium",children:["Seleccionar todos (",e.length," temas)"]})]})}),(()=>{const k=[...e].sort((_,E)=>new Date(E.detectedAt)-new Date(_.detectedAt));return r.jsx("div",{className:"space-y-4",children:k.map(_=>{var z;const E=s[_.idTema]||"idle",P=E==="loading";return r.jsxs("div",{className:`grid grid-cols-[auto,1fr] lg:grid-cols-[auto,1fr,auto] gap-3 lg:gap-4 items-start p-3 sm:p-4 lg:p-4 xl:p-5 rounded-2xl border bg-zinc-900/60 backdrop-blur transition-all duration-200 hover:bg-zinc-900/80 hover:border-zinc-600 ${v.has(_.idTema)?"border-cyan-500 shadow-lg shadow-cyan-500/20":"border-zinc-800"} ${P?"pointer-events-none opacity-75":""}`,children:[r.jsxs("div",{className:"sr-only","aria-live":"polite",children:[E==="loading"&&"Procesando borrador...",E==="done"&&"Borrador listo",E==="error"&&"Error al generar borrador"]}),r.jsx("input",{type:"checkbox",checked:v.has(_.idTema),onChange:()=>N(_.idTema),disabled:P,"aria-label":`Seleccionar tema: ${_.tituloSugerido}`,className:"w-5 h-5 lg:w-6 lg:h-6 mt-1 shrink-0 accent-cyan-500 cursor-pointer disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h3",{className:"text-base lg:text-lg xl:text-xl font-semibold text-white break-words line-clamp-3 lg:line-clamp-2 mb-2",children:_.tituloSugerido}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs lg:text-sm mb-3",children:[E==="loading"&&r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-blue-600/20 text-blue-300 border border-blue-600/30 rounded-full text-xs font-medium",children:[r.jsxs("svg",{className:"w-3 h-3 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Procesando..."]}),E==="done"&&r.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-600/20 text-green-300 border border-green-600/30 rounded-full text-xs font-medium",children:"✓ Listo"}),E==="error"&&r.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-600/20 text-red-300 border border-red-600/30 rounded-full text-xs font-medium",children:"✗ Error"}),r.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-zinc-900 border border-zinc-700 rounded-lg shrink-0",children:[r.jsx(cr,{size:14,className:"text-cyan-400"}),r.jsx("span",{className:"font-bold text-cyan-400",children:_.impacto})]}),r.jsx("span",{className:`px-2 py-1 border rounded-lg font-medium shrink-0 ${A(_.confianza)}`,children:_.confianza})]}),r.jsx("p",{className:"text-sm lg:text-[15px] xl:text-base text-zinc-400 line-clamp-2 mb-3 break-words",children:_.resumenBreve}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-3 text-xs lg:text-sm text-zinc-500 break-words",children:[r.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[r.jsx(De,{size:14}),r.jsx("span",{className:"hidden sm:inline",children:new Date(_.detectedAt).toLocaleString("es-ES")}),r.jsx("span",{className:"sm:hidden",children:new Date(_.detectedAt).toLocaleDateString("es-ES")})]}),r.jsx("span",{className:"px-2 py-0.5 bg-zinc-900 rounded shrink-0",children:_.categoriaSugerida}),r.jsxs("span",{className:"shrink-0",children:[((z=_.fuentesTop)==null?void 0:z.length)||0," fuentes"]})]}),_.fuentesTop&&_.fuentesTop.length>0&&r.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-700 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs font-medium text-zinc-400 mb-2",children:"Fuentes principales:"}),r.jsx("div",{className:"space-y-2",children:_.fuentesTop.slice(0,3).map((L,U)=>r.jsxs("a",{href:L.url,target:"_blank",rel:"noopener noreferrer","aria-label":`Leer fuente: ${L.titulo}`,className:"flex items-start gap-2 text-sm hover:text-cyan-400 transition-colors group focus:outline-none focus:ring-2 focus:ring-cyan-500 rounded",children:[r.jsx(ft,{size:14,className:"mt-0.5 shrink-0 text-zinc-500 group-hover:text-cyan-400"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium line-clamp-2 break-words",children:L.titulo}),r.jsxs("p",{className:"text-xs text-zinc-500 break-words",children:[L.medio," • ",new Date(L.fecha).toLocaleDateString("es-ES")]})]})]},U))})]})]})]},_.idTema)})})})()]})]})}function fx({draft:e,onClose:n,onApprove:t,onResetToPending:i,onPublish:a,onRefresh:o}){var q,w,$,B,V,W,X,ie,re,ce;const[c,m]=M.useState(0),[v,y]=M.useState(!1),[x,u]=M.useState(""),[s,l]=M.useState(!1),[g,d]=M.useState(!1),[b,f]=M.useState(null),[p,j]=M.useState(!1),[h,N]=M.useState(!1),[A,O]=M.useState(null);M.useEffect(()=>{e!=null&&e.coverHash&&m(Y=>Y+1)},[e==null?void 0:e.coverHash]);const S=Y=>({"dall-e-3":"DALL·E","dall-e-2":"DALL·E 2",hailuo:"Hailuo",internal:"Interno","stable-diffusion":"SD",midjourney:"MJ"})[Y]||Y||"DALL·E",T=Y=>{Y.target===Y.currentTarget&&n()},k=()=>{t&&t(e._id)},_=()=>{i&&i(e._id)},E=()=>{a&&a(e)},P=(e==null?void 0:e.reviewStatus)||"pending",z=P!=="approved",L=P!=="pending",U=P==="approved"&&!(e!=null&&e.publishedAs),G=async(Y="approved")=>{l(!0);try{const ue=await(await fetch(`/api/redactor-ia/drafts/${e._id}/diff?baseline=${Y}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();if(!ue.hasBaseline){ee.error("No hay versión base para comparar"),y(!1);return}if(ue.hasChanges||ee("No hay cambios entre versiones",{icon:"ℹ️"}),window.Diff2Html){const Z=window.Diff2Html.getPrettyHtml(ue.patch,{inputFormat:"diff",showFiles:!1,matching:"lines",outputFormat:"side-by-side"});u(Z)}else u(`<pre class="text-xs overflow-x-auto p-4 bg-zinc-900 rounded">${ue.patch}</pre>`)}catch(le){console.error("Error cargando diff:",le),ee.error("Error al cargar diferencias")}finally{l(!1)}},Q=()=>{v||G("approved"),y(Y=>!Y)},F=async()=>{try{const Y=Date.now(),ue=await(await fetch(`/api/redactor-ia/drafts/${e._id}/revision?v=${Y}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();ue.status==="ready"?(f(ue),ee.success("Revisión completada",{id:"revision-status"}),A&&(clearInterval(A),O(null)),d(!1)):ue.status==="error"?(ee.error(`Error: ${ue.errorMsg||"Error desconocido"}`,{id:"revision-status"}),A&&(clearInterval(A),O(null)),d(!1)):ue.status==="pending"&&ee.loading("Procesando revisión...",{id:"revision-status"})}catch(Y){console.error("Error checking revision:",Y)}};M.useEffect(()=>{var Y,le;if(((Y=e==null?void 0:e.review)==null?void 0:Y.status)==="pending"){d(!0);const ue=setInterval(F,3e3);return O(ue),()=>clearInterval(ue)}else((le=e==null?void 0:e.review)==null?void 0:le.status)==="ready"&&f({status:"ready",proposed:e.review.proposed,diff:e.review.diff,model:e.review.model,finishedAt:e.review.finishedAt})},[e==null?void 0:e._id,(q=e==null?void 0:e.review)==null?void 0:q.status]),M.useEffect(()=>()=>{A&&clearInterval(A)},[A]);const D=async()=>{var Y;if(!((Y=e==null?void 0:e.reviewNotes)!=null&&Y.trim())){ee.error("Agrega una Nota de revisión con las instrucciones");return}d(!0),ee.loading("Solicitando revisión...",{id:"request-revision"});try{const ue=await(await fetch(`/api/redactor-ia/drafts/${e._id}/request-changes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({notes:e.reviewNotes})})).json();if(ue.ok){ee.success("Revisión iniciada",{id:"request-revision"});const Z=setInterval(F,3e3);O(Z)}else ee.error(ue.error||"Error al solicitar revisión",{id:"request-revision"}),d(!1)}catch(le){console.error("Error solicitando revisión:",le),ee.error("Error de conexión",{id:"request-revision"}),d(!1)}},C=async()=>{if(b!=null&&b.proposed){l(!0);try{const Y=b.finishedAt||Date.now(),ue=await(await fetch(`/api/redactor-ia/drafts/${e._id}/diff?baseline=current&v=${Y}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();if(!ue.hasChanges||!ue.patch)u('<div class="p-4 text-center text-zinc-400">Sin cambios relevantes detectados</div>');else if(ue.patch)if(window.Diff2Html){const Z=window.Diff2Html.getPrettyHtml(ue.patch,{inputFormat:"diff",showFiles:!1,matching:"lines",outputFormat:"side-by-side"});u(Z)}else u(`<pre class="text-xs overflow-x-auto p-4 bg-zinc-900 rounded">${ue.patch}</pre>`);else if(b.diff)if(window.Diff2Html){const Z=window.Diff2Html.getPrettyHtml(b.diff,{inputFormat:"diff",showFiles:!1,matching:"lines",outputFormat:"side-by-side"});u(Z)}else u(`<pre class="text-xs overflow-x-auto p-4 bg-zinc-900 rounded">${b.diff}</pre>`)}catch(Y){console.error("Error cargando diff de revisión:",Y),ee.error("Error al cargar diferencias")}finally{l(!1)}}},R=()=>{p||C(),j(Y=>!Y)},I=async()=>{if(b!=null&&b.proposed){N(!0),ee.loading("Aplicando cambios...",{id:"apply-revision"});try{const le=await(await fetch(`/api/redactor-ia/drafts/${e._id}/apply-revision`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();le.ok?(ee.success("Cambios aplicados al borrador",{id:"apply-revision"}),f(null),j(!1),o&&await o()):ee.error(le.error||"No se pudieron aplicar los cambios",{id:"apply-revision"})}catch(Y){console.error("Error aplicando revisión:",Y),ee.error("Error de conexión",{id:"apply-revision"})}finally{N(!1)}}},H=()=>{f(null),j(!1),ee.info("Revisión descartada")};return r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:T,children:r.jsxs("div",{className:"bg-zinc-900 border border-zinc-700/50 rounded-lg w-full max-w-4xl max-h-[85vh] flex flex-col shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-700/50",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Vista previa del borrador"}),r.jsx("button",{onClick:n,className:"flex items-center justify-center w-8 h-8 rounded-full bg-zinc-800 hover:bg-zinc-700 text-white/70 hover:text-white transition-all duration-200",children:r.jsx(Qe,{size:18})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs("div",{className:"space-y-4",children:[((e==null?void 0:e.coverUrl)||((w=e==null?void 0:e.generatedImages)==null?void 0:w.principal))&&r.jsxs("div",{className:"relative",children:[e.coverUrl&&e.imageKind==="processed"?r.jsxs("picture",{className:"block w-full",children:[r.jsx("source",{srcSet:`${e.coverUrl}?v=${e.coverHash||""}`,type:"image/avif"}),r.jsx("img",{src:`${e.coverFallbackUrl||e.coverUrl}?v=${e.coverHash||""}`,alt:e.titulo||"Imagen principal",className:"w-full h-56 md:h-64 object-cover rounded-lg border border-zinc-800 shadow-lg",loading:"eager",decoding:"async"})]}):r.jsx("img",{src:`${e.coverUrl||(($=e.generatedImages)==null?void 0:$.principal)}?v=${e.coverHash||Date.now()}`,alt:e.titulo||"Imagen principal",className:"w-full h-56 md:h-64 object-cover rounded-lg border border-zinc-800 shadow-lg",loading:"eager",decoding:"async"}),(e.imageKind==="ai"||e.imageKind==="real")&&r.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-purple-600/90 backdrop-blur text-white text-xs rounded font-medium",title:((B=e.aiMetadata)==null?void 0:B.usedSource)===!1?"Generada con IA desde contexto (sin referencia)":"Generada con IA usando referencia de fuente",children:((V=e.aiMetadata)==null?void 0:V.usedSource)===!1?"✨ IA - sin ref":`✨ IA (${S(e.imageProvider||((W=e.aiMetadata)==null?void 0:W.imageProvider))})`}),e.imageKind==="processed"&&r.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-emerald-600/90 backdrop-blur text-white text-xs rounded",title:"Imagen procesada y almacenada localmente desde fuente",children:"✓ Procesada"}),((X=e==null?void 0:e.aiMetadata)==null?void 0:X.likenessMetadata)&&r.jsx("div",{className:`absolute bottom-2 left-2 px-2 py-1 backdrop-blur text-white text-xs rounded font-medium flex items-center gap-1 ${e.aiMetadata.likenessMetadata.likeness?"bg-amber-600/90":"bg-blue-600/90"}`,title:e.aiMetadata.likenessMetadata.likeness?`Figura real: ${e.aiMetadata.likenessMetadata.person||"personaje detectado"} (con referencia)`:e.aiMetadata.likenessMetadata.person?`Imagen contextual: ${e.aiMetadata.likenessMetadata.person} (sin referencia disponible)`:"Imagen contextual",children:e.aiMetadata.likenessMetadata.likeness?r.jsx(r.Fragment,{children:"🎭 Figura real"}):r.jsx(r.Fragment,{children:"🏛️ Contextual"})})]},`cover-${e.coverHash||c}`),r.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:(e==null?void 0:e.titulo)||"Sin título"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[r.jsx("span",{className:"px-2 py-1 rounded bg-blue-500/15 text-blue-300 ring-1 ring-blue-500/20 font-medium",children:(e==null?void 0:e.categoria)||"Sin categoría"}),r.jsx("span",{className:`px-2 py-1 rounded font-medium ring-1 ${(e==null?void 0:e.mode)==="opinion"?"bg-purple-500/15 text-purple-300 ring-purple-500/20":"bg-emerald-500/15 text-emerald-300 ring-emerald-500/20"}`,children:(e==null?void 0:e.mode)==="opinion"?"Opinión":"Factual"}),((ie=e==null?void 0:e.aiMetadata)==null?void 0:ie.categoryConfidence)!=null&&r.jsxs("span",{className:`px-2 py-1 rounded font-medium flex items-center gap-1 ${e.aiMetadata.categoryLowConfidence?"bg-orange-500/15 text-orange-300 ring-1 ring-orange-500/20":e.aiMetadata.categoryConfidence>=.7?"bg-emerald-500/15 text-emerald-400 ring-1 ring-emerald-500/20":"bg-blue-500/15 text-blue-300 ring-1 ring-blue-500/20"}`,children:[e.aiMetadata.categoryLowConfidence&&r.jsx(it,{size:12}),"Cat: ",Math.round(e.aiMetadata.categoryConfidence*100),"%"]}),((re=e==null?void 0:e.aiMetadata)==null?void 0:re.originalityScore)!==void 0&&r.jsx("span",{className:`px-2 py-1 rounded font-medium ${e.aiMetadata.contentOrigin==="ai_synthesized"?"bg-cyan-500/15 text-cyan-300 ring-1 ring-cyan-500/20":"bg-amber-500/15 text-amber-300 ring-1 ring-amber-500/20"}`,children:e.aiMetadata.contentOrigin==="ai_synthesized"?`Original ${Math.round(e.aiMetadata.originalityScore*100)}%`:`Derivado ${Math.round(e.aiMetadata.originalityScore*100)}%`}),(e==null?void 0:e.reviewStatus)&&e.reviewStatus!=="pending"&&r.jsx("span",{className:`px-2 py-1 rounded font-medium flex items-center gap-1 ${e.reviewStatus==="approved"?"bg-emerald-500/15 text-emerald-300 ring-1 ring-emerald-500/20":e.reviewStatus==="changes_requested"?"bg-amber-500/15 text-amber-300 ring-1 ring-amber-500/20":e.reviewStatus==="changes_in_progress"?"bg-sky-500/15 text-sky-300 ring-1 ring-sky-500/20":e.reviewStatus==="changes_completed"?"bg-green-500/15 text-green-300 ring-1 ring-green-500/20":"bg-red-500/15 text-red-300 ring-1 ring-red-500/20"}`,children:e.reviewStatus==="approved"?r.jsxs(r.Fragment,{children:[r.jsx(nt,{size:12})," Aprobado"]}):e.reviewStatus==="changes_requested"?r.jsxs(r.Fragment,{children:[r.jsx(fr,{size:12})," Cambios solicitados"]}):e.reviewStatus==="changes_in_progress"?r.jsxs(r.Fragment,{children:[r.jsx(De,{size:12})," En revisión por IA"]}):e.reviewStatus==="changes_completed"?r.jsxs(r.Fragment,{children:[r.jsx(nt,{size:12})," Cambios aplicados"]}):r.jsxs(r.Fragment,{children:[r.jsx(it,{size:12})," Rechazado"]})})]}),((ce=e==null?void 0:e.etiquetas)==null?void 0:ce.length)>0&&r.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.etiquetas.map((Y,le)=>r.jsx("span",{className:"text-xs px-2 py-0.5 bg-zinc-800 text-zinc-400 rounded",children:Y},le))}),(e==null?void 0:e.bajada)&&r.jsx("p",{className:"text-zinc-300 leading-relaxed text-base border-l-2 border-cyan-500/50 pl-3 italic",children:e.bajada}),((e==null?void 0:e.lastApprovedContent)||(e==null?void 0:e.previousContent))&&r.jsx("div",{className:"flex gap-2",children:r.jsxs("button",{onClick:Q,disabled:s,className:"px-3 py-2 rounded-md bg-zinc-700 hover:bg-zinc-600 text-sm flex items-center gap-2 transition-colors disabled:opacity-50",children:[s?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):v?r.jsx(Rn,{size:16}):r.jsx(dr,{size:16}),v?"Ocultar diferencias":"Ver diferencias"]})}),v&&x&&r.jsxs("div",{className:"mt-3 rounded-lg border border-zinc-700 overflow-hidden bg-zinc-900/50",children:[r.jsx("div",{className:"px-3 py-2 bg-zinc-800/50 border-b border-zinc-700 text-xs text-zinc-400 font-medium",children:"Comparación: Versión aprobada vs. Actual"}),r.jsx("div",{className:"prose prose-invert prose-sm max-w-none overflow-x-auto",dangerouslySetInnerHTML:{__html:x},style:{fontSize:"12px"}})]}),!v&&!p&&r.jsx("div",{className:"prose prose-invert prose-sm md:prose-base max-w-none",dangerouslySetInnerHTML:{__html:(e==null?void 0:e.contenidoHTML)||""}}),(b==null?void 0:b.proposed)&&!v&&!p&&r.jsxs("section",{className:"mt-4 rounded-lg border border-sky-700 bg-sky-900/30 p-4",children:[r.jsxs("div",{className:"text-sm font-semibold text-sky-300 mb-3 flex items-center gap-2",children:[r.jsx(ht,{size:16}),"Versión revisada por IA (",b.model,")"]}),r.jsx("article",{className:"prose prose-invert prose-sm md:prose-base max-w-none",dangerouslySetInnerHTML:{__html:b.proposed}}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-700/50 flex items-center gap-3",children:[r.jsx("button",{onClick:I,disabled:h,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2 font-medium shadow-sm","aria-label":"Aplicar cambios de revisión al borrador",children:h?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Aplicando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(nt,{size:16}),"Aplicar cambios"]})}),r.jsxs("button",{onClick:H,disabled:h,className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2","aria-label":"Descartar revisión sin aplicar cambios",children:[r.jsx(Qe,{size:16}),"Descartar revisión"]})]})]}),p&&x&&r.jsxs("div",{className:"mt-3 rounded-lg border border-zinc-700 overflow-hidden bg-zinc-900/50",children:[r.jsxs("div",{className:"px-3 py-2 bg-zinc-800/50 border-b border-zinc-700 text-xs text-zinc-400 font-medium flex items-center gap-2",children:[r.jsx(tr,{size:14}),"Comparación: Contenido actual vs. Revisión IA",r.jsx("span",{className:"ml-auto px-2 py-0.5 bg-blue-500/20 text-blue-300 rounded text-[10px]",children:"vs. borrador actual"})]}),r.jsx("div",{className:"prose prose-invert prose-sm max-w-none overflow-x-auto",dangerouslySetInnerHTML:{__html:x},style:{fontSize:"12px"}})]}),(e==null?void 0:e.reviewNotes)&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(fr,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-amber-300 mb-1",children:"Notas de revisión:"}),r.jsx("p",{className:"text-sm text-zinc-300",children:e.reviewNotes})]})]})}),Array.isArray(e==null?void 0:e.fuentes)&&e.fuentes.length>0&&r.jsxs("div",{className:"pt-4 border-t border-zinc-800",children:[r.jsxs("h3",{className:"text-sm uppercase tracking-wider text-zinc-400 font-semibold mb-3 flex items-center gap-2",children:[r.jsx(ft,{size:14}),"Fuentes utilizadas (",e.fuentes.length,")"]}),r.jsx("ul",{className:"space-y-2",children:e.fuentes.map((Y,le)=>r.jsxs("li",{className:"text-sm",children:[Y!=null&&Y.url?r.jsxs("a",{href:Y.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors flex items-center gap-2 group",children:[r.jsx(ft,{size:12,className:"flex-shrink-0"}),r.jsx("span",{className:"group-hover:underline",children:(Y==null?void 0:Y.titulo)||Y.medio||Y.url})]}):r.jsx("span",{className:"text-zinc-400",children:(Y==null?void 0:Y.titulo)||Y.medio||"Fuente sin título"}),(Y==null?void 0:Y.medio)&&r.jsxs("span",{className:"text-xs text-zinc-500 ml-2",children:["· ",Y.medio]})]},le))})]}),(e==null?void 0:e.aiMetadata)&&r.jsxs("details",{className:"bg-zinc-800/50 border border-zinc-700 rounded-lg p-3",children:[r.jsx("summary",{className:"text-xs text-zinc-400 cursor-pointer hover:text-zinc-300 transition-colors",children:"Metadata técnico (debugging)"}),r.jsxs("div",{className:"mt-2 text-xs text-zinc-500 space-y-1",children:[r.jsxs("p",{children:["Modelo: ",e.aiMetadata.model]}),r.jsxs("p",{children:["Tokens: ",e.aiMetadata.tokensUsed||"N/A"]}),r.jsxs("p",{children:["Tiempo: ",e.aiMetadata.generationTime?(e.aiMetadata.generationTime/1e3).toFixed(1)+"s":"N/A"]}),r.jsxs("p",{children:["Confianza general: ",e.aiMetadata.confidence||0,"%"]}),e.aiMetadata.categoryDetail&&r.jsxs("details",{className:"mt-2",children:[r.jsx("summary",{className:"cursor-pointer hover:text-zinc-400",children:"Detalle de clasificación"}),r.jsx("pre",{className:"mt-1 text-[10px] overflow-x-auto",children:JSON.stringify(JSON.parse(e.aiMetadata.categoryDetail),null,2)})]})]})]})]})}),(t||i||a)&&r.jsxs("div",{className:"p-4 border-t border-zinc-700/50 space-y-3",children:[(e==null?void 0:e.reviewNotes)&&r.jsxs("div",{className:"flex items-center justify-between gap-3 pb-3 border-b border-zinc-700/50",children:[!g&&!(b!=null&&b.proposed)&&r.jsxs("button",{onClick:D,className:"px-4 py-2 bg-amber-700 hover:bg-amber-800 text-white rounded-lg transition-colors flex items-center gap-2 font-medium border border-amber-600/60 shadow-sm",children:[r.jsx(ht,{size:16}),"Solicitar revisión con IA"]}),g&&r.jsxs("div",{className:"px-4 py-2 bg-sky-600/30 border border-sky-600/50 text-sky-200 rounded-lg flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-sky-300 border-t-transparent"}),"Generando revisión..."]}),(b==null?void 0:b.proposed)&&r.jsxs("button",{onClick:R,disabled:s,className:"px-3 py-2 bg-zinc-700 hover:bg-zinc-600 disabled:opacity-50 text-white rounded-lg transition-colors flex items-center gap-2",children:[s?r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):p?r.jsx(Rn,{size:16}):r.jsx(dr,{size:16}),p?"Ocultar diferencias":"Ver diferencias"]})]}),r.jsxs("div",{className:"flex justify-between items-center gap-3",children:[r.jsxs("div",{className:"flex gap-2",children:[i&&L&&r.jsxs("button",{onClick:_,disabled:g||h,className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 disabled:opacity-50 text-white rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(De,{size:16}),"Volver a pendiente"]}),a&&U&&r.jsxs("button",{onClick:E,disabled:g||h,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white rounded-lg transition-colors flex items-center gap-2 font-medium",children:[r.jsx(ft,{size:16}),"Publicar"]})]}),r.jsxs("div",{className:"flex gap-3",children:[t&&z&&r.jsxs("button",{onClick:k,disabled:g||h,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 text-white rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(nt,{size:16}),"Aprobar"]}),r.jsx("button",{onClick:n,disabled:g||h,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 disabled:opacity-50 text-white rounded-lg transition-colors",children:"Cerrar"})]})]})]})]})})}function hx({title:e="Solicitar cambios",initialNotes:n="",required:t=!0,maxLength:i=500,onSubmit:a,onClose:o,mode:c="notes"}){const[m,v]=M.useState(n),[y,x]=M.useState(!1),u=M.useRef(null);M.useEffect(()=>{v(n)},[n]),M.useEffect(()=>{u.current&&u.current.focus();const j=h=>{h.key==="Escape"&&!y&&s()};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[y]);const s=()=>{v(""),o()},l=j=>{j.target===j.currentTarget&&!y&&s()},g=j=>{(j.ctrlKey||j.metaKey)&&j.key==="Enter"&&!y&&(j.preventDefault(),d())},d=async()=>{const j=m.trim();if(!(t&&!j)){x(!0);try{if(c==="changes-list"){const h=j.split(`
`).map(N=>N.trim()).filter(N=>N.length>0);if(h.length===0&&t){x(!1);return}await a(h)}else await a(j);v(""),o()}catch(h){console.error("Error en submit:",h)}finally{x(!1)}}},b=!t||m.trim().length>0,p=i-m.length<=100;return r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-4",onClick:l,role:"dialog","aria-modal":"true","aria-labelledby":"review-notes-title",children:r.jsxs("div",{className:"bg-zinc-900 border border-zinc-700/50 rounded-xl w-full max-w-lg shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-zinc-800",children:[r.jsx("h3",{id:"review-notes-title",className:"text-lg font-semibold text-white",children:e}),r.jsx("button",{onClick:s,disabled:y,className:"flex items-center justify-center w-8 h-8 rounded-full bg-zinc-800 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Cerrar",children:r.jsx(Qe,{size:18})})]}),r.jsxs("div",{className:"p-5 space-y-3",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"review-notes",className:"block text-sm font-medium text-zinc-300 mb-2",children:[c==="changes-list"?"Lista de cambios solicitados":c==="ai-revision"?"Instrucciones para la IA":c==="custom-cover-prompt"?"Prompt personalizado para la imagen":"Notas de revisión"," ",t&&r.jsx("span",{className:"text-amber-400",children:"*"})]}),c==="changes-list"&&r.jsx("p",{className:"text-xs text-zinc-400 mb-2",children:"Escribe un cambio por línea. Cada línea será un punto en la lista."}),c==="ai-revision"&&r.jsx("p",{className:"text-xs text-zinc-400 mb-2",children:"Describe los cambios que deseas. La IA revisará el borrador según tus instrucciones."}),c==="custom-cover-prompt"&&r.jsx("p",{className:"text-xs text-zinc-400 mb-2",children:"Escribe el prompt personalizado para generar una nueva imagen de portada. La IA reemplazará la imagen anterior manteniendo la resolución estándar del sitio."}),r.jsx("textarea",{ref:u,id:"review-notes",name:"review-notes-field",autoComplete:"off",value:m,onChange:j=>v(j.target.value),onKeyDown:g,maxLength:i,rows:c==="changes-list"?8:6,disabled:y,placeholder:c==="changes-list"?`Ejemplo:
Corregir título para mayor claridad
Agregar más contexto en la introducción
Verificar ortografía en párrafo 3`:c==="ai-revision"?"Ejemplo: Mejorar la claridad del segundo párrafo, corregir errores ortográficos, hacer el título más atractivo...":c==="custom-cover-prompt"?"Ejemplo: Editorial illustration showing a press conference with microphones and cameras, modern cinematic style, horizontal format 16:9, professional lighting...":t?"Describe los cambios necesarios...":"Notas opcionales...",className:"w-full rounded-lg bg-zinc-900 border border-zinc-800 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 text-zinc-200 placeholder-zinc-500 p-3 resize-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed"})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("span",{className:`font-medium ${p?"text-amber-400":"text-zinc-400"}`,children:[m.length,"/",i," caracteres"]}),t&&!b&&r.jsxs("div",{className:"flex items-center gap-1 text-amber-400",children:[r.jsx(it,{size:14}),r.jsx("span",{children:"Las notas son obligatorias"})]})]}),r.jsxs("p",{className:"text-xs text-zinc-500",children:["Presiona ",r.jsx("kbd",{className:"px-1.5 py-0.5 bg-zinc-800 border border-zinc-700 rounded text-zinc-400",children:"Ctrl+Enter"})," para enviar"]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-5 border-t border-zinc-800 bg-zinc-900/50",children:[r.jsx("button",{onClick:s,disabled:y,className:"px-4 py-2 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),r.jsx("button",{onClick:d,disabled:!b||y,className:"px-4 py-2 rounded-lg bg-amber-600 hover:bg-amber-700 disabled:bg-amber-900 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium transition-colors flex items-center gap-2",children:y?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),c==="custom-cover-prompt"?"Generando...":"Enviando..."]}):c==="custom-cover-prompt"?"Generar":"Enviar"})]})]})})}function px({draft:e,onSubmit:n,onClose:t}){var p;const[i,a]=M.useState(!0),[o,c]=M.useState(""),[m,v]=M.useState(""),[y,x]=M.useState([]),[u,s]=M.useState(!1),l=M.useRef(null),g=["General","Política","Economía","Internacional","Socio político","Tecnología"];M.useEffect(()=>{v((e==null?void 0:e.categoria)||"General"),x((e==null?void 0:e.etiquetas)||[]);const j=h=>{h.key==="Escape"&&!u&&t()};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[e,u,t]);const d=j=>{j.target===j.currentTarget&&!u&&t()},b=async()=>{if(!(!i&&!o)){s(!0);try{await n({scheduleAt:i?null:o,categoryOverride:m,tagsOverride:y.length>0?y:void 0}),t()}catch(j){console.error("Error en submit:",j)}finally{s(!1)}}},f=i||o&&new Date(o)>new Date;return r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-50 flex items-center justify-center p-4",onClick:d,role:"dialog","aria-modal":"true","aria-labelledby":"publish-modal-title",children:r.jsxs("div",{className:"bg-zinc-900 border border-zinc-700/50 rounded-xl w-full max-w-2xl shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-zinc-800",children:[r.jsx("h3",{id:"publish-modal-title",className:"text-lg font-semibold text-white",children:"Publicar borrador"}),r.jsx("button",{onClick:t,disabled:u,className:"flex items-center justify-center w-8 h-8 rounded-full bg-zinc-800 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Cerrar",children:r.jsx(Qe,{size:18})})]}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-zinc-400 mb-1",children:"Vista previa:"}),r.jsx("h4",{className:"text-base font-semibold text-white mb-2",children:e==null?void 0:e.titulo}),(e==null?void 0:e.bajada)&&r.jsx("p",{className:"text-sm text-zinc-300",children:e.bajada})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg border border-zinc-800 hover:border-zinc-700 transition-colors",children:[r.jsx("input",{type:"radio",checked:i,onChange:()=>a(!0),disabled:u,className:"w-4 h-4 accent-indigo-500"}),r.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[r.jsx(De,{size:18,className:"text-indigo-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-white font-medium",children:"Publicar ahora"}),r.jsx("p",{className:"text-xs text-zinc-400",children:"La noticia se publicará inmediatamente"})]})]})]}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg border border-zinc-800 hover:border-zinc-700 transition-colors",children:[r.jsx("input",{type:"radio",checked:!i,onChange:()=>a(!1),disabled:u,className:"w-4 h-4 accent-indigo-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Rt,{size:18,className:"text-indigo-400"}),r.jsx("span",{className:"text-white font-medium",children:"Programar publicación"})]}),!i&&r.jsx("input",{ref:l,type:"datetime-local",value:o,onChange:j=>c(j.target.value),disabled:u,min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 disabled:opacity-50"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-zinc-300 mb-2",children:[r.jsx(Cs,{size:16}),"Categoría"]}),((p=e==null?void 0:e.aiMetadata)==null?void 0:p.categoryConfidence)!==void 0&&r.jsxs("p",{className:"text-xs text-zinc-400 mb-2 flex items-center gap-1.5",children:[r.jsxs("span",{className:"inline-flex items-center gap-1 text-cyan-400",children:[r.jsx(ht,{size:12}),"Sugerida por IA:"]}),r.jsx("span",{className:"text-zinc-300 font-medium",children:e.categoria}),r.jsxs("span",{className:"text-zinc-500",children:["(precisión ",Math.round((e.aiMetadata.categoryConfidence||0)*100),"%)"]})]}),r.jsx("select",{value:m,onChange:j=>v(j.target.value),disabled:u,className:"w-full px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 disabled:opacity-50",children:g.map(j=>r.jsx("option",{value:j,children:j},j))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-zinc-300 mb-2",children:[r.jsx(Ys,{size:16}),"Etiquetas (separadas por coma)"]}),r.jsx("input",{type:"text",value:y.join(", "),onChange:j=>{const h=j.target.value.split(",").map(N=>N.trim()).filter(Boolean);x(h)},disabled:u,placeholder:"Cuba, Política, Internacional...",className:"w-full px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg text-white placeholder-zinc-500 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 disabled:opacity-50"}),y.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:y.map((j,h)=>r.jsx("span",{className:"px-2 py-1 bg-indigo-500/20 border border-indigo-500/30 text-indigo-300 text-xs rounded",children:j},h))})]}),!i&&!f&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:[r.jsx(De,{size:16,className:"text-amber-400 shrink-0"}),r.jsx("p",{className:"text-sm text-amber-300",children:"Selecciona una fecha y hora futura para programar la publicación"})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-5 border-t border-zinc-800 bg-zinc-900/50",children:[r.jsx("button",{onClick:t,disabled:u,className:"px-4 py-2 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),r.jsx("button",{onClick:b,disabled:!f||u,className:"px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-900 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium transition-colors flex items-center gap-2",children:u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Publicando..."]}):i?"Publicar ahora":"Programar publicación"})]})]})})}function mx(){const[e,n]=M.useState([]),[t,i]=M.useState(!0),[a,o]=M.useState(null),[c,m]=M.useState({}),[v,y]=M.useState({}),[x,u]=M.useState({}),[s,l]=M.useState(null),[g,d]=M.useState(null),[b,f]=M.useState(null),[p,j]=M.useState({status:"draft",mode:"all",reviewStatus:"all"}),[h,N]=M.useState({}),[A,O]=M.useState({}),[S,T]=M.useState({}),k=()=>{window.dispatchEvent(new CustomEvent("redactor-ia:stats-changed"))};M.useEffect(()=>{_()},[p]),M.useEffect(()=>()=>{Object.values(h).forEach(w=>clearInterval(w))},[h]),M.useEffect(()=>()=>{m({}),y({}),u({}),Object.values(h).forEach(w=>clearInterval(w))},[]),M.useEffect(()=>{const w=B=>{const V=Object.values(A).some(X=>X),W=Object.values(S).some(X=>X);!V&&!W||!B.target.closest(".changes-dropdown-container")&&!B.target.closest(".image-gen-dropdown-container")&&(O({}),T({}))};if(Object.values(A).some(B=>B)||Object.values(S).some(B=>B))return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[A,S]);const _=async()=>{var w;try{const $={status:p.status||"draft",mode:p.mode||"all",reviewStatus:p.reviewStatus||"all",page:"1",limit:"20"};console.log("[BorradoresIA] Fetching drafts con filtros:",$);const B=new URLSearchParams($),W=await(await fetch(`/api/redactor-ia/drafts?${B}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();console.log("[BorradoresIA] Respuesta del servidor:",{total:W.total,count:((w=W.drafts)==null?void 0:w.length)||0,page:W.page,pages:W.pages}),n(W.drafts||[])}catch($){console.error("[BorradoresIA] Error fetching drafts:",$),ee.error("Error al cargar borradores")}finally{i(!1)}},E=async w=>{m($=>({...$,[w]:!0})),ee.loading("Capturando imagen del sitio...",{id:`img-${w}`});try{const $=await fetch(`/api/redactor-ia/drafts/${w}/capture-cover-from-source`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({})}),B=await $.json();console.log("[BorradoresIA:Capture] Respuesta del servidor:",{status:$.status,ok:$.ok,data:B}),B.success||B.ok?(ee.success("Imagen capturada exitosamente",{id:`img-${w}`}),n(V=>V.map(W=>{var X,ie,re,ce,Y,le,ue;return W._id===w?{...W,coverUrl:B.imageUrl||B.cover||((X=B.draft)==null?void 0:X.coverUrl),coverFallbackUrl:(ie=B.draft)==null?void 0:ie.coverFallbackUrl,coverHash:B.hash||B.coverHash||((re=B.draft)==null?void 0:re.coverHash),imageKind:B.imageKind||((ce=B.draft)==null?void 0:ce.imageKind)||"processed",imageProvider:B.provider||((Y=B.draft)==null?void 0:Y.imageProvider)||"internal",coverImageUrl:(le=B.draft)==null?void 0:le.coverImageUrl,generatedImages:(ue=B.draft)==null?void 0:ue.generatedImages,aiMetadata:{...W.aiMetadata,imageProvider:"internal",capturedFromSource:!0}}:W})),(a==null?void 0:a._id)===w&&o(B.draft)):(console.error("[BorradoresIA:Capture] Error en respuesta:",B),ee.error(B.error||"No se pudo capturar la imagen",{id:`img-${w}`}))}catch($){console.error("Error capturando imagen:",$),ee.error("Error de conexión al capturar imagen",{id:`img-${w}`})}finally{m($=>({...$,[w]:!1}))}},P=async w=>{m($=>({...$,[w]:!0})),ee.loading("Generando imagen con IA...",{id:`img-${w}`});try{const $=await fetch(`/api/redactor-ia/drafts/${w}/generate-image`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({})}),B=await $.json();console.log("[BorradoresIA] Respuesta IA del servidor:",{status:$.status,ok:$.ok,data:B}),B.success||B.ok?(ee.success("Imagen generada con IA",{id:`img-${w}`}),n(V=>V.map(W=>{var X,ie,re,ce,Y,le,ue,Z,K;return W._id===w?{...W,coverUrl:B.imageUrl||B.cover||((X=B.draft)==null?void 0:X.coverUrl),coverFallbackUrl:(ie=B.draft)==null?void 0:ie.coverFallbackUrl,coverHash:B.hash||B.coverHash||((re=B.draft)==null?void 0:re.coverHash),imageKind:B.imageKind||((ce=B.draft)==null?void 0:ce.imageKind)||"ai",imageProvider:B.provider||((Y=B.draft)==null?void 0:Y.imageProvider)||"dall-e-3",coverImageUrl:(le=B.draft)==null?void 0:le.coverImageUrl,generatedImages:(ue=B.draft)==null?void 0:ue.generatedImages,aiMetadata:{...W.aiMetadata,imageProvider:B.provider||((K=(Z=B.draft)==null?void 0:Z.aiMetadata)==null?void 0:K.imageProvider)||"dall-e-3"}}:W})),(a==null?void 0:a._id)===w&&o(B.draft)):(console.error("[BorradoresIA] Error en respuesta IA:",B),ee.error(B.error||"No se pudo generar con IA",{id:`img-${w}`}))}catch($){console.error("Error generando con IA:",$),ee.error("Error de conexión",{id:`img-${w}`})}finally{m($=>({...$,[w]:!1}))}},z=async(w,$,B)=>{y(V=>({...V,[w]:!0})),ee.loading("Procesando revisión...",{id:`review-${w}`});try{const W=await(await fetch(`/api/redactor-ia/drafts/${w}/review`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:$,notes:B||""})})).json();W.ok?(ee.success(W.message,{id:`review-${w}`}),($==="approved"||$==="changes_requested")&&k(),_(),(a==null?void 0:a._id)===w&&o(W.draft)):ee.error(W.error||"Error al procesar revisión",{id:`review-${w}`})}catch{ee.error("Error de conexión",{id:`review-${w}`})}finally{y(V=>({...V,[w]:!1}))}},L=w=>{h[w]&&clearInterval(h[w]);const $=setInterval(async()=>{try{const V=await(await fetch(`/api/redactor-ia/drafts/${w}/revision`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();V.status==="ready"?(clearInterval($),N(W=>{const X={...W};return delete X[w],X}),ee.success("Revisión completada. Abre el borrador para ver los cambios."),_()):V.status==="error"&&(clearInterval($),N(W=>{const X={...W};return delete X[w],X}),ee.error(`Error en revisión: ${V.errorMsg||"Error desconocido"}`))}catch(B){console.error("Error polling revision:",B)}},3e3);N(B=>({...B,[w]:$}))},U=(w,$)=>{const B=e.find(V=>V._id===w);if((B==null?void 0:B.reviewStatus)===$){ee.error("El borrador ya tiene ese estado");return}$==="changes_requested"?l({draftId:w,status:$,title:"Solicitar cambios específicos (revisión con IA)",initialNotes:"",required:!0,mode:"ai-revision"}):z(w,$,"")},G=w=>{l({draftId:w,status:"custom_cover",title:"Generar nueva portada IA (prompt manual)",initialNotes:"",required:!0,mode:"custom-cover-prompt"})},Q=async(w,$)=>{var B,V,W,X,ie,re,ce,Y,le,ue;m(Z=>({...Z,[w]:!0})),ee.loading("Generando nueva portada con IA...",{id:`cover-${w}`});try{const K=await(await fetch(`/api/redactor-ia/drafts/${w}/generate-image`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({mode:"custom_prompt",prompt:$})})).json();if(console.log("[BorradoresIA:CustomCover] Respuesta del servidor:",{success:K.success,ok:K.ok,imageUrl:K.imageUrl,cover:K.cover,imageKind:K.imageKind,provider:K.provider,draft_coverUrl:(B=K.draft)==null?void 0:B.coverUrl,draft_generatedImages:(V=K.draft)==null?void 0:V.generatedImages,draft_imageKind:(W=K.draft)==null?void 0:W.imageKind}),K.success||K.ok){ee.success("Nueva portada generada exitosamente",{id:`cover-${w}`});const ae={coverUrl:K.imageUrl||K.cover||((X=K.draft)==null?void 0:X.coverUrl),coverFallbackUrl:(ie=K.draft)==null?void 0:ie.coverFallbackUrl,coverHash:K.hash||K.coverHash||((re=K.draft)==null?void 0:re.coverHash),imageKind:K.imageKind||((ce=K.draft)==null?void 0:ce.imageKind)||"ai",imageProvider:K.provider||((Y=K.draft)==null?void 0:Y.imageProvider)||"dall-e-3",coverImageUrl:(le=K.draft)==null?void 0:le.coverImageUrl,generatedImages:(ue=K.draft)==null?void 0:ue.generatedImages};console.log("[BorradoresIA:CustomCover] Estado actualizado:",ae),n(oe=>oe.map(J=>{var ne,de;return J._id===w?{...J,...ae,aiMetadata:{...J.aiMetadata,imageProvider:K.provider||((de=(ne=K.draft)==null?void 0:ne.aiMetadata)==null?void 0:de.imageProvider)||"dall-e-3",customPrompt:!0}}:J})),(a==null?void 0:a._id)===w&&o(K.draft)}else ee.error(K.error||"Error al generar portada",{id:`cover-${w}`})}catch(Z){console.error("Error generando portada:",Z),ee.error("Error de conexión",{id:`cover-${w}`})}finally{m(Z=>({...Z,[w]:!1}))}},F=async(w,{scheduleAt:$,categoryOverride:B,tagsOverride:V})=>{u(W=>({...W,[w]:!0})),ee.loading("Publicando borrador...",{id:`publish-${w}`});try{const X=await(await fetch(`/api/redactor-ia/drafts/${w}/publish`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({scheduleAt:$,categoryOverride:B,tagsOverride:V})})).json();X.ok?(ee.success(X.message||"Noticia publicada correctamente",{id:`publish-${w}`}),n(ie=>ie.map(re=>re._id===w?X.draft:re)),(a==null?void 0:a._id)===w&&o(X.draft),k(),X.news&&X.alreadyPublished):ee.error(X.error||"Error al publicar",{id:`publish-${w}`})}catch{ee.error("Error de conexión",{id:`publish-${w}`})}finally{u(W=>({...W,[w]:!1}))}},D=async w=>{if(confirm("¿Rechazar este borrador?"))try{(await fetch(`/api/redactor-ia/drafts/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?((a==null?void 0:a._id)===w&&o(null),ee.success("Borrador rechazado"),_(),k()):ee.error("Error al rechazar")}catch{ee.error("Error de conexión")}},C=async(w,$)=>{try{const V=await(await fetch(`/api/redactor-ia/programar/${w}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({scheduledAt:$})})).json();V.ok?(ee.success(V.message),n(W=>W.map(X=>X._id===w?V.draft:X)),(a==null?void 0:a._id)===w&&o(V.draft)):ee.error(V.error||"Error al programar")}catch{ee.error("Error de conexión")}},R=w=>{const $={draft:"bg-blue-500/20 text-blue-400 border-blue-500/30",reviewed:"bg-green-500/20 text-green-400 border-green-500/30",published:"bg-purple-500/20 text-purple-400 border-purple-500/30",rejected:"bg-red-500/20 text-red-400 border-red-500/30"},B={draft:"Borrador",reviewed:"Revisado",published:"Publicado",rejected:"Rechazado"};return r.jsx("span",{className:`px-2 py-1 border rounded text-xs font-medium ${$[w]||$.draft}`,children:B[w]||w})},I=w=>w==="opinion"?r.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 border border-purple-500/30 rounded text-xs font-medium",children:"Opinión"}):r.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded text-xs font-medium",children:"Factual"}),H=w=>({"dall-e-3":"DALL·E","dall-e-2":"DALL·E 2",hailuo:"Hailuo",internal:"Interno","stable-diffusion":"SD",midjourney:"MJ"})[w]||w||"DALL·E",q=w=>{const $={pending:"bg-zinc-600/40 text-zinc-300",approved:"bg-emerald-600/25 text-emerald-200 border border-emerald-600/40",changes_requested:"bg-amber-600/25 text-amber-200 border border-amber-600/40",changes_in_progress:"bg-sky-600/25 text-sky-200 border border-sky-600/40",changes_completed:"bg-green-600/25 text-green-200 border border-green-600/40",rejected:"bg-red-600/25 text-red-200 border border-red-600/40"},B={pending:"Pendiente",approved:"Aprobado",changes_requested:"Cambios solicitados",changes_in_progress:"En revisión por IA",changes_completed:"Cambios aplicados",rejected:"Rechazado"};return r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${$[w]||$.pending}`,children:B[w]||w})};return r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{children:[r.jsx("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-3 sm:p-4 lg:p-5 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs lg:text-sm text-zinc-400 mb-2",children:"Estado"}),r.jsxs("select",{value:p.status,onChange:w=>j({...p,status:w.target.value}),"aria-label":"Filtro de estado",className:"w-full h-11 xl:h-12 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx("option",{value:"draft",children:"Borradores"}),r.jsx("option",{value:"reviewed",children:"Revisados"}),r.jsx("option",{value:"published",children:"Publicados"}),r.jsx("option",{value:"rejected",children:"Rechazados"})]})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs lg:text-sm text-zinc-400 mb-2",children:"Modo"}),r.jsxs("select",{value:p.mode,onChange:w=>j({...p,mode:w.target.value}),"aria-label":"Filtro de modo",className:"w-full h-11 xl:h-12 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx("option",{value:"all",children:"Todos"}),r.jsx("option",{value:"factual",children:"Factual"}),r.jsx("option",{value:"opinion",children:"Opinión"})]})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2 lg:col-span-1",children:[r.jsx("label",{className:"block text-xs lg:text-sm text-zinc-400 mb-2",children:"Revisión"}),r.jsxs("select",{value:p.reviewStatus,onChange:w=>j({...p,reviewStatus:w.target.value}),"aria-label":"Filtro de revisión",className:"w-full h-11 xl:h-12 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx("option",{value:"all",children:"Todos"}),r.jsx("option",{value:"pending",children:"Pendientes"}),r.jsx("option",{value:"approved",children:"Aprobados"}),r.jsx("option",{value:"changes_requested",children:"Cambios solicitados"}),r.jsx("option",{value:"changes_in_progress",children:"En revisión por IA"}),r.jsx("option",{value:"changes_completed",children:"Cambios aplicados"}),r.jsx("option",{value:"rejected",children:"Rechazados"})]})]})]})}),t?r.jsx("div",{className:"text-center py-12 text-zinc-400",children:"Cargando borradores..."}):e.length===0?r.jsxs("div",{className:"text-center py-12 bg-zinc-800/30 border border-zinc-700 rounded-xl",children:[r.jsx(tr,{size:48,className:"mx-auto mb-4 text-zinc-600"}),r.jsx("p",{className:"text-zinc-400",children:"No hay borradores"}),r.jsx("p",{className:"text-sm text-zinc-500 mt-2",children:'Ve a "Cola de Temas" y selecciona temas para generar'})]}):r.jsx("div",{className:"space-y-4",children:e.map(w=>{var $,B,V,W,X,ie,re,ce,Y,le,ue,Z,K,ae,oe,J;return r.jsxs("div",{className:`relative rounded-2xl border bg-zinc-900/60 backdrop-blur p-4 md:p-5 transition-all duration-200 ${(a==null?void 0:a._id)===w._id?"border-cyan-500 shadow-lg shadow-cyan-500/20 bg-zinc-900/80":"border-zinc-800 hover:bg-zinc-900/80 hover:border-zinc-600"} ${A[w._id]||A[`mobile-${w._id}`]?"z-50":"z-0"}`,children:[r.jsxs("div",{className:"md:hidden grid grid-cols-[96px,1fr] gap-3 cursor-pointer",onClick:()=>o(w),children:[r.jsx("div",{className:"col-span-1",children:r.jsxs("div",{className:"w-24 h-16 rounded-md overflow-hidden border border-zinc-800/60 bg-zinc-800/60 relative",children:[w.imageKind==="processed"&&w.coverUrl&&r.jsxs("picture",{className:"absolute inset-0",children:[r.jsx("source",{srcSet:`${w.coverUrl}?v=${w.coverHash||""}`,type:"image/avif"}),r.jsx("img",{src:`${w.coverFallbackUrl||w.coverUrl}?v=${w.coverHash||""}`,alt:w.titulo,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",onError:ne=>{ne.target.style.display="none"}})]},w.coverHash||w._id),w.imageKind!=="processed"&&(($=w.generatedImages)==null?void 0:$.principal)&&r.jsx("img",{src:`${w.generatedImages.principal}?v=${w.coverHash||Date.now()}`,alt:w.titulo,className:"w-full h-full object-cover",loading:"lazy",decoding:"async",onError:ne=>{ne.target.style.display="none"}},w.coverHash||w._id),w.imageKind==="placeholder"&&r.jsx("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-zinc-800/90 backdrop-blur text-zinc-400 text-[10px] rounded",title:"Imagen temporal",children:"Placeholder"}),w.imageKind==="processed"&&r.jsx("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-emerald-600/80 backdrop-blur text-white text-[10px] rounded",title:"Imagen procesada y almacenada localmente desde fuente",children:"✓ Procesada"}),(w.imageKind==="ai"||w.imageKind==="real")&&r.jsx("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-purple-600/80 backdrop-blur text-white text-[10px] rounded font-medium",title:(B=w.aiMetadata)!=null&&B.usedSource?"Generada con IA usando referencia de fuente":"Generada con IA desde contexto (sin referencia)",children:((V=w.aiMetadata)==null?void 0:V.usedSource)===!1?"✨ IA - sin ref":`✨ IA (${H(w.imageProvider||((W=w.aiMetadata)==null?void 0:W.imageProvider))})`}),c[w._id]&&r.jsx("div",{className:"absolute inset-0 grid place-items-center bg-zinc-900/80 backdrop-blur-sm",children:r.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-purple-400 border-t-transparent"})}),!w.coverUrl&&!((X=w.generatedImages)!=null&&X.principal)&&!c[w._id]&&r.jsx("div",{className:"absolute inset-0 grid place-items-center bg-zinc-800/70 text-zinc-500",children:r.jsx(tr,{size:24,className:"opacity-70"})})]})}),r.jsx("div",{}),r.jsxs("div",{className:"col-span-2",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-1.5",children:[r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-cyan-500/20 text-purple-400 border border-purple-500/30 rounded text-xs font-bold shrink-0",children:[r.jsx(ht,{size:12}),"IA"]}),q(w.reviewStatus||"pending"),I(w.mode),R(w.status)]}),r.jsx("h3",{className:"mt-1 font-semibold text-white text-base leading-snug w-full line-clamp-3",children:w.titulo??"Sin título"}),w.scheduledAt&&r.jsx("div",{className:"mt-1.5 flex items-center gap-1.5 text-xs",children:w.publishStatus==="programado"?r.jsxs("span",{className:"flex items-center gap-1 text-cyan-400",children:[r.jsx(De,{size:12}),"Programada: ",new Date(w.scheduledAt).toLocaleString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}):w.publishStatus==="publicado"?r.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[r.jsx(nt,{size:12}),"Publicada"]}):null}),w.bajada&&r.jsx("p",{className:"text-zinc-400 text-sm mt-1 w-full line-clamp-2",children:w.bajada}),r.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-zinc-500",children:[r.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[r.jsx(De,{size:14}),r.jsx("span",{className:"hidden sm:inline",children:new Date(w.createdAt||w.generatedAt).toLocaleString("es-ES")}),r.jsx("span",{className:"sm:hidden",children:new Date(w.createdAt||w.generatedAt).toLocaleDateString("es-ES")})]}),r.jsx("span",{className:"px-2 py-0.5 bg-zinc-900 rounded shrink-0",children:w.categoria}),((ie=w.etiquetas)==null?void 0:ie.length)>0&&r.jsxs("span",{className:"shrink-0",children:[w.etiquetas.length," tags"]}),w.generatedBy&&r.jsxs("span",{className:"hidden md:inline shrink-0",children:["Por: ",w.generatedBy.nombre||w.generatedBy.email]}),((re=w.aiMetadata)==null?void 0:re.originalityScore)!==void 0&&r.jsx("span",{className:`px-2 py-0.5 rounded font-medium shrink-0 ${w.aiMetadata.contentOrigin==="ai_synthesized"?"bg-cyan-500/15 text-cyan-400":"bg-amber-500/15 text-amber-400"}`,children:w.aiMetadata.contentOrigin==="ai_synthesized"?`Orig ${Math.round(w.aiMetadata.originalityScore*100)}%`:`Der ${Math.round(w.aiMetadata.originalityScore*100)}%`}),((ce=w.aiMetadata)==null?void 0:ce.categoryConfidence)!==void 0&&r.jsxs("span",{className:`px-2 py-0.5 rounded font-medium flex items-center gap-1 shrink-0 ${w.aiMetadata.categoryLowConfidence?"bg-orange-500/15 text-orange-400":w.aiMetadata.categoryConfidence>=.7?"bg-emerald-500/15 text-emerald-400":"bg-blue-500/15 text-blue-400"}`,title:"Confianza de clasificación ensemble",children:[w.aiMetadata.categoryLowConfidence&&r.jsx(it,{size:12}),"Cat: ",Math.round(w.aiMetadata.categoryConfidence*100),"%"]})]})]})]}),r.jsxs("div",{className:"hidden md:grid md:grid-cols-[auto,1fr,auto] md:gap-4 items-start cursor-pointer",onClick:()=>o(w),children:[r.jsxs("div",{className:"w-40 h-24 rounded-md overflow-hidden bg-zinc-800/60 border border-zinc-800/60 relative shrink-0 z-0",children:[w.imageKind==="processed"&&w.coverUrl&&r.jsxs("picture",{className:"absolute inset-0",children:[r.jsx("source",{srcSet:`${w.coverUrl}?v=${w.coverHash||""}`,type:"image/avif"}),r.jsx("img",{src:`${w.coverFallbackUrl||w.coverUrl}?v=${w.coverHash||""}`,alt:w.titulo,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy",decoding:"async",onError:ne=>{ne.target.style.display="none"}})]},w.coverHash||w._id),w.imageKind!=="processed"&&((Y=w.generatedImages)==null?void 0:Y.principal)&&r.jsx("img",{src:`${w.generatedImages.principal}?v=${w.coverHash||Date.now()}`,alt:w.titulo,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy",decoding:"async",onError:ne=>{ne.target.style.display="none"}},w.coverHash||w._id),w.imageKind==="placeholder"&&r.jsx("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-zinc-800/90 backdrop-blur text-zinc-400 text-[10px] rounded z-10",title:"Imagen temporal",children:"Placeholder"}),w.imageKind==="processed"&&r.jsx("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-emerald-600/80 backdrop-blur text-white text-[10px] rounded z-10",title:"Imagen procesada y almacenada localmente desde fuente",children:"✓ Procesada"}),(w.imageKind==="ai"||w.imageKind==="real")&&r.jsxs("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-purple-600/80 backdrop-blur text-white text-[10px] rounded font-medium z-10",title:(le=w.aiMetadata)!=null&&le.usedSource?"Generada con IA usando referencia de fuente":`Generada por IA (${H(w.imageProvider||((ue=w.aiMetadata)==null?void 0:ue.imageProvider))})`,children:["✨ IA (",H(w.imageProvider||((Z=w.aiMetadata)==null?void 0:Z.imageProvider)),")"]}),c[w._id]&&r.jsx("div",{className:"absolute inset-0 grid place-items-center bg-zinc-900/80 backdrop-blur-sm z-20",children:r.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-purple-400 border-t-transparent"})}),!w.coverUrl&&!((K=w.generatedImages)!=null&&K.principal)&&!c[w._id]&&r.jsx("div",{className:"absolute inset-0 grid place-items-center bg-zinc-800/70 text-zinc-500",children:r.jsx(tr,{size:24,className:"opacity-70"})})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-purple-500/20 to-cyan-500/20 text-purple-400 border border-purple-500/30 rounded text-xs font-bold shrink-0",children:[r.jsx(ht,{size:12}),"IA"]}),q(w.reviewStatus||"pending"),I(w.mode),R(w.status)]}),r.jsx("h3",{className:"text-lg font-semibold text-white line-clamp-2 mb-2 break-words",children:w.titulo}),w.scheduledAt&&r.jsx("div",{className:"mb-2 flex items-center gap-1.5 text-sm",children:w.publishStatus==="programado"?r.jsxs("span",{className:"flex items-center gap-1 text-cyan-400",children:[r.jsx(De,{size:14}),"Programada: ",new Date(w.scheduledAt).toLocaleString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}):w.publishStatus==="publicado"?r.jsxs("span",{className:"flex items-center gap-1 text-green-400",children:[r.jsx(nt,{size:14}),"Publicada"]}):null}),w.bajada&&r.jsx("p",{className:"text-sm text-zinc-400 line-clamp-2 mb-3 break-words",children:w.bajada}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-zinc-500 break-words",children:[r.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[r.jsx(De,{size:14}),r.jsx("span",{className:"hidden sm:inline",children:new Date(w.createdAt||w.generatedAt).toLocaleString("es-ES")}),r.jsx("span",{className:"sm:hidden",children:new Date(w.createdAt||w.generatedAt).toLocaleDateString("es-ES")})]}),r.jsx("span",{className:"px-2 py-0.5 bg-zinc-900 rounded shrink-0",children:w.categoria}),((ae=w.etiquetas)==null?void 0:ae.length)>0&&r.jsxs("span",{className:"shrink-0",children:[w.etiquetas.length," tags"]}),w.generatedBy&&r.jsxs("span",{className:"hidden md:inline shrink-0",children:["Por: ",w.generatedBy.nombre||w.generatedBy.email]}),((oe=w.aiMetadata)==null?void 0:oe.originalityScore)!==void 0&&r.jsx("span",{className:`px-2 py-0.5 rounded font-medium shrink-0 ${w.aiMetadata.contentOrigin==="ai_synthesized"?"bg-cyan-500/15 text-cyan-400":"bg-amber-500/15 text-amber-400"}`,children:w.aiMetadata.contentOrigin==="ai_synthesized"?`Orig ${Math.round(w.aiMetadata.originalityScore*100)}%`:`Der ${Math.round(w.aiMetadata.originalityScore*100)}%`}),((J=w.aiMetadata)==null?void 0:J.categoryConfidence)!==void 0&&r.jsxs("span",{className:`px-2 py-0.5 rounded font-medium flex items-center gap-1 shrink-0 ${w.aiMetadata.categoryLowConfidence?"bg-orange-500/15 text-orange-400":w.aiMetadata.categoryConfidence>=.7?"bg-emerald-500/15 text-emerald-400":"bg-blue-500/15 text-blue-400"}`,title:"Confianza de clasificación ensemble",children:[w.aiMetadata.categoryLowConfidence&&r.jsx(it,{size:12}),"Cat: ",Math.round(w.aiMetadata.categoryConfidence*100),"%"]})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 shrink-0 items-stretch justify-start",children:[(!w.publishStatus||w.publishStatus==="pendiente")&&!w.scheduledAt?r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),f(w)},"aria-label":"Programar publicación",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx(Rt,{size:16}),r.jsx("span",{children:"Programar"})]}):r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),o(w)},"aria-label":"Ver borrador",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-cyan-600 hover:bg-cyan-700 rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx(dr,{size:16}),r.jsx("span",{children:"Ver"})]}),r.jsxs("div",{className:"relative image-gen-dropdown-container",children:[r.jsxs("button",{onClick:ne=>{ne.stopPropagation();const de=S[w._id];T({[w._id]:!de})},disabled:c[w._id],"aria-label":"Opciones de imagen",className:"h-10 min-w-[140px] flex items-center justify-center gap-1.5 px-4 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-purple-500",children:[r.jsx(ur,{size:16}),r.jsx("span",{children:c[w._id]?"Generando...":"Imagen"}),r.jsx(Mt,{size:14,className:`transition-transform ${S[w._id]?"rotate-180":""}`})]}),S[w._id]&&r.jsxs("div",{className:"absolute top-full right-0 mt-1 w-64 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),T({}),P(w._id)},className:"w-full px-4 py-3 text-left text-sm hover:bg-zinc-800 transition-colors flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium text-white",children:"Generar portada IA"}),r.jsx("span",{className:"text-xs text-zinc-400",children:"Crear portada con modelos de IA"})]}),r.jsx("div",{className:"border-t border-zinc-800"}),r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),T({}),E(w._id)},className:"w-full px-4 py-3 text-left text-sm hover:bg-zinc-800 transition-colors flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium text-white",children:"Capturar imagen del sitio"}),r.jsx("span",{className:"text-xs text-zinc-400",children:"Usar imagen de la noticia original"})]})]})]}),w.status==="draft"&&r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),D(w._id)},"aria-label":"Rechazar borrador",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-red-600 hover:bg-red-700 rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-red-500",children:[r.jsx(Je,{size:16}),r.jsx("span",{children:"Rechazar"})]}),(()=>{const ne=w.reviewStatus||"pending",de=w.status==="draft"&&ne!=="approved",pe=w.status==="draft"&&ne!=="changes_requested",Pe=w.status==="draft"&&ne!=="pending",qe=ne==="approved"&&!w.publishedAs;return r.jsxs(r.Fragment,{children:[de&&r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),U(w._id,"approved")},disabled:v[w._id],"aria-label":"Aprobar borrador",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[r.jsx(nt,{size:16}),r.jsx("span",{children:"Aprobar"})]}),qe&&r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),d(w)},disabled:x[w._id],"aria-label":"Publicar borrador",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx(ft,{size:16}),r.jsx("span",{children:x[w._id]?"Publicando...":"Publicar"})]}),pe&&r.jsxs("div",{className:"relative changes-dropdown-container",children:[r.jsxs("button",{onClick:fe=>{fe.stopPropagation();const ct=A[w._id];O({[w._id]:!ct})},disabled:v[w._id],"aria-label":"Opciones de cambios",className:"h-10 min-w-[140px] flex items-center justify-center gap-1.5 px-4 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-amber-500",children:[r.jsx(Dn,{size:16}),r.jsx("span",{children:"Cambios"}),r.jsx(Mt,{size:14,className:`transition-transform ${A[w._id]?"rotate-180":""}`})]}),A[w._id]&&r.jsxs("div",{className:"absolute top-full right-0 mt-1 w-64 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),O({}),U(w._id,"changes_requested")},className:"w-full px-4 py-3 text-left text-sm hover:bg-zinc-800 transition-colors flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium text-white",children:"Solicitar cambios al contenido"}),r.jsx("span",{className:"text-xs text-zinc-400",children:"Revisar texto con IA"})]}),r.jsx("div",{className:"border-t border-zinc-800"}),r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),O({}),G(w._id)},className:"w-full px-4 py-3 text-left text-sm hover:bg-zinc-800 transition-colors flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium text-white",children:"Generar nueva portada IA"}),r.jsx("span",{className:"text-xs text-zinc-400",children:"Con prompt manual"})]})]})]}),Pe&&r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),U(w._id,"pending")},disabled:v[w._id],"aria-label":"Volver a pendiente",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-zinc-700 hover:bg-zinc-600 disabled:bg-zinc-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-zinc-600",children:[r.jsx(De,{size:16}),r.jsx("span",{children:"Pendiente"})]})]})})()]})]}),r.jsxs("div",{className:"md:hidden flex flex-wrap gap-2 mt-3",children:[(!w.publishStatus||w.publishStatus==="pendiente")&&!w.scheduledAt?r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),f(w)},"aria-label":"Programar publicación",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx(Rt,{size:16}),r.jsx("span",{children:"Programar"})]}):r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),o(w)},"aria-label":"Ver borrador",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-cyan-600 hover:bg-cyan-700 rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx(dr,{size:16}),r.jsx("span",{children:"Ver"})]}),r.jsxs("div",{className:"relative image-gen-dropdown-container",children:[r.jsxs("button",{onClick:ne=>{ne.stopPropagation();const de=S[`mobile-${w._id}`];T({[`mobile-${w._id}`]:!de})},disabled:c[w._id],"aria-label":"Opciones de imagen",className:"h-10 min-w-[140px] flex items-center justify-center gap-1.5 px-4 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-purple-500",children:[r.jsx(ur,{size:16}),r.jsx("span",{children:c[w._id]?"Generando...":"Imagen"}),r.jsx(Mt,{size:14,className:`transition-transform ${S[`mobile-${w._id}`]?"rotate-180":""}`})]}),S[`mobile-${w._id}`]&&r.jsxs("div",{className:"absolute top-full right-0 mt-1 w-64 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),T({}),P(w._id)},className:"w-full px-4 py-3 text-left text-sm hover:bg-zinc-800 transition-colors flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium text-white",children:"Generar portada IA"}),r.jsx("span",{className:"text-xs text-zinc-400",children:"Crear portada con modelos de IA"})]}),r.jsx("div",{className:"border-t border-zinc-800"}),r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),T({}),E(w._id)},className:"w-full px-4 py-3 text-left text-sm hover:bg-zinc-800 transition-colors flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium text-white",children:"Capturar imagen del sitio"}),r.jsx("span",{className:"text-xs text-zinc-400",children:"Usar imagen de la noticia original"})]})]})]}),w.status==="draft"&&r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),D(w._id)},"aria-label":"Rechazar borrador",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-red-600 hover:bg-red-700 rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-red-500",children:[r.jsx(Je,{size:16}),r.jsx("span",{children:"Rechazar"})]}),(()=>{const ne=w.reviewStatus||"pending",de=w.status==="draft"&&ne!=="approved",pe=w.status==="draft"&&ne!=="changes_requested",Pe=w.status==="draft"&&ne!=="pending",qe=ne==="approved"&&!w.publishedAs;return r.jsxs(r.Fragment,{children:[de&&r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),U(w._id,"approved")},disabled:v[w._id],"aria-label":"Aprobar borrador",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[r.jsx(nt,{size:16}),r.jsx("span",{children:"Aprobar"})]}),qe&&r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),d(w)},disabled:x[w._id],"aria-label":"Publicar borrador",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[r.jsx(ft,{size:16}),r.jsx("span",{children:x[w._id]?"Publicando...":"Publicar"})]}),pe&&r.jsxs("div",{className:"relative changes-dropdown-container",children:[r.jsxs("button",{onClick:fe=>{fe.stopPropagation();const ct=A[`mobile-${w._id}`];O({[`mobile-${w._id}`]:!ct})},disabled:v[w._id],"aria-label":"Opciones de cambios",className:"h-10 min-w-[140px] flex items-center justify-center gap-1.5 px-4 bg-amber-600 hover:bg-amber-700 disabled:bg-amber-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-amber-500",children:[r.jsx(Dn,{size:16}),r.jsx("span",{children:"Cambios"}),r.jsx(Mt,{size:14,className:`transition-transform ${A[`mobile-${w._id}`]?"rotate-180":""}`})]}),A[`mobile-${w._id}`]&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),O({}),U(w._id,"changes_requested")},className:"w-full px-4 py-3 text-left text-sm hover:bg-zinc-800 transition-colors flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium text-white",children:"Solicitar cambios al contenido"}),r.jsx("span",{className:"text-xs text-zinc-400",children:"Revisar texto con IA"})]}),r.jsx("div",{className:"border-t border-zinc-800"}),r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),O({}),G(w._id)},className:"w-full px-4 py-3 text-left text-sm hover:bg-zinc-800 transition-colors flex flex-col gap-1",children:[r.jsx("span",{className:"font-medium text-white",children:"Generar nueva portada IA"}),r.jsx("span",{className:"text-xs text-zinc-400",children:"Con prompt manual"})]})]})]}),Pe&&r.jsxs("button",{onClick:fe=>{fe.stopPropagation(),U(w._id,"pending")},disabled:v[w._id],"aria-label":"Volver a pendiente",className:"h-10 min-w-[44px] flex items-center justify-center gap-1.5 px-4 bg-zinc-700 hover:bg-zinc-600 disabled:bg-zinc-800 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors shrink-0 whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-zinc-600",children:[r.jsx(De,{size:16}),r.jsx("span",{children:"Pendiente"})]})]})})()]})]},w._id)})})]}),a&&r.jsx(fx,{draft:a,onClose:()=>o(null),onApprove:w=>{U(w,"approved")},onResetToPending:w=>{U(w,"pending")},onPublish:w=>{d(w)},onRefresh:_}),s&&r.jsx(hx,{title:s.title,initialNotes:s.initialNotes,required:s.required,maxLength:500,mode:s.mode||"notes",onSubmit:async w=>{if(s.mode==="ai-revision"){y($=>({...$,[s.draftId]:!0})),ee.loading("Iniciando revisión con IA...",{id:`ai-rev-${s.draftId}`});try{const B=await(await fetch(`/api/redactor-ia/drafts/${s.draftId}/request-changes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({notes:w})})).json();B.ok?(ee.success("Revisión iniciada. Procesando en segundo plano...",{id:`ai-rev-${s.draftId}`}),L(s.draftId)):ee.error(B.error||"Error al solicitar revisión",{id:`ai-rev-${s.draftId}`})}catch{ee.error("Error de conexión",{id:`ai-rev-${s.draftId}`})}finally{y($=>({...$,[s.draftId]:!1}))}}else if(s.mode==="custom-cover-prompt"){Q(s.draftId,w);return}else if(s.mode==="changes-list"&&Array.isArray(w)){y($=>({...$,[s.draftId]:!0})),ee.loading("Registrando cambios...",{id:`changes-${s.draftId}`});try{const B=await(await fetch(`/api/redactor-ia/drafts/${s.draftId}/request-changes`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({items:w})})).json();B.ok?(ee.success("Cambios solicitados registrados",{id:`changes-${s.draftId}`}),n(V=>V.map(W=>W._id===s.draftId?B.draft:W)),(a==null?void 0:a._id)===s.draftId&&o(B.draft),k()):ee.error(B.error||"Error al solicitar cambios",{id:`changes-${s.draftId}`})}catch{ee.error("Error de conexión",{id:`changes-${s.draftId}`})}finally{y($=>({...$,[s.draftId]:!1}))}}else await z(s.draftId,s.status,w);l(null)},onClose:()=>l(null)}),g&&r.jsx(px,{draft:g,onSubmit:async w=>{await F(g._id,w),d(null)},onClose:()=>d(null)}),b&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-2xl shadow-2xl max-w-md w-full p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(Rt,{size:24,className:"text-indigo-400"}),"Programar Publicación"]}),r.jsx("p",{className:"text-sm text-zinc-400 mb-4",children:"Selecciona la fecha y hora para publicar automáticamente:"}),r.jsx("p",{className:"text-sm font-medium text-white mb-2 line-clamp-2",children:b.titulo}),r.jsxs("form",{onSubmit:w=>{w.preventDefault();const $=w.target.scheduledAt.value;if(!$){ee.error("Selecciona una fecha y hora");return}C(b._id,$),f(null)},children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Fecha y hora de publicación"}),r.jsx("input",{type:"datetime-local",name:"scheduledAt",required:!0,min:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,16),className:"w-full h-11 px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx("button",{type:"button",onClick:()=>f(null),className:"h-11 px-6 bg-zinc-800 hover:bg-zinc-700 rounded-xl text-sm font-medium transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"h-11 px-6 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium transition-colors",children:"Guardar programación"})]})]})]})})]})}function gx(){var p,j,h,N,A,O,S,T,k,_,E,P;const[e,n]=M.useState(null),[t,i]=M.useState(null),[a,o]=M.useState(!0),[c,m]=M.useState(!1),[v,y]=M.useState(null);M.useEffect(()=>{x(),u(),s();const z=()=>{console.log("[ConfiguracionIA] Refrescando estadísticas..."),u()};return window.addEventListener("redactor-ia:stats-changed",z),()=>{window.removeEventListener("redactor-ia:stats-changed",z)}},[]);const x=async()=>{try{console.log("[RedactorConfig] Cargando configuración desde backend...");const L=await(await fetch("/api/redactor-ia/config",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();console.log("[RedactorConfig] Config recibida:",{scanFrequency:L.scanFrequency,freshnessWindowHours:L.freshnessWindowHours,perSourceCap:L.perSourceCap,maxTopicsPerScan:L.maxTopicsPerScan,autoGenerateImages:L.autoGenerateImages,autoCaptureImageFromSourceOnCreate:L.autoCaptureImageFromSourceOnCreate,strictCuba:L.strictCuba}),n(L)}catch(z){console.error("[RedactorConfig] Error fetching config:",z),ee.error("Error al cargar configuración")}finally{o(!1)}},u=async()=>{try{const L=await(await fetch("/api/redactor-ia/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();i(L.usage)}catch(z){console.error("Error fetching stats:",z)}},s=async()=>{try{const L=await(await fetch("/api/redactor-ia/config/suggest-frequency",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();y(L)}catch(z){console.error("Error fetching suggestion:",z)}},l=async z=>{const L={...e,enforceSourceAllowlist:z};n(L);try{ee.loading("Actualizando configuración...",{id:"allowlist"}),(await fetch("/api/redactor-ia/config",{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({enforceSourceAllowlist:z})})).ok?(ee.success(z?"Modo estricto activado":"Modo estricto desactivado",{id:"allowlist"}),x()):(ee.error("Error al actualizar",{id:"allowlist"}),n(e))}catch{ee.error("Error de conexión",{id:"allowlist"}),n(e)}},g=async()=>{if(!e.autoScheduleEnabled){ee.error("Activa la programación automática primero");return}ee.loading("Programando borradores...",{id:"auto-schedule"});try{const L=await(await fetch("/api/redactor-ia/auto-schedule",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).json();L.ok?ee.success(L.message,{id:"auto-schedule"}):ee.error(L.error||"Error al programar",{id:"auto-schedule"})}catch{ee.error("Error de conexión",{id:"auto-schedule"})}},d=async()=>{var z;if(!((z=e.facebookScheduler)!=null&&z.enabled)){ee.error("Activa la programación automática en Facebook primero");return}ee.loading("Consultando estado...",{id:"fb-schedule"});try{const U=await(await fetch("/api/redactor-ia/facebook/recalculate-schedule",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).json();if(U.ok){const{summary:G}=U;ee.success(`${G.candidatesCount} candidatos, ${G.publishedToday} publicados hoy`,{id:"fb-schedule",duration:4e3})}else ee.error(U.error||"Error al consultar",{id:"fb-schedule"})}catch{ee.error("Error de conexión",{id:"fb-schedule"})}},b=async()=>{var L,U,G,Q,F;m(!0),ee.loading("Guardando configuración...",{id:"save"});const z={scanFrequency:e.scanFrequency,autoGenerateImages:!!e.autoGenerateImages,autoCaptureImageFromSourceOnCreate:!!(e.autoCaptureImageFromSourceOnCreate??!1),maxTopicsPerScan:Number(e.maxTopicsPerScan),minSourcesForHighConfidence:Number(e.minSourcesForHighConfidence),suggestOptimalFrequency:!!e.suggestOptimalFrequency,newsApiEnabled:!!e.newsApiEnabled,strictCuba:!!(e.strictCuba??!1),freshnessWindowHours:Number(e.freshnessWindowHours||48),perSourceCap:Number(e.perSourceCap||5),aiModel:e.aiModel,imageProvider:e.imageProvider,enforceSourceAllowlist:!!e.enforceSourceAllowlist,trustedSources:e.trustedSources||[],autoScheduleEnabled:!!(e.autoScheduleEnabled??!1),autoScheduleInterval:Number(e.autoScheduleInterval||10),autoScheduleStartHour:Number(e.autoScheduleStartHour??7),autoScheduleEndHour:Number(e.autoScheduleEndHour??23),facebookScheduler:{enabled:!!(((L=e.facebookScheduler)==null?void 0:L.enabled)??!1),intervalMinutes:Number(((U=e.facebookScheduler)==null?void 0:U.intervalMinutes)||30),startHour:Number(((G=e.facebookScheduler)==null?void 0:G.startHour)??9),endHour:Number(((Q=e.facebookScheduler)==null?void 0:Q.endHour)??23),maxPerDay:Number(((F=e.facebookScheduler)==null?void 0:F.maxPerDay)||0)}};console.log("[RedactorConfig] Guardando configuración..."),console.log("[RedactorConfig] Payload:",z);try{const D=await fetch("/api/redactor-ia/config",{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(z)});if(D.ok){const C=await D.json();console.log("[RedactorConfig] ✅ Configuración guardada exitosamente"),console.log("[RedactorConfig] Campos actualizados:",C.updated),ee.success("Configuración guardada",{id:"save"}),await x(),await s(),console.log("[RedactorConfig] Config recargada desde backend")}else{const C=await D.json();console.error("[RedactorConfig] Error del servidor:",C),ee.error(C.error||"Error al guardar",{id:"save"})}}catch(D){console.error("[RedactorConfig] Error de conexión:",D),ee.error("Error de conexión",{id:"save"})}finally{m(!1)}},f=()=>{v!=null&&v.suggested&&n({...e,scanFrequency:v.suggested})};return a?r.jsx("div",{className:"text-center py-12 text-zinc-400",children:"Cargando configuración..."}):e?r.jsxs("div",{className:"mx-auto lg:max-w-none",children:[(v==null?void 0:v.shouldChange)&&e.suggestOptimalFrequency&&r.jsx("div",{className:"min-w-0 rounded-2xl border border-cyan-900/30 bg-cyan-900/20 p-3 sm:p-4 lg:p-4 xl:p-5 2xl:p-6 mb-6",children:r.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center lg:justify-between gap-3 lg:gap-6",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[r.jsx(cr,{className:"text-cyan-400 shrink-0 mt-1",size:20}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h4",{className:"text-base sm:text-lg font-semibold text-cyan-400 mb-2",children:"Sugerencia de optimización"}),r.jsxs("p",{className:"text-sm text-zinc-300 break-words",children:["Basado en tus estadísticas, recomendamos cambiar la frecuencia de escaneo de ",r.jsx("strong",{children:v.current})," a ",r.jsx("strong",{children:v.suggested}),"."]})]})]}),r.jsx("button",{onClick:f,"aria-label":"Aplicar sugerencia de frecuencia",className:"h-11 xl:h-12 px-4 lg:px-5 shrink-0 bg-cyan-600 hover:bg-cyan-700 rounded-xl text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",children:"Aplicar sugerencia"})]})}),r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-3 sm:p-4 lg:p-5 xl:p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4 lg:mb-5",children:[r.jsx(De,{className:"text-cyan-400",size:20}),r.jsx("h3",{className:"text-base sm:text-lg font-bold",children:"Configuración de Escaneo"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Frecuencia de escaneo automático"}),r.jsxs("select",{value:e.scanFrequency,onChange:z=>n({...e,scanFrequency:z.target.value}),"aria-label":"Frecuencia de escaneo",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx("option",{value:"manual",children:"Manual (sin escaneo automático)"}),r.jsx("option",{value:"2h",children:"Cada 2 horas"}),r.jsx("option",{value:"3h",children:"Cada 3 horas (recomendado)"}),r.jsx("option",{value:"4h",children:"Cada 4 horas"}),r.jsx("option",{value:"6h",children:"Cada 6 horas"}),r.jsx("option",{value:"12h",children:"Cada 12 horas"}),r.jsx("option",{value:"24h",children:"Diariamente"})]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:e.scanFrequency==="manual"?"Solo escanearás cuando lo ejecutes manualmente":"Mayor frecuencia = más temas detectados, pero mayor costo de API"}),e.scanFrequency==="manual"&&r.jsxs("p",{className:"mt-2 text-sm text-zinc-400 break-words",children:["El escaneo automático está desactivado. Usa el botón ",r.jsx("strong",{children:"Escanear"})," en ",r.jsx("em",{children:"Cola de Temas"}),"."]})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Máximo de temas por escaneo"}),r.jsx("input",{type:"number",min:"1",max:"20",value:e.maxTopicsPerScan,onChange:z=>n({...e,maxTopicsPerScan:Number(z.target.value)||8}),"aria-label":"Máximo de temas por escaneo",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Temas más relevantes por escaneo (1-20)"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Fuentes mínimas para confianza alta"}),r.jsx("input",{type:"number",min:"1",max:"10",value:e.minSourcesForHighConfidence,onChange:z=>n({...e,minSourcesForHighConfidence:Number(z.target.value)||3}),"aria-label":"Fuentes mínimas",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:'Fuentes para marcar "Alta confianza"'})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2 flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"newsApiEnabled",checked:e.newsApiEnabled,onChange:z=>n({...e,newsApiEnabled:z.target.checked}),className:"w-5 h-5 shrink-0 accent-cyan-500 cursor-pointer focus:outline-none focus:ring-2 focus:ring-cyan-500"}),r.jsx("label",{htmlFor:"newsApiEnabled",className:"text-xs sm:text-sm text-zinc-300 cursor-pointer break-words",children:"Habilitar NewsAPI para escaneo de fuentes internacionales"})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2 flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"strictCuba",checked:e.strictCuba??!1,onChange:z=>n({...e,strictCuba:z.target.checked}),className:"w-5 h-5 shrink-0 accent-amber-500 cursor-pointer focus:outline-none focus:ring-2 focus:ring-amber-500"}),r.jsx("label",{htmlFor:"strictCuba",className:"text-xs sm:text-sm text-zinc-300 cursor-pointer break-words font-medium",children:"Modo Cuba estricto (solo noticias relacionadas)"})]}),r.jsx("p",{className:"text-[10px] sm:text-xs text-zinc-500 leading-relaxed ml-8",children:"Si está activo, el escáner obtendrá exclusivamente noticias recientes desde fuentes cubanas principales (CiberCuba, ElToque y Martí Noticias), ignorando NewsAPI y otros países."})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2 flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"suggestOptimal",checked:e.suggestOptimalFrequency,onChange:z=>n({...e,suggestOptimalFrequency:z.target.checked}),className:"w-5 h-5 shrink-0 accent-cyan-500 cursor-pointer focus:outline-none focus:ring-2 focus:ring-cyan-500"}),r.jsx("label",{htmlFor:"suggestOptimal",className:"text-xs sm:text-sm text-zinc-300 cursor-pointer break-words",children:"Mostrar sugerencias automáticas de frecuencia óptima"})]})]})]}),r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-3 sm:p-4 lg:p-5 xl:p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4 lg:mb-5",children:[r.jsx(De,{className:"text-emerald-400",size:20}),r.jsx("h3",{className:"text-base sm:text-lg font-bold",children:"Priorización de Frescura"})]}),r.jsx("p",{className:"text-xs sm:text-sm text-zinc-400 mb-4 leading-relaxed",children:"Controla cómo se priorizan las noticias más recientes. Una ventana menor muestra solo lo más nuevo; el cap por fuente evita que medios prolíficos dominen la cola."}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Ventana de tiempo"}),r.jsxs("select",{value:e.freshnessWindowHours||48,onChange:z=>n({...e,freshnessWindowHours:Number(z.target.value)}),"aria-label":"Ventana de tiempo para frescura",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[r.jsx("option",{value:"12",children:"12 horas (ultra-reciente)"}),r.jsx("option",{value:"24",children:"24 horas (1 día)"}),r.jsx("option",{value:"48",children:"48 horas (2 días) - Recomendado"}),r.jsx("option",{value:"72",children:"72 horas (3 días)"}),r.jsx("option",{value:"168",children:"7 días (semana completa)"})]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Solo artículos publicados en este período"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Máximo por fuente"}),r.jsx("input",{type:"number",min:"1",max:"10",value:e.perSourceCap||5,onChange:z=>n({...e,perSourceCap:Number(z.target.value)||5}),"aria-label":"Máximo de artículos por fuente",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Artículos más recientes por dominio (1-10)"})]}),r.jsx("div",{className:"min-w-0 sm:col-span-2 bg-emerald-900/10 border border-emerald-900/30 rounded-lg p-3",children:r.jsxs("p",{className:"text-[10px] sm:text-xs text-emerald-300/90 leading-relaxed",children:[r.jsx("strong",{children:"Efecto:"})," Las noticias se ordenan por score de frescura × impacto. Artículos recientes obtienen mayor puntuación, decayendo exponencialmente con el tiempo. Esto garantiza que lo más nuevo aparezca primero en la cola."]})})]})]}),r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-3 sm:p-4 lg:p-5 xl:p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4 lg:mb-5",children:[r.jsx(ur,{className:"text-purple-400",size:20}),r.jsx("h3",{className:"text-base sm:text-lg font-bold",children:"Configuración de Generación"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"autoImages",checked:e.autoGenerateImages,onChange:z=>{const L=z.target.checked;n({...e,autoGenerateImages:L,autoCaptureImageFromSourceOnCreate:L?!1:e.autoCaptureImageFromSourceOnCreate})},className:"w-5 h-5 shrink-0 accent-purple-500 cursor-pointer focus:outline-none focus:ring-2 focus:ring-purple-500"}),r.jsx("label",{htmlFor:"autoImages",className:"text-xs sm:text-sm text-zinc-300 cursor-pointer break-words",children:"Generar imágenes automáticamente al crear borradores (IA)"})]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-2 ml-8 break-words",children:"Crea portadas con inteligencia artificial basadas en el contenido"})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"autoCaptureImages",checked:e.autoCaptureImageFromSourceOnCreate,onChange:z=>{const L=z.target.checked;n({...e,autoCaptureImageFromSourceOnCreate:L,autoGenerateImages:L?!1:e.autoGenerateImages})},className:"w-5 h-5 shrink-0 accent-cyan-500 cursor-pointer focus:outline-none focus:ring-2 focus:ring-cyan-500"}),r.jsx("label",{htmlFor:"autoCaptureImages",className:"text-xs sm:text-sm text-zinc-300 cursor-pointer break-words",children:"Extraer imágenes automáticamente del sitio al crear borradores"})]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-2 ml-8 break-words",children:"Usa la imagen del artículo original como portada cuando sea posible"})]}),r.jsx("div",{className:"min-w-0 sm:col-span-2",children:r.jsxs("p",{className:"text-xs text-amber-400 flex items-start gap-2",children:[r.jsx(it,{size:14,className:"shrink-0 mt-0.5"}),r.jsx("span",{children:"Solo uno de los modos automáticos puede estar activo a la vez"})]})}),r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Modelo de texto (LLM)"}),r.jsxs("select",{value:e.aiModel,onChange:z=>n({...e,aiModel:z.target.value}),"aria-label":"Modelo de IA",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx("option",{value:"claude-sonnet-4.5-thinking",children:"Claude Sonnet 4.5 Thinking (recomendado)"}),r.jsx("option",{value:"claude-opus",children:"Claude Opus (premium)"}),r.jsx("option",{value:"gpt-4o",children:"GPT-4o"}),r.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o-mini"})]})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Proveedor de imágenes"}),r.jsxs("select",{value:e.imageProvider,onChange:z=>n({...e,imageProvider:z.target.value}),"aria-label":"Proveedor de imágenes",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[r.jsx("option",{value:"dall-e-3",children:"DALL-E 3 (OpenAI)"}),r.jsx("option",{value:"dall-e-2",children:"DALL-E 2 (OpenAI)"}),r.jsx("option",{value:"hailuo",children:"Hailuo (MiniMax)"}),r.jsx("option",{value:"stable-diffusion",children:"Stable Diffusion"}),r.jsx("option",{value:"midjourney",children:"Midjourney"})]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"⚠️ Genera imágenes con IA; puede tener costos por uso"})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Fuentes confiables (allowlist)"}),r.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl p-3 max-h-40 overflow-y-auto min-w-0",children:[r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(e.trustedSources||[]).map((z,L)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-cyan-600/20 text-cyan-400 text-xs rounded-full border border-cyan-600/30 shrink-0",children:[r.jsx("span",{className:"break-all",children:z}),r.jsx("button",{onClick:()=>{const U=e.trustedSources.filter((G,Q)=>Q!==L);n({...e,trustedSources:U})},"aria-label":`Eliminar ${z}`,className:"hover:text-red-400 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 rounded",children:"×"})]},L))}),r.jsx("input",{type:"text",placeholder:"Agregar dominio (ej: bbc.com)",onKeyPress:z=>{var L;if(z.key==="Enter"&&z.target.value.trim()){const U=z.target.value.trim();(L=e.trustedSources)!=null&&L.includes(U)||n({...e,trustedSources:[...e.trustedSources||[],U]}),z.target.value=""}},"aria-label":"Agregar fuente confiable",className:"w-full h-10 min-w-0 px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Solo artículos de estos dominios serán considerados (presiona Enter para agregar)"})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.enforceSourceAllowlist||!1,onChange:z=>l(z.target.checked),className:"w-5 h-5 shrink-0 rounded border-zinc-700 bg-zinc-900 text-cyan-600 cursor-pointer focus:ring-2 focus:ring-cyan-600 focus:ring-offset-0"}),r.jsx("span",{className:"text-xs sm:text-sm text-zinc-300 break-words",children:"Aplicar allowlist estrictamente (solo fuentes confiables)"})]}),e.enforceSourceAllowlist&&r.jsxs("div",{className:"mt-2 flex items-center gap-2 p-2 sm:p-3 bg-cyan-500/10 border border-cyan-500/30 rounded-xl min-w-0",children:[r.jsx(nt,{size:16,className:"text-cyan-400 shrink-0"}),r.jsx("p",{className:"text-xs text-cyan-300 break-words",children:"🔒 Modo estricto activo — solo se escanearán fuentes verificadas"})]})]})]})]}),r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-3 sm:p-4 lg:p-5 xl:p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4 lg:mb-5",children:[r.jsx(De,{className:"text-amber-400",size:20}),r.jsx("h3",{className:"text-base sm:text-lg font-bold",children:"Programación automática"})]}),r.jsx("p",{className:"text-xs sm:text-sm text-zinc-400 mb-4 leading-relaxed",children:"Distribuye automáticamente fechas de publicación a los borradores pendientes según el intervalo y la franja horaria configurados."}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"min-w-0 sm:col-span-2 flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"autoScheduleEnabled",checked:e.autoScheduleEnabled??!1,onChange:z=>n({...e,autoScheduleEnabled:z.target.checked}),className:"w-5 h-5 shrink-0 accent-amber-500 cursor-pointer focus:outline-none focus:ring-2 focus:ring-amber-500"}),r.jsx("label",{htmlFor:"autoScheduleEnabled",className:"text-xs sm:text-sm text-zinc-300 cursor-pointer break-words font-medium",children:"Activar programación automática de publicaciones"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Intervalo entre publicaciones"}),r.jsxs("select",{value:e.autoScheduleInterval||10,onChange:z=>n({...e,autoScheduleInterval:Number(z.target.value)}),disabled:!e.autoScheduleEnabled,"aria-label":"Intervalo entre publicaciones",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"5",children:"5 minutos"}),r.jsx("option",{value:"10",children:"10 minutos (recomendado)"}),r.jsx("option",{value:"15",children:"15 minutos"}),r.jsx("option",{value:"20",children:"20 minutos"}),r.jsx("option",{value:"30",children:"30 minutos"}),r.jsx("option",{value:"60",children:"1 hora"}),r.jsx("option",{value:"120",children:"2 horas"})]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Tiempo entre cada publicación automática"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Hora de inicio"}),r.jsx("select",{value:e.autoScheduleStartHour??7,onChange:z=>n({...e,autoScheduleStartHour:Number(z.target.value)}),disabled:!e.autoScheduleEnabled,"aria-label":"Hora de inicio de franja horaria",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed",children:Array.from({length:24},(z,L)=>r.jsxs("option",{value:L,children:[String(L).padStart(2,"0"),":00"]},L))}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Hora de inicio de la franja"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Hora de fin"}),r.jsx("select",{value:e.autoScheduleEndHour??23,onChange:z=>n({...e,autoScheduleEndHour:Number(z.target.value)}),disabled:!e.autoScheduleEnabled,"aria-label":"Hora de fin de franja horaria",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 disabled:opacity-50 disabled:cursor-not-allowed",children:Array.from({length:24},(z,L)=>r.jsxs("option",{value:L,children:[String(L).padStart(2,"0"),":00"]},L))}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Hora de fin de la franja"})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsxs("button",{onClick:g,disabled:!e.autoScheduleEnabled,className:"h-11 w-full flex items-center justify-center gap-2 px-4 bg-amber-600 hover:bg-amber-700 disabled:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500",children:[r.jsx(De,{size:16}),"Recalcular programación ahora"]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-2 break-words",children:"Distribuye fechas de publicación a todos los borradores pendientes"})]}),r.jsx("div",{className:"min-w-0 sm:col-span-2 bg-amber-900/10 border border-amber-900/30 rounded-lg p-3",children:r.jsxs("p",{className:"text-[10px] sm:text-xs text-amber-300/90 leading-relaxed",children:[r.jsx("strong",{children:"Cómo funciona:"})," Los borradores pendientes se programan automáticamente con el intervalo configurado, respetando la franja horaria. Si la hora actual está fuera de la franja, se programa para el siguiente día. Los borradores aprobados se publican inmediatamente como siempre."]})})]})]}),r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-3 sm:p-4 lg:p-5 xl:p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4 lg:mb-5",children:[r.jsx(qn,{className:"text-blue-400",size:20}),r.jsx("h3",{className:"text-base sm:text-lg font-bold",children:"Programación automática en Facebook"})]}),r.jsx("p",{className:"text-xs sm:text-sm text-zinc-400 mb-4 leading-relaxed",children:"Publica automáticamente TODAS las noticias que aún no están en Facebook, siguiendo el intervalo y la franja horaria configurados."}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"min-w-0 sm:col-span-2 flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"facebookSchedulerEnabled",checked:((p=e.facebookScheduler)==null?void 0:p.enabled)??!1,onChange:z=>n({...e,facebookScheduler:{...e.facebookScheduler,enabled:z.target.checked}}),className:"w-5 h-5 shrink-0 accent-blue-500 cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"facebookSchedulerEnabled",className:"text-xs sm:text-sm text-zinc-300 cursor-pointer break-words font-medium",children:"Activar programación automática en Facebook"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Intervalo entre publicaciones en Facebook"}),r.jsxs("select",{value:((j=e.facebookScheduler)==null?void 0:j.intervalMinutes)||30,onChange:z=>n({...e,facebookScheduler:{...e.facebookScheduler,intervalMinutes:Number(z.target.value)}}),disabled:!((h=e.facebookScheduler)!=null&&h.enabled),"aria-label":"Intervalo entre publicaciones en Facebook",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"10",children:"10 minutos"}),r.jsx("option",{value:"15",children:"15 minutos"}),r.jsx("option",{value:"20",children:"20 minutos"}),r.jsx("option",{value:"30",children:"30 minutos (recomendado)"}),r.jsx("option",{value:"45",children:"45 minutos"}),r.jsx("option",{value:"60",children:"1 hora"})]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Tiempo entre cada publicación en Facebook"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Máximo de publicaciones diarias"}),r.jsx("input",{type:"number",min:"0",max:"50",value:((N=e.facebookScheduler)==null?void 0:N.maxPerDay)||0,onChange:z=>n({...e,facebookScheduler:{...e.facebookScheduler,maxPerDay:Number(z.target.value)}}),disabled:!((A=e.facebookScheduler)!=null&&A.enabled),"aria-label":"Máximo de publicaciones diarias en Facebook",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"0 = sin límite diario"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Hora de inicio (Facebook)"}),r.jsx("select",{value:((O=e.facebookScheduler)==null?void 0:O.startHour)??9,onChange:z=>n({...e,facebookScheduler:{...e.facebookScheduler,startHour:Number(z.target.value)}}),disabled:!((S=e.facebookScheduler)!=null&&S.enabled),"aria-label":"Hora de inicio de franja horaria en Facebook",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:Array.from({length:24},(z,L)=>r.jsxs("option",{value:L,children:[String(L).padStart(2,"0"),":00"]},L))}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Hora de inicio de la franja"})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("label",{className:"block text-xs text-zinc-400 mb-2",children:"Hora de fin (Facebook)"}),r.jsx("select",{value:((T=e.facebookScheduler)==null?void 0:T.endHour)??23,onChange:z=>n({...e,facebookScheduler:{...e.facebookScheduler,endHour:Number(z.target.value)}}),disabled:!((k=e.facebookScheduler)!=null&&k.enabled),"aria-label":"Hora de fin de franja horaria en Facebook",className:"w-full h-11 min-w-0 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-xl text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:Array.from({length:24},(z,L)=>r.jsxs("option",{value:L,children:[String(L).padStart(2,"0"),":00"]},L))}),r.jsx("p",{className:"text-xs text-zinc-500 mt-1 break-words",children:"Hora de fin de la franja"})]}),r.jsxs("div",{className:"min-w-0 sm:col-span-2",children:[r.jsxs("button",{onClick:d,disabled:!((_=e.facebookScheduler)!=null&&_.enabled),className:"h-11 w-full flex items-center justify-center gap-2 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx(qn,{size:16}),"Recalcular programación en Facebook ahora"]}),r.jsx("p",{className:"text-xs text-zinc-500 mt-2 break-words",children:"Consulta el estado actual de la cola de publicación en Facebook"})]}),r.jsx("div",{className:"min-w-0 sm:col-span-2 bg-blue-900/10 border border-blue-900/30 rounded-lg p-3",children:r.jsxs("p",{className:"text-[10px] sm:text-xs text-blue-300/90 leading-relaxed",children:[r.jsx("strong",{children:"Cómo funciona:"})," El sistema detecta automáticamente TODAS las noticias publicadas que aún no están compartidas en Facebook. Las publica en orden cronológico (más antiguas primero) respetando el intervalo, franja horaria y límite diario configurados. Sin selección manual requerida."]})})]})]}),t&&r.jsxs("div",{className:"bg-zinc-800/50 border border-zinc-700 rounded-xl p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(cr,{className:"text-green-400",size:20}),r.jsx("h3",{className:"text-lg font-bold",children:"Estadísticas de Uso"}),r.jsx("span",{className:"text-xs text-zinc-500 ml-auto",children:(E=t.range)!=null&&E.days?`Últimos ${t.range.days} días`:"Mes actual"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-700 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-zinc-500 mb-1",children:"Temas por escaneo"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:(t.totalScans||0)===0?"—":(t.avgTopicsPerScan||0).toFixed(1)}),r.jsxs("p",{className:"text-xs text-zinc-600 mt-1",children:[t.totalScans||0," escaneos"]})]}),r.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-700 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-zinc-500 mb-1",children:"Borradores aprobados"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:t.approvedDrafts||0}),r.jsxs("p",{className:"text-xs text-zinc-600 mt-1",children:[((P=t.approvalRate)==null?void 0:P.toFixed(0))||0,"% de ",t.totalDrafts||0]})]}),r.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-700 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-zinc-500 mb-1",children:"Costo promedio"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:t.avgCost>0?`$${t.avgCost.toFixed(4)}`:"—"}),r.jsx("p",{className:"text-xs text-zinc-600 mt-1",children:t.totalCost>0?`Total: $${t.totalCost.toFixed(2)}`:"Sin datos"})]})]}),t.costsByType&&Object.keys(t.costsByType).length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-700",children:[r.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:"Desglose de costos:"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(t.costsByType).map(([z,L])=>r.jsxs("div",{className:"text-xs",children:[r.jsxs("span",{className:"text-zinc-400 capitalize",children:[z,":"]}),r.jsxs("span",{className:"text-white ml-1 font-medium",children:["$",L.total.toFixed(2)]}),r.jsxs("span",{className:"text-zinc-600 ml-1",children:["(",L.count,")"]})]},z))})]})]}),r.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(it,{className:"text-blue-400 mt-1",size:20}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-blue-400 mb-2",children:"Información importante"}),r.jsxs("ul",{className:"text-sm text-zinc-300 space-y-1",children:[r.jsx("li",{children:"• El escaneo solo detecta temas, NO genera texto automáticamente"}),r.jsx("li",{children:"• Debes seleccionar manualmente los temas que deseas convertir en borradores"}),r.jsx("li",{children:"• Los borradores generados NO se publican automáticamente"}),r.jsx("li",{children:"• Revisa y edita cada borrador antes de publicarlo"}),r.jsx("li",{children:"• Las imágenes generadas pueden requerir revisión editorial"})]})]})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:b,disabled:c,"aria-label":"Guardar configuración",className:"h-11 xl:h-12 min-w-[44px] flex items-center justify-center gap-2 px-6 lg:px-8 bg-cyan-600 hover:bg-cyan-700 disabled:bg-zinc-600 disabled:cursor-not-allowed rounded-xl font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500",children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"hidden sm:inline",children:"Guardando..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ls,{size:18}),r.jsx("span",{className:"hidden sm:inline",children:"Guardar Configuración"}),r.jsx("span",{className:"sm:hidden",children:"Guardar"})]})})})]}):r.jsx("div",{className:"text-center py-12 text-red-400",children:"Error al cargar configuración"})}function vx(){const[e,n]=M.useState("cola"),t=[{id:"cola",label:"Cola de Temas",icon:ps},{id:"borradores",label:"Borradores IA",icon:ht},{id:"config",label:"Configuración",icon:Ds}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-900 text-white",children:[r.jsxs("div",{className:"sticky top-[0px] z-40 bg-zinc-900/85 backdrop-blur supports-[backdrop-filter]:bg-zinc-900/60 border-b border-zinc-800",children:[r.jsxs("div",{className:"max-w-screen-2xl mx-auto px-3 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-4 sm:py-6 lg:py-4",children:[r.jsx("div",{className:"flex items-center justify-between gap-2 flex-wrap mb-2",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ht,{className:"text-cyan-400",size:28}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Redactor IA"})]})}),r.jsx("p",{className:"text-sm sm:text-base text-zinc-400",children:"Automatizador de Noticias — Escaneo inteligente y generación asistida"})]}),r.jsx("div",{className:"max-w-screen-2xl mx-auto px-3 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-3",children:r.jsx("div",{className:"relative flex items-center gap-2 sm:gap-3 overflow-hidden overflow-x-auto lg:overflow-visible no-scrollbar px-1",role:"tablist","aria-label":"Pestañas Redactor IA",children:t.map(i=>{const a=i.icon;return r.jsxs("button",{onClick:()=>n(i.id),role:"tab","aria-selected":e===i.id,className:`shrink-0 rounded-xl px-3 sm:px-4 lg:px-5 xl:px-6 h-10 lg:h-11 xl:h-12 flex items-center justify-center gap-2 text-sm font-medium transition-all ${e===i.id?"bg-cyan-600 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800/70"}`,children:[r.jsx(a,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:i.label}),r.jsx("span",{className:"sm:hidden",children:i.label.split(" ")[0]})]},i.id)})})})]}),r.jsxs("div",{className:"max-w-screen-2xl mx-auto px-3 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 pt-[96px] lg:pt-[104px] pb-6",children:[e==="cola"&&r.jsx(dx,{}),e==="borradores"&&r.jsx(mx,{}),e==="config"&&r.jsx(gx,{})]})]})}function bx(){return r.jsx(us,{children:r.jsxs(ot,{path:"/",element:r.jsx(ds,{}),children:[r.jsx(ot,{index:!0,element:r.jsx(lx,{})}),r.jsx(ot,{path:"news",element:r.jsx(nx,{})}),r.jsx(ot,{path:"reports",element:r.jsx(ix,{})}),r.jsx(ot,{path:"users",element:r.jsx(ax,{})}),r.jsx(ot,{path:"password-requests",element:r.jsx(cx,{})}),r.jsx(ot,{path:"perfil",element:r.jsx(ux,{})}),r.jsx(ot,{path:"redactor-ia",element:r.jsx(vx,{})})]})})}function Ox(){const[e,n]=M.useState(!1),t=_a();M.useEffect(()=>{localStorage.getItem("token")||t("/admin/login",{replace:!0})},[t]);const i=()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("userEmail"),localStorage.removeItem("user"),window.dispatchEvent(new Event("auth:changed")),t("/admin/login",{replace:!0})};return r.jsxs("div",{className:"admin-ui flex min-h-screen bg-zinc-950 text-white",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx(Fn,{})}),e&&r.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 md:hidden",onClick:()=>n(!1),children:r.jsx("div",{className:"absolute top-0 left-0 w-64 h-full sidebar border-r border-zinc-800",onClick:a=>a.stopPropagation(),children:r.jsx(Fn,{})})}),r.jsxs("main",{className:"flex-grow p-4 md:p-8 overflow-y-auto w-full bg-zinc-950 admin-scrollbar text-white",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 md:hidden",children:[r.jsx("button",{onClick:()=>n(!0),className:"text-white/80 hover:text-white",children:r.jsx(Ts,{size:28})}),r.jsx("button",{onClick:i,className:"bg-red-700 text-white px-4 py-2 rounded hover:bg-red-800 text-sm",children:"Cerrar sesión"})]}),r.jsx("div",{className:"max-w-6xl mx-auto",children:r.jsx(bx,{})})]})]})}export{Ox as default};
