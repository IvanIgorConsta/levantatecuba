import{l as E,j as e,P as u,r as l,R as a,p,i as x,E as S,L as b}from"./index-1606e3a6.js";import{l as T}from"./shopifyClient-c9f36648.js";import{A as w}from"./arrow-left-0b0d6e68.js";import{L as f}from"./loader-circle-de7850c1.js";import{F as R}from"./funnel-bb2d01a9.js";import{C as F}from"./chevron-right-b6135664.js";function j({label:r="Volver",fallbackTo:c="/"}){const n=E(),o=m=>{m.preventDefault(),window.history.length>1?n(-1):n(c)};return e.jsxs("button",{onClick:o,className:"inline-flex items-center gap-2 rounded-lg border border-zinc-800 bg-zinc-900/50 hover:bg-zinc-800 px-4 py-2 text-sm text-zinc-300 hover:text-white transition-all duration-200",children:[e.jsx(w,{size:16}),r]})}j.propTypes={label:u.string,fallbackTo:u.string};function U(){const[r,c]=l.useState([]),[n,o]=l.useState([]),[m,h]=l.useState(["Todos"]),[d,v]=l.useState("Todos"),[N,g]=l.useState(!0);return l.useEffect(()=>{if(a.STORE_URL&&p(a.STORE_URL)){console.log("[Tienda] Redirigiendo a tienda externa:",a.STORE_URL);const s=setTimeout(()=>{window.location.href=a.STORE_URL},500);return()=>clearTimeout(s)}(async()=>{var s;try{console.log("[Tienda FE] Iniciando carga de productos desde Shopify..."),console.log("[Tienda FE] STORE_MODE:",a.STORE_MODE),console.log("[Tienda FE] USE_SHOPIFY:",a.USE_SHOPIFY),console.log("[Tienda FE] SHOPIFY_API_BASE:",a.SHOPIFY_API_BASE),g(!0);const i=await T(),t=Array.isArray(i)?i:[];console.log("[Tienda FE] Productos recibidos:",t.length),t.length>0?console.log("[Tienda FE] Primer producto:",{title:t[0].title,price:t[0].priceMin,currency:t[0].currencyCode,imageUrl:t[0].imageUrl,variants:((s=t[0].variants)==null?void 0:s.length)||0}):(console.warn("[Tienda FE] âš ï¸ No se recibieron productos - verifica:"),console.warn("1. Que el backend estÃ© corriendo en",a.SHOPIFY_API_BASE),console.warn("2. Que las credenciales de Shopify en .env sean correctas"),console.warn("3. Que haya productos activos en el canal Headless de Shopify")),c(t),o(t);const z=["Todos",...new Set(t.map(y=>y.category).filter(Boolean))];h(z),console.info("[Tienda FE] âœ… Carga completada:",t.length,"productos")}catch(i){console.error("[Tienda FE] âŒ Error cargando productos:",(i==null?void 0:i.message)||i),console.error("[Tienda FE] Stack:",i==null?void 0:i.stack),c([]),o([]),h(["Todos"]),toast.error("Error al cargar productos. Verifica la consola para mÃ¡s detalles.")}finally{g(!1)}})()},[]),l.useEffect(()=>{const s=r.filter(i=>d==="Todos"?!0:(i.category||"").toLowerCase()===d.toLowerCase());o(s)},[d,r]),a.STORE_URL&&p(a.STORE_URL)?e.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center max-w-md animate-fade-in",children:[e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-red-500/20 rounded-full blur-2xl animate-pulse"}),e.jsx("div",{className:"relative bg-zinc-900 rounded-full p-6 inline-block border border-zinc-800",children:e.jsx(x,{size:48,className:"text-red-500"})})]}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Redirigiendo a la tienda..."}),e.jsxs("p",{className:"text-zinc-400 mb-8",children:["EstÃ¡s siendo redirigido a nuestra tienda oficial. Si no eres redirigido automÃ¡ticamente,"," ",e.jsxs("a",{href:a.STORE_URL,className:"text-red-500 hover:text-red-400 underline inline-flex items-center gap-1",children:["haz clic aquÃ­",e.jsx(S,{size:14})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(f,{className:"animate-spin text-red-500",size:32})}),e.jsxs("div",{className:"mt-8 px-4 py-2 bg-zinc-900/50 rounded-lg border border-zinc-800",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Redirigiendo a:"}),e.jsx("p",{className:"text-sm text-zinc-300 font-mono break-all",children:a.STORE_URL})]})]})}):e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white",children:[e.jsx("div",{className:"bg-zinc-900 border-b border-zinc-800 py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(j,{label:"Volver",fallbackTo:"/"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Tienda Oficial"}),e.jsx("p",{className:"text-zinc-400",children:"Apoya la causa con nuestro merchandising exclusivo"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(R,{className:"text-zinc-400",size:20}),e.jsx("span",{className:"text-zinc-400 text-sm",children:"Filtrar por categorÃ­a:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(s=>e.jsxs("button",{onClick:()=>v(s),className:`px-4 py-2 rounded-lg transition-colors ${d===s?"bg-red-500 text-white":"bg-zinc-800 text-zinc-300 hover:bg-zinc-700"}`,children:[s," (",s==="Todos"?r.length:r.filter(i=>(i.category||"").toLowerCase()===s.toLowerCase()).length,")"]},s))})]}),N?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(f,{className:"animate-spin text-red-500",size:48})}):n.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-red-500/20 rounded-full blur-3xl"}),e.jsx(x,{className:"relative mx-auto text-zinc-600 mb-4",size:64})]}),e.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"ðŸ›ï¸ No hay productos disponibles aÃºn"}),e.jsx("p",{className:"text-zinc-400 text-lg max-w-md mx-auto",children:"Estamos actualizando nuestro catÃ¡logo. Muy pronto tendremos productos exclusivos para ti."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:n.map(s=>e.jsxs("div",{className:"group relative",children:[e.jsx(b,{to:`/tienda/${s.handle}`,className:"absolute inset-0 z-10","aria-label":`Ver detalles de ${s.title}`}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg overflow-hidden hover:border-red-500/50 transition-all duration-300",children:[e.jsxs("div",{className:"relative aspect-square bg-zinc-800 overflow-hidden",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(x,{className:"text-zinc-700",size:48})}),e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/80 backdrop-blur-sm text-white px-3 py-1 rounded-full",children:[e.jsxs("span",{className:"text-lg font-bold",children:["$",s.priceMin||s.price||"0.00"]}),e.jsx("span",{className:"text-xs ml-1 opacity-75",children:s.currencyCode||"USD"})]})]}),e.jsxs("div",{className:"p-4 relative",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-zinc-400 line-clamp-2 mb-3",children:s.description?s.description.slice(0,100)+"...":"Sin descripciÃ³n"}),e.jsx("div",{className:"relative z-20",children:e.jsxs(b,{to:`/tienda/${s.handle}`,className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200 font-medium text-sm",onClick:i=>i.stopPropagation(),children:["Ver detalles",e.jsx(F,{size:16})]})})]})]})]},s.id))})]})]})}export{U as default};
