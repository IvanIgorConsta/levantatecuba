import{l as x,r as a,j as e,L as w,V as g}from"./index-1606e3a6.js";function b(){const i=x(),[n,u]=a.useState(""),[l,h]=a.useState(""),[d,s]=a.useState(""),m=async t=>{t.preventDefault(),s("");try{const o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:l})}),c=await o.json();if(!o.ok){s(c.error||"Error al iniciar sesión");return}const{token:p,user:r}=c;localStorage.setItem("token",p),localStorage.setItem("role",r.role),localStorage.setItem("userEmail",r.email),g.success("✅ Inicio de sesión exitoso"),r.role==="admin"||r.role==="editor"?i("/admin"):i("/"),setTimeout(()=>{window.location.reload()},100)}catch{s("❌ No se pudo conectar con el servidor.")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-800 to-red-400",children:e.jsxs("form",{onSubmit:m,className:"glass p-8 rounded-lg shadow-lg w-full max-w-md text-white text-center space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Acceso Administrativo"}),d&&e.jsx("div",{className:"bg-white/10 text-white p-2 rounded text-sm border border-white/20",children:d}),e.jsx("input",{type:"email",placeholder:"Correo electrónico",value:n,onChange:t=>u(t.target.value),className:"w-full px-4 py-2 rounded bg-white/10 border border-white/20 placeholder-white text-white focus:outline-none",required:!0}),e.jsx("input",{type:"password",placeholder:"Contraseña",value:l,onChange:t=>h(t.target.value),className:"w-full px-4 py-2 rounded bg-white/10 border border-white/20 placeholder-white text-white focus:outline-none",required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 rounded transition",children:"Iniciar Sesión"}),e.jsxs("div",{className:"mt-4 text-sm text-white",children:["¿Olvidaste tu contraseña?"," ",e.jsx(w,{to:"/forgot-password",className:"text-white underline hover:text-gray-300",children:"Recuperarla"})]})]})})}export{b as default};
